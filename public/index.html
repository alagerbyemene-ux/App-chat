<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø´Ø§Øª Ø±Ø¹ÙˆØ¯ Ø§Ù„Ø¸Ù„Ø§Ù…</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <div id="loginScreen" class="screen active">
        <div class="login-container">
            <div class="login-header">
                <div class="logo">
                    <h1>Ø´Ø§Øª Ø±Ø¹ÙˆØ¯ Ø§Ù„Ø¸Ù„Ø§Ù…</h1>
                    <p>Ù…Ù†ØµØ© Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ Ø§Ù„Ø£ÙˆÙ„Ù‰</p>
                </div>
            </div>
            <div class="login-tabs">
                <button class="tab-btn active" onclick="showLoginTab('login')">
                    <i class="fas fa-sign-in-alt"></i>
                    ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                </button>
                <button class="tab-btn" onclick="showLoginTab('register')">
                    <i class="fas fa-user-plus"></i>
                    Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨
                </button>
                <button class="tab-btn" onclick="showLoginTab('guest')">
                    <i class="fas fa-user-secret"></i>
                    Ø¯Ø®ÙˆÙ„ ÙƒØ²Ø§Ø¦Ø±
                </button>
            </div>
            <!-- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
            <form id="loginForm" class="auth-form active" onsubmit="handleLogin(event)">
                <div class="input-group">
                    <i class="fas fa-envelope"></i>
                    <input type="email" id="loginEmail" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="loginPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required>
                </div>
                <button type="submit" class="auth-btn">
                    <i class="fas fa-sign-in-alt"></i>
                    Ø¯Ø®ÙˆÙ„
                </button>
            </form>
            <!-- Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ -->
            <form id="registerForm" class="auth-form" onsubmit="handleRegister(event)">
                <div class="input-group">
                    <i class="fas fa-user"></i>
                    <input type="text" id="registerDisplayName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-envelope"></i>
                    <input type="email" id="registerEmail" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="registerPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required>
                </div>
                <button type="submit" class="auth-btn">
                    <i class="fas fa-user-plus"></i>
                    Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨
                </button>
            </form>
            <!-- Ø¯Ø®ÙˆÙ„ ÙƒØ²Ø§Ø¦Ø± -->
            <form id="guestForm" class="auth-form" onsubmit="handleGuestLogin(event)">
                <div class="input-group">
                    <i class="fas fa-user"></i>
                    <input type="text" id="guestName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-birthday-cake"></i>
                    <input type="number" id="guestAge" placeholder="Ø§Ù„Ø¹Ù…Ø±" min="13" max="99" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-venus-mars"></i>
                    <select id="guestGender" required>
                        <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø¬Ù†Ø³</option>
                        <option value="Ø°ÙƒØ±">Ø°ÙƒØ±</option>
                        <option value="Ø£Ù†Ø«Ù‰">Ø£Ù†Ø«Ù‰</option>
                        <option value="Ø¢Ø®Ø±">Ø¢Ø®Ø±</option>
                    </select>
                </div>
                <button type="submit" class="auth-btn">
                    <i class="fas fa-user-secret"></i>
                    Ø¯Ø®ÙˆÙ„ ÙƒØ²Ø§Ø¦Ø±
                </button>
            </form>
            <div id="loginError" class="error-message"></div>
        </div>
    </div>

        <!-- Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
        <div id="mainScreen" class="screen">
            <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
            <header class="main-header" style="height: 50px; min-height: 50px;">
                <div class="header-left">
                    <button class="hamburger-btn" onclick="openMainMenu()">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="app-logo">
                        <h1>Ø´Ø§Øª Ø±Ø¹ÙˆÙˆØ¯ Ø§Ù„Ø¶Ù„Ø§Ù… </h1>
                    </div>
                </div>
            <!-- â¬‡â¬‡â¬‡ Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© Ø¨Ø²Ø± Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ â¬‡â¬‡â¬‡ -->
            <div class="header-center">
                <!-- Ù„Ø§ Ù†Ø¶Ø¹ Ø£ÙŠ Ø²Ø± Ù‡Ù†Ø§ØŒ Ø³Ù†Ø¶ÙŠÙÙ‡ ÙÙŠ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø³ÙÙ„ÙŠ ÙÙ‚Ø· -->
                <h2 id="currentRoomName">Ø§Ù„ØºØ±ÙØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h2> <!-- Ù†Ø­ØªÙØ¸ Ø¨Ø§Ø³Ù… Ø§Ù„ØºØ±ÙØ© ÙÙŠ Ø§Ù„ÙˆØ³Ø· -->
            </div>
            <!-- â¬†â¬†â¬† Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ â¬†â¬†â¬† -->
            <div class="header-right">
                <!-- â¬‡â¬‡â¬‡ Ø²Ø± Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø§ØµØ© â¬‡â¬‡â¬‡ -->
                <button class="header-btn" onclick="openMessages()" title="Ø±Ø³Ø§Ù„Ø©">
                    <i class="fas fa-envelope"></i>
                    <span id="messagesCount" class="notification-badge">0</span>
                </button>

                <!-- â¬‡â¬‡â¬‡ Ø²Ø± Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØµØ¯Ø§Ù‚Ø© â¬‡â¬‡â¬‡ -->
                <div style="position: relative;">
                    <button class="header-btn" onclick="toggleFriendRequests()" title="Ø·Ù„Ø¨">
                        <i class="fas fa-user-plus"></i>
                        <span id="friendRequestsCount" class="notification-badge" style="display: none;">0</span>
                    </button>

                    <!-- Ù‚Ø§Ø¦Ù…Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØµØ¯Ø§Ù‚Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© -->
                    <div id="friendRequestsDropdown" class="friend-requests-dropdown">
                        <div class="dropdown-header">
                            <h4>Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØµØ¯Ø§Ù‚Ø©</h4>
                        </div>
                        <div id="friendRequestsList" class="friend-requests-list">
                            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                        </div>
                    </div>
                </div>

                <style>
                /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© */
                .friend-requests-dropdown {
                    position: absolute;
                    top: 50px;
                    right: 0;
                    width: 320px;
                    max-height: 450px;
                    background: #fff;
                    border-radius: 10px;
                    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
                    z-index: 9999;
                    display: none;
                    overflow: hidden;
                }

                .friend-requests-dropdown.active {
                    display: block;
                    animation: slideDown 0.3s ease;
                }

                @keyframes slideDown {
                    from {
                        opacity: 0;
                        transform: translateY(-10px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }

                .dropdown-header {
                    padding: 15px;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    color: #fff;
                    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
                }

                .dropdown-header h4 {
                    margin: 0;
                    font-size: 16px;
                    font-weight: 600;
                }

                .friend-requests-list {
                    max-height: 380px;
                    overflow-y: auto;
                }

                .friend-request-item {
                    display: flex;
                    align-items: center;
                    gap: 10px;
                    padding: 12px 15px;
                    border-bottom: 1px solid #f0f0f0;
                    transition: all 0.3s;
                }

                .friend-request-item:last-child {
                    border-bottom: none;
                }

                .friend-request-item:hover {
                    background: #f8f9fa;
                }

                .request-avatar {
                    width: 45px;
                    height: 45px;
                    border-radius: 50%;
                    object-fit: cover;
                    border: 2px solid #667eea;
                }

                .request-info {
                    flex: 1;
                    min-width: 0;
                }

                .request-name {
                    font-size: 14px;
                    font-weight: 600;
                    color: #333;
                    margin-bottom: 2px;
                    white-space: nowrap;
                    overflow: hidden;
                    text-overflow: ellipsis;
                }

                .request-time {
                    font-size: 11px;
                    color: #999;
                }

                .request-actions {
                    display: flex;
                    gap: 5px;
                }

                .accept-btn, .reject-btn {
                    padding: 6px 12px;
                    border: none;
                    border-radius: 5px;
                    cursor: pointer;
                    font-size: 12px;
                    font-weight: 500;
                    transition: all 0.3s;
                }

                .accept-btn {
                    background: #4CAF50;
                    color: #fff;
                }

                .accept-btn:hover {
                    background: #45a049;
                    transform: scale(1.05);
                }

                .reject-btn {
                    background: #f44336;
                    color: #fff;
                }

                .reject-btn:hover {
                    background: #da190b;
                    transform: scale(1.05);
                }

                .no-requests {
                    text-align: center;
                    padding: 40px 20px;
                    color: #999;
                }

                .no-requests i {
                    font-size: 40px;
                    margin-bottom: 10px;
                    color: #ddd;
                }

                .no-requests p {
                    font-size: 14px;
                    margin: 0;
                }

                /* Ø´Ø§Ø±Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª */
                .notification-badge {
                    position: absolute;
                    top: -5px;
                    right: -5px;
                    background: #ff4444;
                    color: #fff;
                    border-radius: 50%;
                    width: 20px;
                    height: 20px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 11px;
                    font-weight: bold;
                }
                </style>

                <script>
                // Ù‚Ø§Ø¦Ù…Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØµØ¯Ø§Ù‚Ø©
                let friendRequests = [];

                // ÙØªØ­/Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø©
                function toggleFriendRequests() {
                    const dropdown = document.getElementById('friendRequestsDropdown');
                    dropdown.classList.toggle('active');
                    updateFriendRequestsList();
                }

                // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØµØ¯Ø§Ù‚Ø©
                function updateFriendRequestsList() {
                    const listContainer = document.getElementById('friendRequestsList');
                    const countBadge = document.getElementById('friendRequestsCount');

                    if (friendRequests.length === 0) {
                        listContainer.innerHTML = `
                            <div class="no-requests">
                                <i class="fas fa-user-friends"></i>
                                <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª ØµØ¯Ø§Ù‚Ø©</p>
                            </div>
                        `;
                        countBadge.style.display = 'none';
                    } else {
                        countBadge.style.display = 'flex';
                        countBadge.textContent = friendRequests.length;

                        listContainer.innerHTML = friendRequests.map((request) => `
                            <div class="friend-request-item">
                                <img src="${request.avatar || 'https://via.placeholder.com/45'}" alt="${request.name}" class="request-avatar">
                                <div class="request-info">
                                    <div class="request-name">${request.name}</div>
                                    <div class="request-time">${request.time}</div>
                                </div>
                                <div class="request-actions">
                                    <button class="accept-btn" onclick="acceptFriendRequest('${request.userId}')">
                                        <i class="fas fa-check"></i>
                                    </button>
                                    <button class="reject-btn" onclick="rejectFriendRequest('${request.userId}')">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                        `).join('');
                    }
                }

                // Ù‚Ø¨ÙˆÙ„ Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø©
                function acceptFriendRequest(userId) {
                    socket.emit('acceptFriendRequest', { userId: userId });
                }

                // Ø±ÙØ¶ Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø©
                function rejectFriendRequest(userId) {
                    socket.emit('rejectFriendRequest', { userId: userId });
                }

                // Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ ØµØ¯Ø§Ù‚Ø©
                function sendFriendRequest(targetUserId) {
                    socket.emit('sendFriendRequest', { targetUserId: targetUserId });
                }

                // ====== Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ± ======

                // Ø¹Ù†Ø¯ Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø·Ù„Ø¨ ØµØ¯Ø§Ù‚Ø© Ø¬Ø¯ÙŠØ¯
                socket.on('newFriendRequest', (data) => {
                    friendRequests.push({
                        userId: data.userId,
                        name: data.userName,
                        avatar: data.userAvatar,
                        time: 'Ø§Ù„Ø¢Ù†'
                    });
                    updateFriendRequestsList();
                    showNotification(`Ø·Ù„Ø¨ ØµØ¯Ø§Ù‚Ø© Ø¬Ø¯ÙŠØ¯ Ù…Ù† ${data.userName}`, 'info');
                });

                // Ø¹Ù†Ø¯ Ù‚Ø¨ÙˆÙ„ Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø©
                socket.on('friendRequestAccepted', (data) => {
                    friendRequests = friendRequests.filter(req => req.userId !== data.userId);
                    updateFriendRequestsList();
                    showNotification(`ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø© Ù…Ù† ${data.userName}`, 'success');
                });

                // Ø¹Ù†Ø¯ Ø±ÙØ¶ Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø©
                socket.on('friendRequestRejected', (data) => {
                    friendRequests = friendRequests.filter(req => req.userId !== data.userId);
                    updateFriendRequestsList();
                });

                // Ø¹Ù†Ø¯ Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ ØµØ¯Ø§Ù‚Ø© Ø¨Ù†Ø¬Ø§Ø­
                socket.on('friendRequestSent', (data) => {
                    showNotification('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„ØµØ¯Ø§Ù‚Ø© Ø¨Ù†Ø¬Ø§Ø­', 'success');
                });

                // Ø¹Ù†Ø¯ ÙˆØ¬ÙˆØ¯ Ø®Ø·Ø£
                socket.on('friendRequestError', (data) => {
                    showNotification(data.message, 'error');
                });

                // ØªØ­Ù…ÙŠÙ„ Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØµØ¯Ø§Ù‚Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø§ØªØµØ§Ù„
                socket.on('loadFriendRequests', (data) => {
                    friendRequests = data.requests || [];
                    updateFriendRequestsList();
                });

                // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø®Ø§Ø±Ø¬Ù‡Ø§
                document.addEventListener('click', function(event) {
                    const dropdown = document.getElementById('friendRequestsDropdown');
                    const btn = event.target.closest('.header-btn[title="Ø·Ù„Ø¨"]');

                    if (dropdown && !dropdown.contains(event.target) && !btn) {
                        dropdown.classList.remove('active');
                    }
                });

                // Ø¯Ø§Ù„Ø© Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
                function showNotification(message, type = 'info') {
                    const toast = document.createElement('div');
                    toast.className = `toast toast-${type}`;
                    toast.textContent = message;
                    toast.style.cssText = `
                        position: fixed;
                        top: 80px;
                        right: 20px;
                        background: ${type === 'success' ? '#4CAF50' : type === 'error' ? '#f44336' : '#2196F3'};
                        color: white;
                        padding: 12px 20px;
                        border-radius: 8px;
                        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                        z-index: 99999;
                        font-size: 14px;
                        animation: slideInRight 0.3s ease;
                    `;
                    document.body.appendChild(toast);

                    setTimeout(() => {
                        toast.style.animation = 'slideOutRight 0.3s ease';
                        setTimeout(() => toast.remove(), 300);
                    }, 3000);
                }
                </script>

                <button class="header-btn" onclick="openNotifications()" title="Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª">
                    <i class="fas fa-bell"></i>
                    <span id="notificationCount" class="notification-badge">0</span>
                </button>
                <button class="header-btn" onclick="openSettings()" title="Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª">
                    <i class="fas fa-cog"></i>
                </button>
                <div class="user-profile-mini" onclick="openProfileModal()">
                    <img id="headerUserAvatar" class="user-avatar-mini" src="https://images.pexels.com/photos/771742/pexels-photo-771742.jpeg?auto=compress&cs=tinysrgb&w=100&h=100&fit=crop" alt="">
                    <div class="user-info-mini">
                        <span id="headerUserName" class="user-name">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</span>
                        <span id="headerUserRank" class="user-rank">Ø²Ø§Ø¦Ø±</span>
                    </div>
                </div>
            </div>
            </header>
            <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
            <main class="main-content">
                <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© -->
                        <div class="chat-area">
                            <div class="chat-header">
                                <h2 id="currentRoomName">Ø§Ù„ØºØ±ÙØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h2>
                                <div class="chat-controls">
                                    <button class="control-btn" onclick="toggleChatMode()" title="ØªØ¨Ø¯ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©">
                                        <i class="fas fa-exchange-alt"></i>
                                        <span id="chatModeText">Ø¹Ø§Ù…</span>
                                    </button>
                                    <button class="control-btn" onclick="clearChat()" title="Ù…Ø³Ø­ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©" id="clearChatBtn" style="display: none;">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                <div id="messagesContainer" class="messages-container">
                    <div class="welcome-message">
                        <div class="welcome-content">
                            <h3> Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø´Ø§Øª Ø±Ø¹ÙˆÙˆØ¯ Ø§Ù„Ø¶Ù„Ø§Ù…</h3>
                            <p>Ø§Ø¨Ø¯Ø£ Ù…Ø­Ø§Ø¯Ø«Ø© Ø¬Ø¯ÙŠØ¯Ø© Ø£Ùˆ Ø§Ù†Ø¶Ù… Ù„Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª Ø§Ù„Ø¬Ø§Ø±ÙŠØ©</p>
                        </div>
                    </div>
                </div>
                                <div class="message-input-container">
                                    <div class="input-tools" id="inputTools" style="display: none;">
                                        <button class="tool-btn" onclick="document.getElementById('imageInput').click()" title="Ø¥Ø±Ø³Ø§Ù„ ØµÙˆØ±Ø©">
                                            <i class="fas fa-image"></i>
                                        </button>
                                        <button class="tool-btn" onclick="toggleVoiceRecording()" title="ØªØ³Ø¬ÙŠÙ„ ØµÙˆØªÙŠ" id="voiceBtn">
                                            <i class="fas fa-microphone"></i>
                                        </button>
                                        <button class="tool-btn" onclick="openEmojiPicker()" title="Ø§Ù„Ø±Ù…ÙˆØ² Ø§Ù„ØªØ¹Ø¨ÙŠØ±ÙŠØ©">
                                            <i class="fas fa-smile"></i>
                                        </button>
                                        <!-- Ø²Ø± Ù„ÙˆØ­Ø© Ø§Ù„Ø±Ø³Ù… - ØªÙ… ØªØºÙŠÙŠØ±Ù‡ Ø¥Ù„Ù‰ ğŸ¨ -->
                                        <button class="tool-btn" onclick="openDrawingBoard()" title="Ù„ÙˆØ­Ø© Ø§Ù„Ø±Ø³Ù…">
                                            ğŸ¨
                                        </button>
                                        <button class="tool-btn" onclick="openGifPicker()" title="ØµÙˆØ± Ù…ØªØ­Ø±ÙƒØ©">
                                            <i class="fas fa-magic"></i>
                                        </button>
                                        
                                    </div>
                                    <div class="message-input-wrapper">
                                        <button class="tool-btn toggle-tools-btn" onclick="toggleInputTools()" title="Ø§Ù„Ù…Ø²ÙŠØ¯">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                        <div class="quoted-message" id="quotedMessage" style="display: none;">
                                            <div class="quoted-content">
                                                <span class="quoted-author"></span>
                                                <span class="quoted-text"></span>
                                            </div>
                                            <button class="cancel-quote" onclick="cancelQuote()">
                                                <i class="fas fa-times"></i>
                                            </button>
                                        </div>
                            <input type="text" id="messageInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..." />
                            <button class="send-btn" onclick="sendMessage()">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                    <!-- Ù†Ø§ÙØ°Ø© Ù„ÙˆØ­Ø© Ø§Ù„Ø±Ø³Ù… -->
                    <div class="drawing-modal" id="drawingModal">
                        <div class="drawing-container">
                            <div class="drawing-header">
                                <button onclick="setTool('brush')" title="ÙØ±Ø´Ø§Ø©"><i class="fas fa-paint-brush"></i></button>
                                <button onclick="setTool('eraser')" title="Ù…Ù…Ø­Ø§Ø©"><i class="fas fa-eraser"></i></button>
                                <button onclick="setTool('undo')" title="ØªØ±Ø§Ø¬Ø¹"><i class="fas fa-undo"></i></button>
                                <button onclick="setTool('redo')" title="Ø¥Ø¹Ø§Ø¯Ø©"><i class="fas fa-redo"></i></button>
                                <button onclick="clearCanvas()" title="Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„"><i class="fas fa-trash-alt"></i></button>
                                <button class="close-btn" onclick="closeDrawingBoard()"><i class="fas fa-times"></i></button>
                            </div>

                            <div class="drawing-toolbar">
                                <button onclick="setTool('brush')" class="active" id="brushBtn"><i class="fas fa-paint-brush"></i> ÙØ±Ø´Ø§Ø©</button>
                                <button onclick="setTool('eraser')" id="eraserBtn"><i class="fas fa-eraser"></i> Ù…Ù…Ø­Ø§Ø©</button>

                                <div class="color-picker">
                                    <input type="color" id="colorPicker" value="#000000" onchange="changeColor(this.value)">
                                    <span id="currentColorDisplay" style="display:block; width:20px; height:20px; background:#000000; border-radius:3px;"></span>
                                </div>

                                <div class="brush-size">
                                    <label for="brushSize">Ø³Ù…Ùƒ:</label>
                                    <input type="range" id="brushSize" min="1" max="50" value="5" oninput="changeBrushSize(this.value)">
                                    <span id="brushSizeValue">5</span>px
                                </div>
                            </div>

                            <div class="drawing-canvas-wrapper">
                                <canvas id="drawingCanvas" class="drawing-canvas"></canvas>
                            </div>

                            <div class="drawing-footer">
                                <button onclick="sendDrawing()">
                                    <i class="fas fa-paper-plane"></i> Send
                                </button>
                            </div>
                        </div>
                    </div>
        <!-- â¬‡â¬‡â¬‡ Ù†Ø§ÙØ°Ø© Ø§Ù„ØºØ±Ù Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© (Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©) â¬‡â¬‡â¬‡ -->
        <div id="roomsSidebar" class="rooms-sidebar">
            <div class="sidebar-header">
                <h3>Ø§Ù„ØºØ±Ù Ø§Ù„Ù…ØªØ§Ø­Ø©</h3>
                <button class="close-btn" onclick="toggleRoomsSidebar()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="roomsList" class="rooms-list">
                <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
            </div>
        </div>
        <!-- â¬‡â¬‡â¬‡ Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…ØªÙˆØ§Ø¬Ø¯ÙŠÙ† Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© â¬‡â¬‡â¬‡ -->
        <div id="onlineUsersSidebar" class="rooms-sidebar">
            <div class="rooms-header">
                <h2><i class="fas fa-users"></i> Ø§Ù„Ù…ØªÙˆØ§Ø¬Ø¯ÙŠÙ† Ø­Ø§Ù„ÙŠØ§Ù‹</h2>
                <button class="close-rooms-btn" onclick="toggleOnlineUsersSidebar()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="rooms-list" id="onlineUsersList">
                <p style="text-align: center; color: var(--text-secondary);">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†...</p>
            </div>
        </div>
        <!-- â¬†â¬†â¬† Ù†Ù‡Ø§ÙŠØ© Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…ØªÙˆØ§Ø¬Ø¯ÙŠÙ† Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© â¬†â¬†â¬† -->

            <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø³ÙÙ„ÙŠ -->
            <div class="bottom-control-bar">
                <!-- â¬‡â¬‡â¬‡ Ø²Ø± Ø§Ù„Ù…ØªÙˆØ§Ø¬Ø¯ÙŠÙ† (Ø£ÙˆÙ„ Ø²Ø± ÙÙŠ Ø§Ù„Ø´Ø±ÙŠØ·) â¬‡â¬‡â¬‡ -->
                <button class="control-btn" onclick="toggleOnlineUsersSidebar()" title="Ø§Ù„Ù…ØªÙˆØ§Ø¬Ø¯ÙŠÙ†">
                    <i class="fas fa-users"></i>
                </button>
                <!-- â¬†â¬†â¬† Ù†Ù‡Ø§ÙŠØ© Ø²Ø± Ø§Ù„Ù…ØªÙˆØ§Ø¬Ø¯ÙŠÙ† â¬†â¬†â¬† -->

                <!-- â¬‡â¬‡â¬‡ Ø²Ø± Ø§Ù„ØºØ±Ù (Ø«Ø§Ù†ÙŠ Ø²Ø± ÙÙŠ Ø§Ù„Ø´Ø±ÙŠØ·) â¬‡â¬‡â¬‡ -->
                <button class="control-btn" onclick="toggleRoomsSidebar()" title="Ø§Ù„ØºØ±Ù">
                    <i class="fas fa-home"></i>
                </button>
                <!-- â¬†â¬†â¬† Ù†Ù‡Ø§ÙŠØ© Ø²Ø± Ø§Ù„ØºØ±Ù â¬†â¬†â¬† -->

                <button class="control-btn" onclick="reloadPage()" title="ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©">
                    <i class="fas fa-sync-alt"></i>
                </button>
                <button class="control-btn" onclick="openRadioPlayer()" title="Ø§Ù„Ø±Ø§Ø¯ÙŠÙˆ">
                    <i class="fas fa-radio"></i>
                </button>
                <div class="music-controls">
                    <button class="control-btn" onclick="toggleMusicPlayer()" title="Ù…Ø´ØºÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰" id="musicToggle">
                        <i class="fas fa-music"></i>
                    </button>
                    <div class="volume-control">
                        <i class="fas fa-volume-up"></i>
                        <input type="range" id="volumeSlider" min="0" max="100" value="50">
                    </div>
                </div>
                <div class="now-playing" id="nowPlaying" style="display: none;">
                    <span class="song-title">Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ´ØºÙŠÙ„</span>
                </div>
            </div>

            <style>
            /* â¬‡â¬‡â¬‡ Ø´Ø±ÙŠØ· Ù†Ø­ÙŠÙ ÙˆÙ…Ø«Ø¨Øª ØªØ­Øª Ø´Ø±ÙŠØ· Ø§Ù„ÙƒØªØ§Ø¨Ø© â¬‡â¬‡â¬‡ */
            .bottom-control-bar {
                z-index: 10000 !important;
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                width: 100%;
                background: linear-gradient(180deg, rgba(69, 90, 100, 0.98) 0%, rgba(55, 71, 79, 0.95) 100%);
                backdrop-filter: blur(10px);
                border-top: 1px solid rgba(255, 255, 255, 0.1);
                padding: 8px 20px;
                display: flex; /* ÙŠØ¸Ù‡Ø± Ø¯Ø§Ø¦Ù…Ø§Ù‹ */
                align-items: center;
                justify-content: center;
                gap: 15px;
                box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.3);
                height: 60px;
            }

            /* â¬‡â¬‡â¬‡ Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø´Ø±ÙŠØ· ÙÙŠ ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙÙ‚Ø· â¬‡â¬‡â¬‡ */
            body[data-page="login"] .bottom-control-bar {
                display: none !important;
            }

            /* â¬‡â¬‡â¬‡ Ø£Ø²Ø±Ø§Ø± Ø¯Ø§Ø¦Ø±ÙŠØ© Ù†Ø­ÙŠÙØ© â¬‡â¬‡â¬‡ */
            .control-btn {
                width: 42px;
                height: 42px;
                min-width: 42px;
                border-radius: 50%;
                border: none;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: all 0.3s ease;
                box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
                flex-shrink: 0;
            }

            .control-btn:hover {
                transform: translateY(-3px) scale(1.08);
                box-shadow: 0 5px 15px rgba(102, 126, 234, 0.5);
            }

            .control-btn:active {
                transform: translateY(0) scale(0.95);
            }

            .control-btn i {
                font-size: 18px;
            }

            /* â¬‡â¬‡â¬‡ Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„ØµÙˆØª Ù†Ø­ÙŠÙ â¬‡â¬‡â¬‡ */
            .music-controls {
                display: flex;
                align-items: center;
                gap: 10px;
            }

            .volume-control {
                display: flex;
                align-items: center;
                gap: 8px;
                background: rgba(255, 255, 255, 0.1);
                padding: 6px 12px;
                border-radius: 25px;
                height: 36px;
            }

            .volume-control i {
                color: white;
                font-size: 16px;
            }

            #volumeSlider {
                width: 80px;
                height: 4px;
                cursor: pointer;
                accent-color: #667eea;
            }

            /* â¬‡â¬‡â¬‡ Ø§Ù„Ù†Øµ Ø§Ù„ØµØºÙŠØ± Ù„Ù„Ø£ØºÙ†ÙŠØ© â¬‡â¬‡â¬‡ */
            .now-playing {
                font-size: 12px;
                color: rgba(255, 255, 255, 0.9);
                max-width: 130px;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                font-weight: 500;
            }

            /* â¬‡â¬‡â¬‡ Ø±ÙØ¹ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ÙƒØªØ§Ø¨Ø© Ù„Ù„Ø£Ø¹Ù„Ù‰ â¬‡â¬‡â¬‡ */
            .message-input-container,
            .chat-input-wrapper,
            form.message-form,
            .input-area {
                padding-bottom: 70px !important;
            }

            /* â¬‡â¬‡â¬‡ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© ØªØ­Øª Ø§Ù„Ø£Ø²Ø±Ø§Ø± â¬‡â¬‡â¬‡ */
            .rooms-sidebar,
            #onlineUsersSidebar {
                z-index: 9999 !important;
                position: fixed;
                top: 0;
                right: -100%;
                width: 350px;
                height: 100vh;
                padding-bottom: 80px;
                background: white;
                transition: right 0.3s ease;
                overflow-y: auto;
                box-shadow: -3px 0 15px rgba(0, 0, 0, 0.2);
            }

            .rooms-sidebar.active,
            #onlineUsersSidebar.active {
                right: 0;
            }
            </style>

            <script>
            // â¬‡â¬‡â¬‡ ØªØ­Ø¯ÙŠØ¯ Ù†ÙˆØ¹ Ø§Ù„ØµÙØ­Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ URL â¬‡â¬‡â¬‡
            function detectPageType() {
                const url = window.location.href;
                const path = window.location.pathname;

                // Ø¥Ø°Ø§ Ø§Ù„Ø±Ø§Ø¨Ø· ÙÙŠÙ‡ "login" Ø£Ùˆ "signin" = ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„
                if (url.includes('login') || url.includes('signin') || path.includes('login')) {
                    document.body.setAttribute('data-page', 'login');
                } else {
                    document.body.setAttribute('data-page', 'chat');
                }
            }

            // ØªØ´ØºÙŠÙ„ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
            detectPageType();

            // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ø±Ø§Ø¨Ø·
            window.addEventListener('popstate', detectPageType);
            window.addEventListener('hashchange', detectPageType);

            // â¬‡â¬‡â¬‡ Ø¯Ø§Ù„Ø© ÙØªØ­/Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…ØªÙˆØ§Ø¬Ø¯ÙŠÙ† â¬‡â¬‡â¬‡
            function toggleOnlineUsersSidebar() {
                const sidebar = document.getElementById('onlineUsersSidebar');
                const roomsSidebar = document.getElementById('roomsSidebar');

                if (roomsSidebar && roomsSidebar.classList.contains('active')) {
                    roomsSidebar.classList.remove('active');
                }

                if (sidebar) {
                    sidebar.classList.toggle('active');

                    if (sidebar.classList.contains('active')) {
                        loadOnlineUsers();
                    }
                }
            }

            // â¬‡â¬‡â¬‡ Ø¯Ø§Ù„Ø© ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØªÙˆØ§Ø¬Ø¯ÙŠÙ† â¬‡â¬‡â¬‡
            function loadOnlineUsers() {
                const onlineUsers = [];

                const listContainer = document.getElementById('onlineUsersList');
                if (!listContainer) return;

                listContainer.innerHTML = '';

                if (onlineUsers.length === 0) {
                    listContainer.innerHTML = `
                        <div style="text-align: center; padding: 50px 20px; color: #999;">
                            <i class="fas fa-users" style="font-size: 50px; margin-bottom: 20px; opacity: 0.3;"></i>
                            <p style="font-size: 16px;">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ØªÙˆØ§Ø¬Ø¯ÙŠÙ† Ø­Ø§Ù„ÙŠØ§Ù‹</p>
                        </div>
                    `;
                    return;
                }

                onlineUsers.forEach(user => {
                    const userItem = document.createElement('div');
                    userItem.className = 'room-item';
                    userItem.innerHTML = `
                        <div class="room-avatar">${user.avatar}</div>
                        <div class="room-info">
                            <div class="room-name">${user.name}</div>
                            <div class="room-members">
                                <i class="fas fa-circle" style="color: #00ff00; font-size: 8px;"></i> ${user.status}
                            </div>
                        </div>
                    `;
                    listContainer.appendChild(userItem);
                });
            }

            // â¬‡â¬‡â¬‡ Ø¯Ø§Ù„Ø© ÙØªØ­/Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„ØºØ±Ù â¬‡â¬‡â¬‡
            function toggleRoomsSidebar() {
                const sidebar = document.getElementById('roomsSidebar');
                const onlineSidebar = document.getElementById('onlineUsersSidebar');

                if (onlineSidebar && onlineSidebar.classList.contains('active')) {
                    onlineSidebar.classList.remove('active');
                }

                if (sidebar) {
                    sidebar.classList.toggle('active');
                }
            }
            // â¬†â¬†â¬† Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¯ÙˆØ§Ù„ â¬†â¬†â¬†
            </script>
    
            <!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
            <div id="mainMenuModal" class="modal">
                <div class="modal-content main-menu">
                    <div class="modal-header">
                        <h2>Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h2>
                        <button class="close-btn" onclick="closeMainMenu()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="menu-items">
                        <div class="menu-item" onclick="openNewsSection()">
                            <i class="fas fa-newspaper"></i>
                            <span>Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</span>
                            <p>Ø§Ù†Ø´Ø± Ø§Ù„Ø£Ø®Ø¨Ø§Ø± ÙˆØ§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª</p>
                        </div>
                        <div class="menu-item" onclick="openStoriesSection()">
                            <i class="fas fa-images"></i>
                            <span>Ø§Ù„Ù‚ØµØµ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</span>
                            <p>Ø´Ø§Ø±Ùƒ Ù‚ØµØªÙƒ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</p>
                        </div>
                        <!-- â¬‡â¬‡â¬‡ Ø§Ù„Ø²Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ø§Ù„Ø°ÙŠ Ø·Ù„Ø¨ØªÙÙ‡ â¬‡â¬‡â¬‡ -->
                        <div class="menu-item" onclick="openAppStore()">
                            <i class="fas fa-store"></i>
                            <span>Ù…ØªØ¬Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</span>
                            <p>Ø§Ø´ØªØ±ÙŠ Ø§Ù„Ø¥Ø·Ø§Ø±Ø§Øª ÙˆØ§Ù„Ø²Ø®Ø§Ø±Ù Ø¨Ø§Ù„Ù†Ù‚Ø§Ø·</p>
                        </div>
                        <!-- â¬†â¬†â¬† Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø²Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯ â¬†â¬†â¬† -->
                        <div class="menu-item" onclick="openSendNotificationModal()">
                            <i class="fas fa-bell"></i>
                            <span>Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø±</span>
                            <p>Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ø£ÙŠ Ø´Ø®Øµ</p>
                        </div>
                        <div class="menu-item" onclick="openOnlineUsersModal()">
                            <i class="fas fa-users"></i>
                            <span>Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† Ø­Ø§Ù„ÙŠØ§Ù‹</span>
                            <p>Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†</p>
                        </div>
                        <!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
                        <div class="menu">
                          <!-- Ø²Ø± Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
                          <div class="menu-item" onclick="toggleGamesMenu()">
                            <i class="fas fa-gamepad"></i>
                            <span>ğŸ® Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</span>
                            <p>Ø§Ù„Ø¹Ø¨ Ù…Ø¹ Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡</p>
                          </div>

                          <!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙØ±Ø¹ÙŠØ© (ØªØ¸Ù‡Ø± Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨") -->
                          <div id="gamesMenu" class="submenu hidden">
                            <button class="game-btn xo" onclick="openXOGame()">
                              <span class="icon">âŒâ­•</span>
                              <span class="title">Ù„Ø¹Ø¨Ø© XO</span>
                            </button>

                            <button class="game-btn bubble" onclick="openBubbleShooter()">
                              <span class="icon">ğŸ¯ğŸ”´</span>
                              <span class="title">Bubble Shooter</span>
                            </button>

                            <button class="game-btn chess" onclick="openChessGame()">
                              <span class="icon">â™Ÿï¸ğŸ‘‘</span>
                              <span class="title">Ø§Ù„Ø´Ø·Ø±Ù†Ø¬</span>
                            </button>

                            <button class="game-btn words" onclick="openKelmatKarash()">
                              <span class="icon">ğŸ§©</span>
                              <span class="title">ÙƒÙ„Ù…Ø§Øª ÙƒØ±Ø§Ø´</span>
                            </button>

                            <button class="game-btn dice" onclick="startDiceGame()">
                              <span class="icon">ğŸ²</span>
                              <span class="title">Ù„Ø¹Ø¨Ø© Ø§Ù„Ø±Ù†Ø¯</span>
                            </button>
                          </div>
                        </div>

                        <style>
                        /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ù‡ Ø§Ù„Ø¹Ø§Ù…Ø© */
                        .menu {
                          display: flex;
                          flex-direction: column;
                          align-items: center;
                          gap: 15px;
                          font-family: "Cairo", sans-serif;
                        }

                        /* Ø§Ù„Ø²Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ (Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨) */
                        .menu-item {
                          width: 200px;
                          background: linear-gradient(45deg, #6a11cb, #2575fc);
                          padding: 15px;
                          border-radius: 15px;
                          color: white;
                          text-align: center;
                          cursor: pointer;
                          box-shadow: 0 4px 10px rgba(0,0,0,0.2);
                          transition: 0.3s;
                        }
                        .menu-item:hover {
                          transform: scale(1.05);
                          box-shadow: 0 6px 14px rgba(0,0,0,0.3);
                        }

                        /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙØ±Ø¹ÙŠØ© */
                        .submenu {
                          display: flex;
                          flex-wrap: wrap;
                          justify-content: center;
                          gap: 10px;
                          transition: all 0.3s ease-in-out;
                        }
                        .hidden {
                          display: none;
                        }

                        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ */
                        .game-btn {
                          display: flex;
                          flex-direction: column;
                          align-items: center;
                          justify-content: center;
                          width: 110px;
                          height: 110px;
                          border: none;
                          border-radius: 15px;
                          color: white;
                          font-weight: bold;
                          cursor: pointer;
                          transition: 0.3s;
                          box-shadow: 0 4px 10px rgba(0,0,0,0.2);
                          background-size: 200% 200%;
                          animation: moveGradient 5s ease infinite;
                        }
                        .game-btn:hover {
                          transform: translateY(-5px);
                        }

                        /* Ø£Ù„ÙˆØ§Ù† Ù…ØªØ­Ø±ÙƒØ© Ù„ÙƒÙ„ Ù„Ø¹Ø¨Ø© */
                        .xo { background: linear-gradient(-45deg, #ff416c, #ff4b2b, #ff416c); }
                        .bubble { background: linear-gradient(-45deg, #00c6ff, #0072ff, #00c6ff); }
                        .chess { background: linear-gradient(-45deg, #8e2de2, #4a00e0, #8e2de2); }
                        .words { background: linear-gradient(-45deg, #f7971e, #ffd200, #f7971e); }
                        .dice { background: linear-gradient(-45deg, #11998e, #38ef7d, #11998e); }

                        /* Ø­Ø±ÙƒØ© Ø§Ù„Ø®Ù„ÙÙŠØ© */
                        @keyframes moveGradient {
                          0% { background-position: 0% 50%; }
                          50% { background-position: 100% 50%; }
                          100% { background-position: 0% 50%; }
                        }

                        .icon {
                          font-size: 2em;
                          margin-bottom: 5px;
                        }
                        .title {
                          font-size: 0.9em;
                        }
                        </style>

                        <script>
                        function toggleGamesMenu() {
                          document.getElementById('gamesMenu').classList.toggle('hidden');
                        }
                        </script>

                        <div class="menu-item" onclick="openQuizRoom()">
                            <i class="fas fa-question-circle"></i>
                            <span>ØºØ±ÙØ© Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª</span>
                            <p>Ø§Ø®ØªØ¨Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ ÙˆØ§Ø±Ø¨Ø­ Ø§Ù„Ù†Ù‚Ø§Ø·</p>
                        </div>
                        <div class="menu-item" onclick="openRoomsManager()" id="roomsManagerBtn" style="display: none;">
                            <i class="fas fa-door-open"></i>
                            <span>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØºØ±Ù</span>
                            <p>Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø§Ù„ØºØ±Ù</p>
                        </div>
                        <div class="menu-item" onclick="openCoinsShop()">
                            <i class="fas fa-coins"></i>
                            <span>Ù…ØªØ¬Ø± Ø§Ù„Ù†Ù‚Ø§Ø·</span>
                            <p>Ø§Ø´ØªØ±ÙŠ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø¨Ø§Ù„Ù†Ù‚Ø§Ø·</p>
                        </div>
                        <div class="menu-item" onclick="openAdminPanel()" id="adminPanelBtn" style="display: none;">
                            <i class="fas fa-crown"></i>
                            <span>Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</span>
                            <p>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØ§Ù„Ù†Ø¸Ø§Ù…</p>
                        </div>

                        <!-- ğŸ¯ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ù…ÙŠØ²Ø© - Ø¬Ø¯ÙŠØ¯ -->
                        <div class="menu-item" onclick="openSpecialMessageBox()">
                            <i class="fas fa-paint-brush"></i>
                            <span>Ø±Ø³Ø§Ù„Ø© Ù…Ù…ÙŠØ²Ø©</span>
                            <p>Ø£Ø±Ø³Ù„ Ø±Ø³Ø§Ù„Ø© Ø¨Ù„ÙˆÙ† Ù…Ø®ØµØµ Ù„Ù„ØºØ±ÙØ©</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ù…ÙŠØ²Ø© -->
            <div id="specialMessageModal" class="modal">
                <div class="modal-content special-message-box">
                    <div class="modal-header">
                        <h2>Ø±Ø³Ø§Ù„Ø© Ù…Ù…ÙŠØ²Ø©</h2>
                        <button class="close-btn" onclick="closeSpecialMessageBox()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="color-picker-container">
                        <div class="color-grid" id="colorGrid">
                            <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø¨ÙˆØ§Ø³Ø·Ø© JS Ø£Ùˆ ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØªÙ‡Ø§ ÙŠØ¯ÙˆÙŠÙ‹Ø§ -->
                        </div>
                        <div class="nav-buttons">
                            <button onclick="prevPage()"><i class="fas fa-chevron-left"></i></button>
                            <button onclick="nextPage()"><i class="fas fa-chevron-right"></i></button>
                        </div>
                    </div>
                    <div class="message-input-container">
                        <textarea id="specialMessageInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..."></textarea>
                        <button onclick="sendSpecialMessage()">Ø¥Ø±Ø³Ø§Ù„</button>
                    </div>
                </div>
            </div>
            <!-- Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ -->
            <div id="profileModal" class="modal">
                <div class="modal-content profile-modal">
                    <div class="modal-header">
                        <h2>Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</h2>
                        <div class="header-actions">
                            <button class="menu-btn" onclick="toggleProfileMenu()">
                                <i class="fas fa-bars"></i>
                            </button>
                            <button class="close-btn" onclick="closeProfileModal()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                    <!-- Ù‚Ø§Ø¦Ù…Ø© Ù…Ù†Ø³Ø¯Ù„Ø© ØµØºÙŠØ±Ø© -->
                    <div id="profileMenuDropdown" class="profile-menu-dropdown">
                        <div class="menu-item" onclick="menuAction('private')">
                            <i class="fas fa-comment"></i>
                            <span>Private</span>
                        </div>
                        <div class="menu-item" onclick="menuAction('remove')">
                            <i class="fas fa-user-minus"></i>
                            <span>Remove friend</span>
                        </div>
                        <div class="menu-item" onclick="menuAction('gift')">
                            <i class="fas fa-gift"></i>
                            <span>Send gift</span>
                        </div>
                        <div class="menu-item" onclick="menuAction('wallet')">
                            <i class="fas fa-wallet"></i>
                            <span>Share wallet</span>
                        </div>
                        <div class="menu-item" onclick="menuAction('ignore')">
                            <i class="fas fa-ban"></i>
                            <span>Ignore</span>
                        </div>
                    </div>
                    <div class="profile-content">
                        <div class="profile-cover">
                            <img id="profileCover" src="https://images.pexels.com/photos/1323550/pexels-photo-1323550.jpeg?auto=compress&cs=tinysrgb&w=800&h=300&fit=crop" alt="Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„">
                            <input type="file" id="coverInput" accept="image/*" style="display: none;">
                            <button class="change-cover-btn" onclick="document.getElementById('coverInput').click()">
                                <i class="fas fa-camera"></i>
                                ØªØºÙŠÙŠØ± Ø§Ù„Ø®Ù„ÙÙŠØ©
                            </button>
                        </div>
                        <div class="profile-info">
                            <div class="profile-avatar-section">
                                <div class="profile-avatars">
                                    <div class="avatar-slot">
                                        <img id="profileImg1" src="https://images.pexels.com/photos/771742/pexels-photo-771742.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop" alt="ØµÙˆØ±Ø© 1">
                                        <input type="file" id="profileFile1" accept="image/*" style="display: none;">
                                        <button onclick="document.getElementById('profileFile1').click()">
                                            <i class="fas fa-camera"></i>
                                        </button>
                                    </div>
                                    <div class="avatar-slot">
                                        <img id="profileImg2" src="https://images.pexels.com/photos/1040880/pexels-photo-1040880.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop" alt="ØµÙˆØ±Ø© 2">
                                        <input type="file" id="profileFile2" accept="image/*" style="display: none;">
                                        <button onclick="document.getElementById('profileFile2').click()">
                                            <i class="fas fa-camera"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="profile-stats">
                                    <div class="stat-item">
                                        <span class="stat-number" id="profileLikes">0</span>
                                        <span class="stat-label">Ø¥Ø¹Ø¬Ø§Ø¨</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-number" id="profileCoins">2000</span>
                                        <span class="stat-label">Ù†Ù‚Ø·Ø©</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-number" id="profileRank">Ø²Ø§Ø¦Ø±</span>
                                        <span class="stat-label">Ø§Ù„Ø±ØªØ¨Ø©</span>
                                    </div>
                                </div>
                            </div>
                            <div class="profile-details">
                                <div class="profile-tabs">
                                    <button class="tab-btn active" onclick="showProfileTab('info')">
                                        <i class="fas fa-info-circle"></i>
                                        Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª
                                    </button>
                                    <button class="tab-btn" onclick="showProfileTab('settings')">
                                        <i class="fas fa-cog"></i>
                                        Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                                    </button>
                                    <button class="tab-btn" onclick="showProfileTab('music')">
                                        <i class="fas fa-music"></i>
                                        Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰
                                    </button>
                                    <button class="tab-btn" onclick="showProfileTab('decorations')">
                                        <i class="fas fa-palette"></i>
                                        Ø§Ù„Ø²Ø®Ø§Ø±Ù
                                    </button>
                                </div>
                                <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª -->
                                <div id="profileInfoTab" class="profile-tab active">
                                    <div class="info-section">
                                        <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶:</label>
                                        <input type="text" id="displayNameInput" placeholder="Ø§Ø³Ù…Ùƒ Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶">
                                    </div>
                                    <div class="info-section">
                                        <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</label>
                                        <input type="email" id="emailInput" placeholder="Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
                                    </div>
                                    <div class="info-section">
                                        <label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:</label>
                                        <input type="password" id="newPasswordInput" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©">
                                    </div>
                                    <div class="info-section">
                                        <label>Ø§Ù„Ø¹Ù…Ø±:</label>
                                        <input type="number" id="ageInput" min="13" max="100">
                                    </div>
                                    <div class="info-section">
                                        <label>Ø§Ù„Ø¬Ù†Ø³:</label>
                                        <select id="genderInput">
                                            <option value="">ØºÙŠØ± Ù…Ø­Ø¯Ø¯</option>
                                            <option value="Ø°ÙƒØ±">Ø°ÙƒØ±</option>
                                            <option value="Ø£Ù†Ø«Ù‰">Ø£Ù†Ø«Ù‰</option>
                                        </select>
                                    </div>
                                    <div class="info-section">
                                        <label>Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©:</label>
                                        <select id="maritalStatusInput">
                                            <option value="">ØºÙŠØ± Ù…Ø­Ø¯Ø¯</option>
                                            <option value="Ø£Ø¹Ø²Ø¨">Ø£Ø¹Ø²Ø¨</option>
                                            <option value="Ù…Ø±ØªØ¨Ø·">Ù…Ø±ØªØ¨Ø·</option>
                                            <option value="Ù…ØªØ²ÙˆØ¬">Ù…ØªØ²ÙˆØ¬</option>
                                        </select>
                                    </div>
                                    <div class="info-section">
                                        <label>Ù†Ø¨Ø°Ø© Ø¹Ù†ÙŠ:</label>
                                        <textarea id="aboutMeInput" placeholder="Ø§ÙƒØªØ¨ Ø´ÙŠØ¦Ø§Ù‹ Ø¹Ù† Ù†ÙØ³Ùƒ..."></textarea>
                                    </div>
                                    <button onclick="updateProfile()" class="btn save-btn">
                                        <i class="fas fa-save"></i>
                                        Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
                                    </button>
                                </div>
                                <div class="settings-section">
                                        <h4>Ù„ÙˆÙ† Ø§Ù„Ø§Ø³Ù…</h4>
                                        <input type="color" id="nameColorPicker" value="#ffffff">
                                        <button onclick="updateNameColor()" class="btn">ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù„ÙˆÙ†</button>
                                    </div>
                                    <div class="settings-section">
                                        <h4>Ù„ÙˆÙ† Ø§Ù„Ø®Ø·</h4>
                                        <input type="color" id="fontColorPicker" value="#000000">
                                        <button onclick="updateFontColor()" class="btn">ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù„ÙˆÙ†</button>
                                    </div>
                                    <div class="settings-section">
                                        <h4>Ø®Ù„ÙÙŠØ© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</h4>
                                        <input type="file" id="messageBackgroundInput" accept="image/*">
                                        <button onclick="uploadMessageBackground()" class="btn">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®Ù„ÙÙŠØ©</button>
                                    </div>
                                </div>
                                <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
                                <div id="profileSettingsTab" class="profile-tab">
                                    <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙˆØ§Ù„Ø¯ÙˆÙ„Ø© -->
                                    <div class="settings-section location-settings">
                                        <h4><i class="fas fa-globe"></i> Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙˆØ§Ù„Ø¯ÙˆÙ„Ø©</h4>

                                        <div class="location-info-box">
                                            <div class="current-location">
                                                <h5>Ù…ÙˆÙ‚Ø¹Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ:</h5>
                                                <div class="location-details">
                                                    <p><strong>ğŸŒ Ø§Ù„Ø¯ÙˆÙ„Ø©:</strong> <span id="currentCountry">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</span></p>
                                                    <p><strong>ğŸ™ï¸ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©:</strong> <span id="currentCity">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</span></p>
                                                    <p><strong>ğŸ“ IP:</strong> <span id="currentIP">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</span></p>
                                                    <p><strong>ğŸ• Ø§Ù„ØªÙˆÙ‚ÙŠØª Ø§Ù„Ù…Ø­Ù„ÙŠ:</strong> <span id="currentTime">--:--:--</span></p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="country-selector">
                                            <label>Ø§Ø®ØªØ± Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯ Ø¹Ø±Ø¶Ù‡Ø§ ÙÙŠ Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„:</label>
                                            <select id="countrySelect" onchange="updateSelectedCountry()">
                                                <option value="auto">ğŸ”„ ØªØ­Ø¯ÙŠØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠ (Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…ÙˆÙ‚Ø¹Ùƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ)</option>
                                                <optgroup label="ğŸŒ Ø§Ù„Ø¯ÙˆÙ„ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©">
                                                    <option value="Ù…ØµØ±">ğŸ‡ªğŸ‡¬ Ù…ØµØ±</option>
                                                    <option value="Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</option>
                                                    <option value="Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª">ğŸ‡¦ğŸ‡ª Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª</option>
                                                    <option value="Ø§Ù„Ø£Ø±Ø¯Ù†">ğŸ‡¯ğŸ‡´ Ø§Ù„Ø£Ø±Ø¯Ù†</option>
                                                    <option value="Ø§Ù„Ø¹Ø±Ø§Ù‚">ğŸ‡®ğŸ‡¶ Ø§Ù„Ø¹Ø±Ø§Ù‚</option>
                                                    <option value="Ø³ÙˆØ±ÙŠØ§">ğŸ‡¸ğŸ‡¾ Ø³ÙˆØ±ÙŠØ§</option>
                                                    <option value="Ù„Ø¨Ù†Ø§Ù†">ğŸ‡±ğŸ‡§ Ù„Ø¨Ù†Ø§Ù†</option>
                                                    <option value="Ø§Ù„Ù…ØºØ±Ø¨">ğŸ‡²ğŸ‡¦ Ø§Ù„Ù…ØºØ±Ø¨</option>
                                                    <option value="Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±">ğŸ‡©ğŸ‡¿ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±</option>
                                                    <option value="ØªÙˆÙ†Ø³">ğŸ‡¹ğŸ‡³ ØªÙˆÙ†Ø³</option>
                                                    <option value="ÙÙ„Ø³Ø·ÙŠÙ†">ğŸ‡µğŸ‡¸ ÙÙ„Ø³Ø·ÙŠÙ†</option>
                                                    <option value="Ø§Ù„ÙŠÙ…Ù†">ğŸ‡¾ğŸ‡ª Ø§Ù„ÙŠÙ…Ù†</option>
                                                    <option value="Ø§Ù„ÙƒÙˆÙŠØª">ğŸ‡°ğŸ‡¼ Ø§Ù„ÙƒÙˆÙŠØª</option>
                                                    <option value="Ù‚Ø·Ø±">ğŸ‡¶ğŸ‡¦ Ù‚Ø·Ø±</option>
                                                    <option value="Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†">ğŸ‡§ğŸ‡­ Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†</option>
                                                    <option value="Ø¹Ù…Ø§Ù†">ğŸ‡´ğŸ‡² Ø¹Ù…Ø§Ù†</option>
                                                    <option value="Ù„ÙŠØ¨ÙŠØ§">ğŸ‡±ğŸ‡¾ Ù„ÙŠØ¨ÙŠØ§</option>
                                                    <option value="Ø§Ù„Ø³ÙˆØ¯Ø§Ù†">ğŸ‡¸ğŸ‡© Ø§Ù„Ø³ÙˆØ¯Ø§Ù†</option>
                                                    <option value="Ø§Ù„ØµÙˆÙ…Ø§Ù„">ğŸ‡¸ğŸ‡´ Ø§Ù„ØµÙˆÙ…Ø§Ù„</option>
                                                    <option value="Ø¬ÙŠØ¨ÙˆØªÙŠ">ğŸ‡©ğŸ‡¯ Ø¬ÙŠØ¨ÙˆØªÙŠ</option>
                                                    <option value="Ù…ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§">ğŸ‡²ğŸ‡· Ù…ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§</option>
                                                    <option value="Ø¬Ø²Ø± Ø§Ù„Ù‚Ù…Ø±">ğŸ‡°ğŸ‡² Ø¬Ø²Ø± Ø§Ù„Ù‚Ù…Ø±</option>
                                                </optgroup>
                                                <optgroup label="ğŸŒ Ø£Ù…Ø±ÙŠÙƒØ§ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©">
                                                    <option value="Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª Ø§Ù„Ù…ØªØ­Ø¯Ø©">ğŸ‡ºğŸ‡¸ Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª Ø§Ù„Ù…ØªØ­Ø¯Ø©</option>
                                                    <option value="ÙƒÙ†Ø¯Ø§">ğŸ‡¨ğŸ‡¦ ÙƒÙ†Ø¯Ø§</option>
                                                    <option value="Ø§Ù„Ù…ÙƒØ³ÙŠÙƒ">ğŸ‡²ğŸ‡½ Ø§Ù„Ù…ÙƒØ³ÙŠÙƒ</option>
                                                </optgroup>
                                                <optgroup label="ğŸŒ Ø£Ù…Ø±ÙŠÙƒØ§ Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©">
                                                    <option value="Ø§Ù„Ø¨Ø±Ø§Ø²ÙŠÙ„">ğŸ‡§ğŸ‡· Ø§Ù„Ø¨Ø±Ø§Ø²ÙŠÙ„</option>
                                                    <option value="Ø§Ù„Ø£Ø±Ø¬Ù†ØªÙŠÙ†">ğŸ‡¦ğŸ‡· Ø§Ù„Ø£Ø±Ø¬Ù†ØªÙŠÙ†</option>
                                                    <option value="ØªØ´ÙŠÙ„ÙŠ">ğŸ‡¨ğŸ‡± ØªØ´ÙŠÙ„ÙŠ</option>
                                                    <option value="ÙƒÙˆÙ„ÙˆÙ…Ø¨ÙŠØ§">ğŸ‡¨ğŸ‡´ ÙƒÙˆÙ„ÙˆÙ…Ø¨ÙŠØ§</option>
                                                    <option value="Ø¨ÙŠØ±Ùˆ">ğŸ‡µğŸ‡ª Ø¨ÙŠØ±Ùˆ</option>
                                                    <option value="ÙÙ†Ø²ÙˆÙŠÙ„Ø§">ğŸ‡»ğŸ‡ª ÙÙ†Ø²ÙˆÙŠÙ„Ø§</option>
                                                </optgroup>
                                                <optgroup label="ğŸŒ Ø£ÙˆØ±ÙˆØ¨Ø§">
                                                    <option value="Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ù…ØªØ­Ø¯Ø©">ğŸ‡¬ğŸ‡§ Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ù…ØªØ­Ø¯Ø©</option>
                                                    <option value="Ø£Ù„Ù…Ø§Ù†ÙŠØ§">ğŸ‡©ğŸ‡ª Ø£Ù„Ù…Ø§Ù†ÙŠØ§</option>
                                                    <option value="ÙØ±Ù†Ø³Ø§">ğŸ‡«ğŸ‡· ÙØ±Ù†Ø³Ø§</option>
                                                    <option value="Ø¥ÙŠØ·Ø§Ù„ÙŠØ§">ğŸ‡®ğŸ‡¹ Ø¥ÙŠØ·Ø§Ù„ÙŠØ§</option>
                                                    <option value="Ø¥Ø³Ø¨Ø§Ù†ÙŠØ§">ğŸ‡ªğŸ‡¸ Ø¥Ø³Ø¨Ø§Ù†ÙŠØ§</option>
                                                    <option value="Ø§Ù„Ø¨Ø±ØªØºØ§Ù„">ğŸ‡µğŸ‡¹ Ø§Ù„Ø¨Ø±ØªØºØ§Ù„</option>
                                                    <option value="Ù‡ÙˆÙ„Ù†Ø¯Ø§">ğŸ‡³ğŸ‡± Ù‡ÙˆÙ„Ù†Ø¯Ø§</option>
                                                    <option value="Ø¨Ù„Ø¬ÙŠÙƒØ§">ğŸ‡§ğŸ‡ª Ø¨Ù„Ø¬ÙŠÙƒØ§</option>
                                                    <option value="Ø³ÙˆÙŠØ³Ø±Ø§">ğŸ‡¨ğŸ‡­ Ø³ÙˆÙŠØ³Ø±Ø§</option>
                                                    <option value="Ø§Ù„Ù†Ù…Ø³Ø§">ğŸ‡¦ğŸ‡¹ Ø§Ù„Ù†Ù…Ø³Ø§</option>
                                                    <option value="Ø§Ù„Ø³ÙˆÙŠØ¯">ğŸ‡¸ğŸ‡ª Ø§Ù„Ø³ÙˆÙŠØ¯</option>
                                                    <option value="Ø§Ù„Ù†Ø±ÙˆÙŠØ¬">ğŸ‡³ğŸ‡´ Ø§Ù„Ù†Ø±ÙˆÙŠØ¬</option>
                                                    <option value="Ø§Ù„Ø¯Ù†Ù…Ø§Ø±Ùƒ">ğŸ‡©ğŸ‡° Ø§Ù„Ø¯Ù†Ù…Ø§Ø±Ùƒ</option>
                                                    <option value="ÙÙ†Ù„Ù†Ø¯Ø§">ğŸ‡«ğŸ‡® ÙÙ†Ù„Ù†Ø¯Ø§</option>
                                                    <option value="Ø¨ÙˆÙ„Ù†Ø¯Ø§">ğŸ‡µğŸ‡± Ø¨ÙˆÙ„Ù†Ø¯Ø§</option>
                                                    <option value="Ø£ÙˆÙƒØ±Ø§Ù†ÙŠØ§">ğŸ‡ºğŸ‡¦ Ø£ÙˆÙƒØ±Ø§Ù†ÙŠØ§</option>
                                                    <option value="Ø±ÙˆØ³ÙŠØ§">ğŸ‡·ğŸ‡º Ø±ÙˆØ³ÙŠØ§</option>
                                                    <option value="ØªØ±ÙƒÙŠØ§">ğŸ‡¹ğŸ‡· ØªØ±ÙƒÙŠØ§</option>
                                                    <option value="Ø§Ù„ÙŠÙˆÙ†Ø§Ù†">ğŸ‡¬ğŸ‡· Ø§Ù„ÙŠÙˆÙ†Ø§Ù†</option>
                                                    <option value="Ø±ÙˆÙ…Ø§Ù†ÙŠØ§">ğŸ‡·ğŸ‡´ Ø±ÙˆÙ…Ø§Ù†ÙŠØ§</option>
                                                    <option value="Ø§Ù„ØªØ´ÙŠÙƒ">ğŸ‡¨ğŸ‡¿ Ø§Ù„ØªØ´ÙŠÙƒ</option>
                                                    <option value="Ø§Ù„Ù…Ø¬Ø±">ğŸ‡­ğŸ‡º Ø§Ù„Ù…Ø¬Ø±</option>
                                                </optgroup>
                                                <optgroup label="ğŸŒ Ø¢Ø³ÙŠØ§">
                                                    <option value="Ø§Ù„ØµÙŠÙ†">ğŸ‡¨ğŸ‡³ Ø§Ù„ØµÙŠÙ†</option>
                                                    <option value="Ø§Ù„ÙŠØ§Ø¨Ø§Ù†">ğŸ‡¯ğŸ‡µ Ø§Ù„ÙŠØ§Ø¨Ø§Ù†</option>
                                                    <option value="ÙƒÙˆØ±ÙŠØ§ Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©">ğŸ‡°ğŸ‡· ÙƒÙˆØ±ÙŠØ§ Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©</option>
                                                    <option value="ÙƒÙˆØ±ÙŠØ§ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©">ğŸ‡°ğŸ‡µ ÙƒÙˆØ±ÙŠØ§ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©</option>
                                                    <option value="Ø§Ù„Ù‡Ù†Ø¯">ğŸ‡®ğŸ‡³ Ø§Ù„Ù‡Ù†Ø¯</option>
                                                    <option value="Ø¨Ø§ÙƒØ³ØªØ§Ù†">ğŸ‡µğŸ‡° Ø¨Ø§ÙƒØ³ØªØ§Ù†</option>
                                                    <option value="Ø¨Ù†ØºÙ„Ø§Ø¯ÙŠØ´">ğŸ‡§ğŸ‡© Ø¨Ù†ØºÙ„Ø§Ø¯ÙŠØ´</option>
                                                    <option value="Ø¥Ù†Ø¯ÙˆÙ†ÙŠØ³ÙŠØ§">ğŸ‡®ğŸ‡© Ø¥Ù†Ø¯ÙˆÙ†ÙŠØ³ÙŠØ§</option>
                                                    <option value="Ù…Ø§Ù„ÙŠØ²ÙŠØ§">ğŸ‡²ğŸ‡¾ Ù…Ø§Ù„ÙŠØ²ÙŠØ§</option>
                                                    <option value="ØªØ§ÙŠÙ„Ø§Ù†Ø¯">ğŸ‡¹ğŸ‡­ ØªØ§ÙŠÙ„Ø§Ù†Ø¯</option>
                                                    <option value="ÙÙŠØªÙ†Ø§Ù…">ğŸ‡»ğŸ‡³ ÙÙŠØªÙ†Ø§Ù…</option>
                                                    <option value="Ø§Ù„ÙÙ„Ø¨ÙŠÙ†">ğŸ‡µğŸ‡­ Ø§Ù„ÙÙ„Ø¨ÙŠÙ†</option>
                                                    <option value="Ø³Ù†ØºØ§ÙÙˆØ±Ø©">ğŸ‡¸ğŸ‡¬ Ø³Ù†ØºØ§ÙÙˆØ±Ø©</option>
                                                    <option value="Ø£ÙØºØ§Ù†Ø³ØªØ§Ù†">ğŸ‡¦ğŸ‡« Ø£ÙØºØ§Ù†Ø³ØªØ§Ù†</option>
                                                    <option value="Ø¥ÙŠØ±Ø§Ù†">ğŸ‡®ğŸ‡· Ø¥ÙŠØ±Ø§Ù†</option>
                                                    <option value="Ø£Ø°Ø±Ø¨ÙŠØ¬Ø§Ù†">ğŸ‡¦ğŸ‡¿ Ø£Ø°Ø±Ø¨ÙŠØ¬Ø§Ù†</option>
                                                    <option value="ÙƒØ§Ø²Ø§Ø®Ø³ØªØ§Ù†">ğŸ‡°ğŸ‡¿ ÙƒØ§Ø²Ø§Ø®Ø³ØªØ§Ù†</option>
                                                    <option value="Ø£ÙˆØ²Ø¨ÙƒØ³ØªØ§Ù†">ğŸ‡ºğŸ‡¿ Ø£ÙˆØ²Ø¨ÙƒØ³ØªØ§Ù†</option>
                                                </optgroup>
                                                <optgroup label="ğŸŒ Ø£ÙØ±ÙŠÙ‚ÙŠØ§">
                                                    <option value="Ù†ÙŠØ¬ÙŠØ±ÙŠØ§">ğŸ‡³ğŸ‡¬ Ù†ÙŠØ¬ÙŠØ±ÙŠØ§</option>
                                                    <option value="Ø¥Ø«ÙŠÙˆØ¨ÙŠØ§">ğŸ‡ªğŸ‡¹ Ø¥Ø«ÙŠÙˆØ¨ÙŠØ§</option>
                                                    <option value="ÙƒÙŠÙ†ÙŠØ§">ğŸ‡°ğŸ‡ª ÙƒÙŠÙ†ÙŠØ§</option>
                                                    <option value="Ø¬Ù†ÙˆØ¨ Ø£ÙØ±ÙŠÙ‚ÙŠØ§">ğŸ‡¿ğŸ‡¦ Ø¬Ù†ÙˆØ¨ Ø£ÙØ±ÙŠÙ‚ÙŠØ§</option>
                                                    <option value="ØºØ§Ù†Ø§">ğŸ‡¬ğŸ‡­ ØºØ§Ù†Ø§</option>
                                                    <option value="ØªÙ†Ø²Ø§Ù†ÙŠØ§">ğŸ‡¹ğŸ‡¿ ØªÙ†Ø²Ø§Ù†ÙŠØ§</option>
                                                    <option value="Ø£ÙˆØºÙ†Ø¯Ø§">ğŸ‡ºğŸ‡¬ Ø£ÙˆØºÙ†Ø¯Ø§</option>
                                                    <option value="Ø§Ù„ÙƒØ§Ù…ÙŠØ±ÙˆÙ†">ğŸ‡¨ğŸ‡² Ø§Ù„ÙƒØ§Ù…ÙŠØ±ÙˆÙ†</option>
                                                    <option value="ÙƒÙˆØª Ø¯ÙŠÙÙˆØ§Ø±">ğŸ‡¨ğŸ‡® ÙƒÙˆØª Ø¯ÙŠÙÙˆØ§Ø±</option>
                                                    <option value="Ø§Ù„Ø³Ù†ØºØ§Ù„">ğŸ‡¸ğŸ‡³ Ø§Ù„Ø³Ù†ØºØ§Ù„</option>
                                                </optgroup>
                                                <optgroup label="ğŸŒ Ø£ÙˆÙ‚ÙŠØ§Ù†ÙˆØ³ÙŠØ§">
                                                    <option value="Ø£Ø³ØªØ±Ø§Ù„ÙŠØ§">ğŸ‡¦ğŸ‡º Ø£Ø³ØªØ±Ø§Ù„ÙŠØ§</option>
                                                    <option value="Ù†ÙŠÙˆØ²ÙŠÙ„Ù†Ø¯Ø§">ğŸ‡³ğŸ‡¿ Ù†ÙŠÙˆØ²ÙŠÙ„Ù†Ø¯Ø§</option>
                                                </optgroup>
                                            </select>
                                            <p class="note">ğŸ’¡ ÙŠÙ…ÙƒÙ†Ùƒ ØªØºÙŠÙŠØ± Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø© Ø­ØªÙ‰ Ù„Ùˆ ÙƒÙ†Øª ÙÙŠ Ø¯ÙˆÙ„Ø© Ø£Ø®Ø±Ù‰</p>
                                        </div>

                                        <button onclick="detectLocation()" class="btn detect-btn">
                                            <i class="fas fa-compass"></i>
                                            Ø§ÙƒØªØ´Ù Ù…ÙˆÙ‚Ø¹ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ
                                        </button>
                                    </div>
                                    <div class="menu-item" onclick="changePassword()">
                                        <i class="fas fa-lock"></i>
                                        <span>ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</span>
                                    </div>
                                    <div class="menu-item" onclick="changeEmail()">
                                        <i class="fas fa-envelope"></i>
                                        <span>ØªØºÙŠÙŠØ± Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</span>
                                    </div>
                                    
                                    <!-- Language Settings -->
                                    <div class="settings-section">
                                      <h4><i class="fas fa-language"></i> <span data-i18n="language">Ø§Ù„Ù„ØºØ©</span></h4>
                                      <select id="profileLanguageSelect" onchange="setLanguage(this.value)" style="width: 100%; padding: 10px; border-radius: 8px; margin-top: 8px; direction: ltr;">
                                        <option value="ar" data-i18n="arabic">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
                                        <option value="en" data-i18n="english">English</option>
                                      </select>
                                    </div>
                                    <div class="settings-section">
                                        <h4>Ù„ÙˆÙ† Ø§Ù„Ø§Ø³Ù…</h4>
                                        <input type="color" id="nameColorPicker" value="#ffffff">
                                        <button onclick="updateNameColor()" class="btn">ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù„ÙˆÙ†</button>
                                    </div>
                                    <div class="settings-section">
                                        <h4>Ù„ÙˆÙ† Ø§Ù„Ø®Ø·</h4>
                                        <input type="color" id="fontColorPicker" value="#000000">
                                        <button onclick="updateFontColor()" class="btn">ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù„ÙˆÙ†</button>
                                    </div>
                                    <div class="settings-section">
                                        <h4>Ø®Ù„ÙÙŠØ© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</h4>
                                        <input type="file" id="messageBackgroundInput" accept="image/*">
                                        <button onclick="uploadMessageBackground()" class="btn">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®Ù„ÙÙŠØ©</button>
                                    </div>
                                </div>
                                <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ -->
                                <div id="profileMusicTab" class="profile-tab">
                                    <div class="music-section">
                                        <h4>Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„</h4>
                                        <input type="file" id="profileMusicInput" accept="audio/*">
                                        <div id="currentMusic" class="current-music">
                                            <audio id="profileAudio" controls style="display: none;"></audio>
                                        </div>
                                        <button onclick="uploadProfileMusic()" class="btn">Ø±ÙØ¹ Ù…ÙˆØ³ÙŠÙ‚Ù‰</button>
                                        <button onclick="removeProfileMusic()" class="btn btn-danger">Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰</button>
                                        <p class="feature-note">Ù…ØªØ§Ø­ Ù„Ù„Ø±ØªØ¨ Ø§Ù„Ø¹Ø§Ù„ÙŠØ© ÙÙ‚Ø·</p>
                                    </div>
                                </div>
                                <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø²Ø®Ø§Ø±Ù -->
                                <div id="profileDecorationsTab" class="profile-tab">
                                    <div class="decorations-section">
                                        <h4>Ø²Ø®Ø±ÙØ© Ø§Ù„Ø§Ø³Ù…</h4>
                                        <select id="nameDecorationSelect">
                                            <option value="">Ø¨Ø¯ÙˆÙ† Ø²Ø®Ø±ÙØ©</option>
                                            <option value="fire">Ù†Ø§Ø± ğŸ”¥</option>
                                            <option value="star">Ù†Ø¬ÙˆÙ… â­</option>
                                            <option value="crown">ØªØ§Ø¬ ğŸ‘‘</option>
                                            <option value="diamond">Ù…Ø§Ø³ ğŸ’</option>
                                            <option value="rainbow">Ù‚ÙˆØ³ Ù‚Ø²Ø­ ğŸŒˆ</option>
                                        </select>
                                        <button onclick="updateNameDecoration()" class="btn">ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø²Ø®Ø±ÙØ©</button>
                                        <p class="feature-note">Ø¨Ø¹Ø¶ Ø§Ù„Ø²Ø®Ø§Ø±Ù Ù…ØªØ§Ø­Ø© Ù„Ù„Ø±ØªØ¨ Ø§Ù„Ø¹Ø§Ù„ÙŠØ© ÙÙ‚Ø·</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ù…ÙˆØ¯Ø§Ù„ Ø¹Ø±Ø¶ Ù…Ù„Ù Ø´Ø®ØµÙŠ Ø¢Ø®Ø± -->
            <div id="viewProfileModal" class="modal">
                <div class="modal-content profile-modal">
                    <div class="modal-header">
                        <h2 id="viewProfileName">Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</h2>
                        <button class="close-btn" onclick="closeViewProfileModal()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="profile-content">
                        <div class="profile-cover">
                            <img id="viewProfileCover" src="" alt="Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„">
                        </div>
                        <div class="profile-info">
                            <div class="profile-avatar-section">
                                <div class="profile-avatars">
                                    <div class="avatar-slot">
                                        <img id="viewProfileImg1" src="" alt="ØµÙˆØ±Ø© 1">
                                    </div>
                                    <div class="avatar-slot">
                                        <img id="viewProfileImg2" src="" alt="ØµÙˆØ±Ø© 2">
                                    </div>
                                </div>
                                <div class="profile-stats">
                                    <div class="stat-item">
                                        <span class="stat-number" id="viewProfileLikes">0</span>
                                        <span class="stat-label">Ø¥Ø¹Ø¬Ø§Ø¨</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-number" id="viewProfileCoins">0</span>
                                        <span class="stat-label">Ù†Ù‚Ø·Ø©</span>
                                    </div>
                                </div>
                                <div class="profile-actions">
                                    <button onclick="likeProfile()" class="btn like-btn">
                                        <i class="fas fa-heart"></i> Ø¥Ø¹Ø¬Ø§Ø¨
                                    </button>
                                    <button onclick="startPrivateChat()" class="btn message-btn">
                                        <i class="fas fa-envelope"></i> Ø±Ø³Ø§Ù„Ø©
                                    </button>
                                </div>
                            </div>
                            <div class="profile-details">
                                <div id="viewProfileInfo" class="profile-info-display">
                                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                                </div>
                                <div id="viewProfileMusic" class="profile-music-display">
                                    <!-- Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„ -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ù„Ù„Ù…Ø´Ø±Ù (njdj9985@gmail.com ÙÙ‚Ø·) -->
            <div id="adminPanel" class="modal">
                <div class="modal-content admin-modal">
                    <div class="modal-header">
                        <h2><i class="fas fa-user-shield"></i> Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h2>
                        <button class="close-btn" onclick="closeAdminPanel()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="admin-content">
                        <div class="admin-stats">
                            <div class="stat-card">
                                <i class="fas fa-users"></i>
                                <div>
                                    <h3 id="totalUsers">0</h3>
                                    <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <i class="fas fa-user-clock"></i>
                                <div>
                                    <h3 id="onlineUsers">0</h3>
                                    <p>Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† Ø§Ù„Ø¢Ù†</p>
                                </div>
                            </div>
                        </div>

                        <div class="users-table-container">
                            <h3><i class="fas fa-list"></i> Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†</h3>
                            <table class="users-table">
                                <thead>
                                    <tr>
                                        <th>Ø§Ù„Ø§Ø³Ù…</th>
                                        <th>Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø©</th>
                                        <th>Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©</th>
                                        <th>Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</th>
                                        <th>IP Address</th>
                                        <th>Ø§Ù„ØªÙˆÙ‚ÙŠØª Ø§Ù„Ù…Ø­Ù„ÙŠ</th>
                                        <th>ÙˆÙ‚Øª Ø§Ù„Ø¯Ø®ÙˆÙ„</th>
                                        <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                    </tr>
                                </thead>
                                <tbody id="usersTableBody">
                                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ø²Ø± Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… -->
            <button id="adminPanelBtn" class="admin-panel-btn" onclick="openAdminPanel()" style="display: none;">
                <i class="fas fa-user-shield"></i>
                <span>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</span>
            </button>

            <style>
            .header-actions {
                display: flex;
                gap: 10px;
                align-items: center;
                position: relative;
            }

            .menu-btn {
                background: none;
                border: none;
                color: #fff;
                cursor: pointer;
                padding: 8px;
                border-radius: 50%;
                transition: all 0.3s;
                width: 40px;
                height: 40px;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .menu-btn:hover {
                background: rgba(255, 255, 255, 0.1);
            }

            .menu-btn i {
                font-size: 24px;
            }

            .close-btn {
                background: rgba(255, 255, 255, 0.2);
                border: none;
                color: #fff;
                width: 40px;
                height: 40px;
                border-radius: 50%;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: all 0.3s;
            }

            .close-btn:hover {
                background: rgba(255, 255, 255, 0.3);
            }

            /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© Ø§Ù„ØµØºÙŠØ±Ø© */
            .profile-menu-dropdown {
                position: absolute;
                top: 50px;
                right: 50px;
                background: #fff;
                border-radius: 8px;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
                width: 200px;
                display: none;
                z-index: 1000;
                overflow: hidden;
            }

            .profile-menu-dropdown.active {
                display: block;
            }

            .menu-item {
                display: flex;
                align-items: center;
                gap: 12px;
                padding: 12px 15px;
                cursor: pointer;
                transition: all 0.3s;
                color: #333;
                border-bottom: 1px solid #f0f0f0;
            }

            .menu-item:last-child {
                border-bottom: none;
            }

            .menu-item:hover {
                background: #f5f5f5;
            }

            .menu-item i {
                font-size: 16px;
                width: 20px;
                color: #666;
            }

            .menu-item span {
                font-size: 14px;
                font-weight: 500;
            }

            /* Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ */
            .location-settings {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: #fff;
                padding: 25px;
                border-radius: 15px;
                margin-bottom: 20px;
            }

            .location-settings h4 {
                color: #fff;
                margin-top: 0;
            }

            .location-info-box {
                background: rgba(255, 255, 255, 0.15);
                padding: 20px;
                border-radius: 12px;
                margin: 20px 0;
                backdrop-filter: blur(10px);
            }

            .current-location h5 {
                margin-top: 0;
                margin-bottom: 15px;
                font-size: 18px;
            }

            .location-details p {
                margin: 10px 0;
                font-size: 15px;
            }

            .country-selector {
                margin: 20px 0;
            }

            .country-selector label {
                display: block;
                margin-bottom: 10px;
                font-weight: bold;
            }

            .country-selector select {
                width: 100%;
                padding: 12px;
                border-radius: 10px;
                border: 2px solid rgba(255, 255, 255, 0.3);
                background: rgba(255, 255, 255, 0.9);
                color: #333;
                font-size: 14px;
                cursor: pointer;
            }

            .country-selector .note {
                margin-top: 10px;
                font-size: 13px;
                opacity: 0.9;
            }

            .detect-btn {
                background: rgba(255, 255, 255, 0.2);
                color: #fff;
                border: 2px solid #fff;
                padding: 12px 25px;
                border-radius: 25px;
                cursor: pointer;
                display: flex;
                align-items: center;
                gap: 8px;
                font-weight: bold;
                transition: all 0.3s;
            }

            .detect-btn:hover {
                background: #fff;
                color: #667eea;
            }

            /* Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… */
            .admin-panel-btn {
                position: fixed;
                bottom: 30px;
                right: 30px;
                background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
                color: #fff;
                border: none;
                padding: 15px 25px;
                border-radius: 50px;
                cursor: pointer;
                font-weight: bold;
                box-shadow: 0 5px 20px rgba(245, 87, 108, 0.4);
                display: flex;
                align-items: center;
                gap: 10px;
                z-index: 9998;
                transition: all 0.3s;
                animation: pulse 2s infinite;
            }

            .admin-panel-btn:hover {
                transform: translateY(-3px);
                box-shadow: 0 8px 25px rgba(245, 87, 108, 0.6);
            }

            @keyframes pulse {
                0%, 100% { box-shadow: 0 5px 20px rgba(245, 87, 108, 0.4); }
                50% { box-shadow: 0 5px 30px rgba(245, 87, 108, 0.7); }
            }

            .modal {
                display: none;
                position: fixed;
                z-index: 9999;
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.7);
                backdrop-filter: blur(5px);
            }

            .modal.active {
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .admin-modal {
                background: #fff;
                border-radius: 20px;
                width: 95%;
                max-width: 1400px;
                max-height: 90vh;
                overflow-y: auto;
            }

            .modal-header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: #fff;
                padding: 20px 30px;
                border-radius: 20px 20px 0 0;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .modal-header h2 {
                margin: 0;
                font-size: 24px;
            }

            .admin-content {
                padding: 30px;
            }

            .admin-stats {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 20px;
                margin-bottom: 30px;
            }

            .stat-card {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: #fff;
                padding: 25px;
                border-radius: 15px;
                display: flex;
                align-items: center;
                gap: 20px;
            }

            .stat-card i {
                font-size: 48px;
            }

            .stat-card h3 {
                font-size: 36px;
                margin: 0;
            }

            .stat-card p {
                margin: 5px 0 0 0;
            }

            .users-table-container {
                background: #f8f9fa;
                padding: 20px;
                border-radius: 15px;
            }

            .users-table-container h3 {
                margin-top: 0;
                color: #333;
            }

            .users-table {
                width: 100%;
                border-collapse: collapse;
                background: #fff;
                border-radius: 10px;
                overflow: hidden;
            }

            .users-table thead {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: #fff;
            }

            .users-table th,
            .users-table td {
                padding: 15px;
                text-align: right;
                border-bottom: 1px solid #eee;
            }

            .users-table tbody tr:hover {
                background: #f8f9fa;
            }

            .status-badge {
                padding: 5px 12px;
                border-radius: 20px;
                font-size: 12px;
                font-weight: bold;
            }

            .status-online {
                background: #4caf50;
                color: #fff;
            }

            /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */
            .profile-tab {
                display: none;
            }

            .profile-tab.active {
                display: block;
            }

            .info-section, .settings-section, .music-section, .decorations-section {
                margin-bottom: 20px;
            }

            .info-section label, .settings-section h4, .music-section h4, .decorations-section h4 {
                display: block;
                margin-bottom: 8px;
                font-weight: bold;
            }

            .info-section input, .info-section select, .info-section textarea {
                width: 100%;
                padding: 12px;
                border: 2px solid #e0e0e0;
                border-radius: 10px;
                font-size: 14px;
            }

            .btn {
                padding: 12px 25px;
                border: none;
                border-radius: 25px;
                cursor: pointer;
                font-weight: bold;
                transition: all 0.3s;
            }

            .save-btn {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: #fff;
                width: 100%;
            }

            .btn-danger {
                background: linear-gradient(135deg, #f5576c 0%, #f093fb 100%);
                color: #fff;
            }

            .btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            }
            </style>

            <script>
            // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø´Ø±Ù
            const ADMIN_EMAIL = 'njdj9985@gmail.com';
            const ADMIN_PASSWORD = 'Zxcvbnm.8';

            // Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†
            let connectedUsers = [];
            let userLocationData = null;

            // Ø¯Ø§Ù„Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ
            async function detectLocation() {
                try {
                    document.getElementById('currentCountry').textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ¯...';
                    document.getElementById('currentCity').textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ¯...';
                    document.getElementById('currentIP').textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ¯...';

                    const response = await fetch('https://ipapi.co/json/');
                    const data = await response.json();

                    userLocationData = {
                        ip: data.ip,
                        country: data.country_name || 'Unknown',
                        countryCode: data.country_code || 'XX',
                        city: data.city || 'Unknown',
                        region: data.region || 'Unknown',
                        latitude: data.latitude || 0,
                        longitude: data.longitude || 0,
                        timezone: data.timezone || 'UTC',
                        org: data.org || 'Unknown ISP'
                    };

                    document.getElementById('currentCountry').textContent = userLocationData.country;
                    document.getElementById('currentCity').textContent = userLocationData.city;
                    document.getElementById('currentIP').textContent = userLocationData.ip;

                    updateLocalTime();
                    setInterval(updateLocalTime, 1000);

                    // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                    localStorage.setItem('userLocation', JSON.stringify(userLocationData));

                    // ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù„Ù…Ø´Ø±Ù
                    registerUserLogin();

                    alert('âœ… ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹Ùƒ Ø¨Ù†Ø¬Ø§Ø­!');
                } catch (error) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹:', error);
                    alert('âš ï¸ ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹Ùƒ. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹.');
                }
            }

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙˆÙ‚ÙŠØª Ø§Ù„Ù…Ø­Ù„ÙŠ
            function updateLocalTime() {
                if (userLocationData && userLocationData.timezone) {
                    try {
                        const time = new Date().toLocaleString('ar-EG', {
                            timeZone: userLocationData.timezone,
                            hour: '2-digit',
                            minute: '2-digit',
                            second: '2-digit',
                            hour12: true
                        });
                        document.getElementById('currentTime').textContent = time;
                    } catch (e) {
                        document.getElementById('currentTime').textContent = new Date().toLocaleTimeString('ar-EG');
                    }
                }
            }

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©
            function updateSelectedCountry() {
                const selectedCountry = document.getElementById('countrySelect').value;
                localStorage.setItem('selectedCountry', selectedCountry);

                if (selectedCountry === 'auto') {
                    alert('âœ… Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ù…ÙˆÙ‚Ø¹Ùƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ ÙÙŠ Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„');
                } else {
                    alert(`âœ… Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ ${selectedCountry} ÙÙŠ Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ`);
                }
            }

            // ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            function registerUserLogin() {
                const userName = document.getElementById('displayNameInput').value || 'Ø²Ø§Ø¦Ø±';
                const userEmail = document.getElementById('emailInput').value || '';
                const selectedCountry = document.getElementById('countrySelect').value;

                const userEntry = {
                    id: Date.now(),
                    name: userName,
                    email: userEmail,
                    realLocation: userLocationData,
                    displayCountry: selectedCountry === 'auto' ? userLocationData.country : selectedCountry,
                    loginTime: new Date().toLocaleString('ar-EG'),
                    status: 'online'
                };

                connectedUsers.push(userEntry);

                // Ø­ÙØ¸ ÙÙŠ localStorage
                const savedUsers = JSON.parse(localStorage.getItem('allUsers') || '[]');
                savedUsers.push(userEntry);
                localStorage.setItem('allUsers', JSON.stringify(savedUsers));

                updateAdminPanel();
            }

            // ØªØ­Ø¯ÙŠØ« Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
            function updateAdminPanel() {
                const savedUsers = JSON.parse(localStorage.getItem('allUsers') || '[]');

                document.getElementById('totalUsers').textContent = savedUsers.length;
                document.getElementById('onlineUsers').textContent = savedUsers.filter(u => u.status === 'online').length;

                const tbody = document.getElementById('usersTableBody');
                tbody.innerHTML = '';

                savedUsers.forEach(user => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${user.name}</td>
                        <td>${user.displayCountry}</td>
                        <td>${user.realLocation ? user.realLocation.country : 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</td>
                        <td>${user.realLocation ? user.realLocation.city : 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</td>
                        <td>${user.realLocation ? user.realLocation.ip : 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</td>
                        <td>${user.realLocation ? getLocalTime(user.realLocation.timezone) : '--:--'}</td>
                        <td>${user.loginTime}</td>
                        <td><span class="status-badge status-${user.status}">${user.status === 'online' ? 'Ù…ØªØµÙ„' : 'ØºÙŠØ± Ù…ØªØµÙ„'}</span></td>
                    `;
                    tbody.appendChild(row);
                });
            }

            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªÙˆÙ‚ÙŠØª Ø§Ù„Ù…Ø­Ù„ÙŠ
            function getLocalTime(timezone) {
                try {
                    return new Date().toLocaleString('ar-EG', {
                        timeZone: timezone,
                        hour: '2-digit',
                        minute: '2-digit',
                        hour12: true
                    });
                } catch (e) {
                    return '--:--';
                }
            }

            // ÙØªØ­ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
            function openAdminPanel() {
                const userEmail = localStorage.getItem('userEmail');
                if (userEmail === ADMIN_EMAIL) {
                    document.getElementById('adminPanel').classList.add('active');
                    updateAdminPanel();
                } else {
                    alert('â›” Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ù„Ù„ÙˆØµÙˆÙ„');
                }
            }

            // Ø¥ØºÙ„Ø§Ù‚ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
            function closeAdminPanel() {
                document.getElementById('adminPanel').classList.remove('active');
            }

            // Ø¥Ø¸Ù‡Ø§Ø± Ø²Ø± Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ù„Ù„Ù…Ø´Ø±Ù
            function checkAdminAccess() {
                const userEmail = localStorage.getItem('userEmail');
                if (userEmail === ADMIN_EMAIL) {
                    document.getElementById('adminPanelBtn').style.display = 'flex';
                }
            }

            function toggleProfileMenu() {
                const dropdown = document.getElementById('profileMenuDropdown');
                dropdown.classList.toggle('active');
            }

            function menuAction(action) {
                console.log('ØªÙ… Ø§Ø®ØªÙŠØ§Ø±: ' + action);
                toggleProfileMenu();

                switch(action) {
                    case 'private':
                        alert('ÙØªØ­ Ù…Ø­Ø§Ø¯Ø«Ø© Ø®Ø§ØµØ©');
                        break;
                    case 'remove':
                        alert('Ø¥Ø²Ø§Ù„Ø© ØµØ¯ÙŠÙ‚');
                        break;
                    case 'gift':
                        alert('Ø¥Ø±Ø³Ø§Ù„ Ù‡Ø¯ÙŠØ©');
                        break;
                    case 'wallet':
                        alert('Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…Ø­ÙØ¸Ø©');
                        break;
                    case 'ignore':
                        alert('ØªØ¬Ø§Ù‡Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
                        break;
                }
            }

            function showProfileTab(tabName) {
                document.querySelectorAll('.profile-tab').forEach(tab => {
                    tab.classList.remove('active');
                });

                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.classList.remove('active');
                });

                const targetTab = document.getElementById('profile' + tabName.charAt(0).toUpperCase() + tabName.slice(1) + 'Tab');
                if (targetTab) {
                    targetTab.classList.add('active');
                }

                if (event && event.target) {
                    event.target.classList.add('active');
                }
            }

            function updateProfile() {
                const name = document.getElementById('displayNameInput').value;
                const email = document.getElementById('emailInput').value;

                localStorage.setItem('userName', name);
                localStorage.setItem('userEmail', email);

                alert('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!');

                checkAdminAccess();
                registerUserLogin();
            }

            function updateNameColor() {
                const color = document.getElementById('nameColorPicker').value;
                alert('ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ù„ÙˆÙ† Ø§Ù„Ø§Ø³Ù…: ' + color);
            }

            function updateFontColor() {
                const color = document.getElementById('fontColorPicker').value;
                alert('ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ù„ÙˆÙ† Ø§Ù„Ø®Ø·: ' + color);
            }

            function uploadMessageBackground() {
                alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø®Ù„ÙÙŠØ© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„');
            }

            function uploadProfileMusic() {
                alert('ØªÙ… Ø±ÙØ¹ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰');
            }

            function removeProfileMusic() {
                alert('ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰');
            }

            function updateNameDecoration() {
                alert('ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø²Ø®Ø±ÙØ©');
            }

            function closeProfileModal() {
                document.getElementById('profileModal').classList.remove('active');
            }

            function closeViewProfileModal() {
                document.getElementById('viewProfileModal').classList.remove('active');
            }

            function likeProfile() {
                alert('â¤ï¸ ØªÙ… Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨');
            }

            function startPrivateChat() {
                alert('ğŸ’¬ Ø¨Ø¯Ø¡ Ù…Ø­Ø§Ø¯Ø«Ø©');
            }

            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø®Ø§Ø±Ø¬Ù‡Ø§
            document.addEventListener('click', function(event) {
                const dropdown = document.getElementById('profileMenuDropdown');
                const menuBtn = document.querySelector('.menu-btn');

                if (dropdown && !dropdown.contains(event.target) && !menuBtn.contains(event.target)) {
                    dropdown.classList.remove('active');
                }
            });

            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„ØµÙØ­Ø©
            window.addEventListener('load', function() {
                // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø­ÙÙˆØ¸
                const savedLocation = localStorage.getItem('userLocation');
                if (savedLocation) {
                    userLocationData = JSON.parse(savedLocation);
                    document.getElementById('currentCountry').textContent = userLocationData.country;
                    document.getElementById('currentCity').textContent = userLocationData.city;
                    document.getElementById('currentIP').textContent = userLocationData.ip;
                    updateLocalTime();
                    setInterval(updateLocalTime, 1000);
                } else {
                    detectLocation();
                }

                // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©
                const selectedCountry = localStorage.getItem('selectedCountry');
                if (selectedCountry) {
                    document.getElementById('countrySelect').value = selectedCountry;
                }

                // ØªØ­Ù…ÙŠÙ„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                const userName = localStorage.getItem('userName');
                const userEmail = localStorage.getItem('userEmail');
                if (userName) document.getElementById('displayNameInput').value = userName;
                if (userEmail) document.getElementById('emailInput').value = userEmail;

                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø´Ø±Ù
                checkAdminAccess();
            });
            </script>
                <!-- Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„Ø£Ø®Ø¨Ø§Ø± -->
                <div id="newsModal" class="modal">
                    <div class="modal-content news-modal">
                        <div class="modal-header">
                            <h2>ğŸ“° Ù‚Ù†Ø§Ø© Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</h2>
                            <button class="close-btn" onclick="closeNewsModal()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="news-content">
                            <div class="news-post-form">
                                <textarea id="newsContentInput" placeholder="Ø§ÙƒØªØ¨ Ø®Ø¨Ø±Ù‹Ø§..." maxlength="500"></textarea>
                                <div class="news-form-actions">
                                    <input type="file" id="newsFileInput" accept="image/*,video/*" style="display: none;">
                                    <button onclick="document.getElementById('newsFileInput').click()" class="btn btn-secondary">
                                        <i class="fas fa-image"></i>
                                        Ø§Ø®ØªØ± ØµÙˆØ±Ø© Ø£Ùˆ ÙÙŠØ¯ÙŠÙˆ
                                    </button>
                                    <button onclick="postNews()" class="btn btn-primary">
                                        <i class="fas fa-paper-plane"></i>
                                        Ù†Ø´Ø±
                                    </button>
                                </div>
                            </div>
                            <div id="newsFeed" class="news-feed">
                                <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„Ù‚ØµØµ -->
                <div id="storiesModal" class="modal">
                    <div class="modal-content stories-modal">
                        <div class="modal-header">
                            <h2>ğŸ“¸ Ø§Ù„Ù‚ØµØµ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</h2>
                            <button class="close-btn" onclick="closeStoriesModal()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="stories-content">
                            <div class="add-story-section">
                                <button onclick="openAddStoryModal()" class="btn add-story-btn">
                                    <i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ© Ù‚ØµØ©
                                </button>
                            </div>
                            <div id="storiesContainer" class="stories-container">
                                <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ù…ÙˆØ¯Ø§Ù„ Ø¥Ø¶Ø§ÙØ© Ù‚ØµØ© -->
                <div id="addStoryModal" class="modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2>Ø¥Ø¶Ø§ÙØ© Ù‚ØµØ© Ø¬Ø¯ÙŠØ¯Ø©</h2>
                            <button class="close-btn" onclick="closeAddStoryModal()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="story-form">
                            <input type="file" id="storyMediaInput" accept="image/*,video/*" required>
                            <textarea id="storyTextInput" placeholder="Ù†Øµ Ø§Ù„Ù‚ØµØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"></textarea>
                            <button onclick="addStory()" class="btn btn-primary">
                                <i class="fas fa-plus"></i>
                                Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù‚ØµØ©
                            </button>
                        </div>
                    </div>
                </div>
            <!-- Ù…ÙˆØ¯Ø§Ù„ ØºØ±ÙØ© Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª -->
            <div id="quizRoomModal" class="modal">
                <div class="modal-content quiz-room-modal">
                    <div class="modal-header">
                        <h2>ğŸ† ØºØ±ÙØ© Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª</h2>
                        <button class="close-btn" onclick="closeQuizRoom()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="quiz-content">
                        <div class="quiz-stats">
                            <div class="stat-item">
                                <span>Ù†Ù‚Ø§Ø·Ùƒ:</span>
                                <span id="userQuizPoints">0</span>
                            </div>
                            <div class="stat-item">
                                <span>Ø§Ù„ØªØ±ØªÙŠØ¨:</span>
                                <span id="userQuizRank">#-</span>
                            </div>
                        </div>
                        <div id="quizQuestion" class="quiz-question">
                            <h3 id="questionText">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ ØºØ±ÙØ© Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª!</h3>
                            <div id="questionOptions" class="question-options"></div>
                            <div class="quiz-timer">
                                <span>Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: </span>
                                <span id="quizTimer">20</span>
                                <span> Ø«Ø§Ù†ÙŠØ©</span>
                            </div>
                        </div>
                        <div id="quizLeaderboard" class="quiz-leaderboard">
                            <h4>Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†</h4>
                            <div id="leaderboardList"></div>
                        </div>
                    </div>
                </div>
            </div>
    <!-- Ù…ÙˆØ¯Ø§Ù„ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© -->
    <div id="adminModal" class="modal">
        <div class="modal-content admin-modal">
            <div class="modal-header">
                <h2>ğŸ‘‘ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h2>
                <button class="close-btn" onclick="closeAdminModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="admin-content">
                <div class="admin-tabs">
                    <button class="tab-btn active" onclick="showAdminTab('users')">
                        <i class="fas fa-users"></i>
                        Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
                    </button>
                    <button class="tab-btn" onclick="showAdminTab('ranks')">
                        <i class="fas fa-crown"></i>
                        Ø§Ù„Ø±ØªØ¨
                    </button>
                    <button class="tab-btn" onclick="showAdminTab('rooms')">
                        <i class="fas fa-door-open"></i>
                        Ø§Ù„ØºØ±Ù
                    </button>
                    <button class="tab-btn" onclick="showAdminTab('bans')">
                        <i class="fas fa-ban"></i>
                        Ø§Ù„Ø­Ø¸Ø± ÙˆØ§Ù„ÙƒØªÙ…
                    </button>
                    <button class="tab-btn" onclick="showAdminTab('coins')">
                        <i class="fas fa-coins"></i>
                        Ø§Ù„Ù†Ù‚Ø§Ø·
                    </button>
                    <button class="tab-btn" onclick="showAdminTab('notifications')">
                        <i class="fas fa-bell"></i>
                        Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
                    </button>
                </div>
                <div id="adminUsersTab" class="admin-tab active">
                    <div class="admin-actions">
                        <button onclick="refreshUsersList()" class="btn">
                            <i class="fas fa-sync-alt"></i>
                            ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
                        </button>
                    </div>
                    <div id="adminUsersList" class="admin-users-list">
                        <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                    </div>
                </div>
                <div id="adminRanksTab" class="admin-tab">
                    <div class="ranks-management">
                        <h3>Ø§Ù„Ø±ØªØ¨ Ø§Ù„Ù…ØªØ§Ø­Ø©</h3>
                        <div id="ranksList" class="ranks-list">
                            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                        </div>
                    </div>
                </div>
                <div id="adminRoomsTab" class="admin-tab">
                    <div class="rooms-management">
                        <button onclick="openCreateRoomModal()" class="btn btn-primary">
                            <i class="fas fa-plus"></i>
                            Ø¥Ù†Ø´Ø§Ø¡ ØºØ±ÙØ© Ø¬Ø¯ÙŠØ¯Ø©
                        </button>
                        <div id="adminRoomsList" class="admin-rooms-list">
                            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                        </div>
                    </div>
                </div>
                <div id="adminBansTab" class="admin-tab">
                    <div class="bans-management">
                        <h3>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ø§Ù„Ù…Ø­Ø¸ÙˆØ±ÙˆÙ†</h3>
                        <div id="bannedUsersList" class="banned-users-list">
                            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                        </div>
                    </div>
                </div>
                <div id="adminCoinsTab" class="admin-tab">
                    <div class="coins-management">
                        <h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ù‚Ø§Ø·</h3>
                        <div class="coins-form">
                            <select id="coinsUserSelect">
                                <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</option>
                            </select>
                            <input type="number" id="coinsAmount" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø·">
                            <button onclick="giveCoins()" class="btn btn-primary">
                                <i class="fas fa-coins"></i>
                                Ø¥Ø¹Ø·Ø§Ø¡ Ù†Ù‚Ø§Ø·
                            </button>
                        </div>
                    </div>
                </div>
                <div id="adminNotificationsTab" class="admin-tab">
                    <div class="notifications-management">
                        <h3>Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</h3>
                        <div class="notification-form">
                            <select id="notificationTarget">
                                <option value="all">Ù„Ù„Ø¬Ù…ÙŠØ¹</option>
                                <option value="specific">Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø­Ø¯Ø¯</option>
                            </select>
                            <select id="specificUserSelect" style="display: none;">
                                <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</option>
                            </select>
                            <textarea id="notificationMessage" placeholder="Ù†Øµ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±"></textarea>
                            <button onclick="sendNotification()" class="btn btn-primary">
                                <i class="fas fa-paper-plane"></i>
                                Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Ù…ÙˆØ¯Ø§Ù„ Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
    <div id="userActionsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</h2>
                <button class="close-btn" onclick="closeUserActionsModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="user-actions">
                <div class="user-info">
                    <img id="actionUserAvatar" src="" alt="">
                    <span id="actionUserName"></span>
                </div>
                <div class="actions-grid">
                    <button onclick="viewUserProfile()" class="action-btn">
                        <i class="fas fa-user"></i>
                        <span>Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</span>
                    </button>
                    <button onclick="startPrivateChat()" class="action-btn">
                        <i class="fas fa-envelope"></i>
                        <span>Ø±Ø³Ø§Ù„Ø© Ø®Ø§ØµØ©</span>
                    </button>
                    <button onclick="openBanUserModal()" class="action-btn ban-btn admin-only">
                        <i class="fas fa-ban"></i>
                        <span>Ø­Ø¸Ø±</span>
                    </button>
                    <button onclick="openMuteUserModal()" class="action-btn mute-btn admin-only">
                        <i class="fas fa-volume-mute"></i>
                        <span>ÙƒØªÙ…</span>
                    </button>
                    <button onclick="openAssignRankModal()" class="action-btn rank-btn admin-only">
                        <i class="fas fa-crown"></i>
                        <span>ØªØ¹ÙŠÙŠÙ† Ø±ØªØ¨Ø©</span>
                    </button>
                    <button onclick="openGiveCoinsModal()" class="action-btn coins-btn admin-only">
                        <i class="fas fa-coins"></i>
                        <span>Ø¥Ø¹Ø·Ø§Ø¡ Ù†Ù‚Ø§Ø·</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- Ù…ÙˆØ¯Ø§Ù„ Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
    <div id="banUserModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</h2>
                <button class="close-btn" onclick="closeBanUserModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="ban-form">
                <div class="form-group">
                    <label>Ø³Ø¨Ø¨ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡:</label>
                    <textarea id="banReason" placeholder="Ø§ÙƒØªØ¨ Ø³Ø¨Ø¨ Ø§Ù„Ø­Ø¸Ø± Ø£Ùˆ Ø§Ù„ÙƒØªÙ…..." required></textarea>
                </div>
                <div class="form-actions">
                    <button onclick="confirmBanUser()" class="btn ban-btn">
                        <i class="fas fa-ban"></i>
                        ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¸Ø± Ø§Ù„Ø¯Ø§Ø¦Ù…
                    </button>
                    <button onclick="unbanUser()" class="btn unban-btn">
                        <i class="fas fa-unlock"></i>
                        ÙÙƒ Ø§Ù„Ø­Ø¸Ø±
                    </button>
                    <button onclick="muteUser()" class="btn mute-btn">
                        <i class="fas fa-microphone-slash"></i>
                        ÙƒØªÙ… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                    </button>
                </div>
            </div>
        </div>
    </div>
                <!-- Ù…ÙˆØ¯Ø§Ù„ ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø±ØªØ¨Ø© -->
                <div id="assignRankModal" class="modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2>ØªØ¹ÙŠÙŠÙ† Ø±ØªØ¨Ø©</h2>
                            <button class="close-btn" onclick="closeAssignRankModal()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="rank-form">
                            <div class="form-group">
                                <label>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:</label>
                                <span id="rankTargetUser"></span>
                            </div>
                            <div class="form-group">
                                <label>Ø§Ù„Ø±ØªØ¨Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:</label>
                                <select id="newRankSelect">
                                    <option value="visitor">ğŸ‘‹ Ø²Ø§Ø¦Ø± (Visitor)</option>
                                    <option value="bronze">ğŸ¥‰ Ø¹Ø¶Ùˆ Ø¨Ø±ÙˆÙ†Ø²ÙŠ (Bronze Member)</option>
                                    <option value="silver">ğŸ¥ˆ Ø¹Ø¶Ùˆ ÙØ¶ÙŠ (Silver Member)</option>
                                    <option value="gold">ğŸ¥‡ Ø¹Ø¶Ùˆ Ø°Ù‡Ø¨ÙŠ (Gold Member)</option>
                                    <option value="diamond">ğŸ’ Ø¹Ø¶Ùˆ Ø§Ù„Ù…Ø§Ø³ (Diamond Member)</option>
                                    <option value="crown">ğŸ‘‘ Ø¨Ø±Ù†Ø³ (Prince)</option>
                                    <option value="moderator">ğŸ›¡ï¸ Ù…Ø´Ø±Ù (Moderator)</option>
                                    <option value="admin">âš¡ Ø¥Ø¯Ø§Ø±ÙŠ (Admin)</option>
                                    <option value="super">â­ Ø³ÙˆØ¨Ø± (Super)</option>
                                    <option value="legend">ğŸŒŸ Ø£Ø³Ø·ÙˆØ±Ø© (Legend)</option>
                                    <option value="chat_star">ğŸ† ØµØ§Ø­Ø¨ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© (Chat Owner)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ø³Ø¨Ø¨ Ø§Ù„ØªØºÙŠÙŠØ±:</label>
                                <textarea id="rankChangeReason" placeholder="Ø³Ø¨Ø¨ ØªØºÙŠÙŠØ± Ø§Ù„Ø±ØªØ¨Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"></textarea>
                            </div>
                            <button onclick="confirmAssignRank()" class="btn btn-primary">
                                <i class="fas fa-crown"></i>
                                ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø±ØªØ¨Ø©
                            </button>
                        </div>
                    </div>
                </div>
    <!-- Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª -->
    <div id="notificationsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</h2>
                <button class="close-btn" onclick="closeNotificationsModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="notificationsList" class="notifications-list">
                <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
            </div>
        </div>
    </div>
    <!-- Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h2>
                <button class="close-btn" onclick="closeSettingsModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="settings-content">
                <div class="settings-section">
                    <h3>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØµÙˆØª</h3>
                    <div class="setting-item">
                        <label>Ø£ØµÙˆØ§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</label>
                        <label class="switch">
                            <input type="checkbox" id="soundNotifications" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©</h3>
                    <div class="setting-item">
                        <label>Ø­ÙØ¸ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©</label>
                        <label class="switch">
                            <input type="checkbox" id="saveChatHistory" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</h3>
                    <button onclick="exitChat()" class="btn btn-warning">
                        <i class="fas fa-sign-out-alt"></i>
                        Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©
                    </button>
                    <button onclick="exitRoom()" class="btn btn-secondary">
                        <i class="fas fa-door-open"></i>
                        Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† Ø§Ù„ØºØ±ÙØ©
                    </button>
                    <button onclick="openHelpModal()" class="btn btn-info">
                        <i class="fas fa-question-circle"></i>
                        Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
                    </button>
                    <button onclick="showRanks()" class="btn btn-primary">
                        <i class="fas fa-crown"></i>
                        Ø¹Ø±Ø¶ Ø§Ù„Ø±ØªØ¨
                    </button>
                    <button onclick="cleanRooms()" class="btn btn-danger admin-only">
                        <i class="fas fa-broom"></i>
                        ØªÙ†Ø¸ÙŠÙ Ø§Ù„ØºØ±Ù
                    </button>
                </div>
                <button onclick="saveSettings()" class="btn save-btn">
                    <i class="fas fa-save"></i>
                    Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                </button>
            </div>
        </div>
    </div>
    <!-- Ù…ÙˆØ¯Ø§Ù„ Ù…Ø´ØºÙ„ Ø§Ù„Ø±Ø§Ø¯ÙŠÙˆ -->
    <div id="radioPlayerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ“» Ù…Ø´ØºÙ„ Ø§Ù„Ø±Ø§Ø¯ÙŠÙˆ</h2>
                <button class="close-btn" onclick="closeRadioPlayer()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="radio-content">
                <div class="radio-stations">
                    <div class="station" onclick="playRadioStation('arabic')">
                        <i class="fas fa-music"></i>
                        <span>Ù…Ø­Ø·Ø© Ø§Ù„Ø£ØºØ§Ù†ÙŠ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</span>
                    </div>
                    <div class="station" onclick="playRadioStation('english')">
                        <i class="fas fa-music"></i>
                        <span>Ù…Ø­Ø·Ø© Ø§Ù„Ø£ØºØ§Ù†ÙŠ Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ©</span>
                    </div>
                    <div class="station" onclick="playRadioStation('classical')">
                        <i class="fas fa-music"></i>
                        <span>Ù…Ø­Ø·Ø© Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠØ©</span>
                    </div>
                </div>
                <div class="radio-controls">
                    <button id="radioPlayBtn" onclick="toggleRadio()">
                        <i class="fas fa-play"></i>
                    </button>
                    <input type="range" id="radioVolume" min="0" max="100" value="50">
                </div>
                <div class="custom-music">
                    <h4>Ø£ØºØ§Ù†ÙŠÙƒ Ø§Ù„Ø®Ø§ØµØ©</h4>
                    <input type="file" id="customMusicInput" accept="audio/*" multiple>
                    <button onclick="uploadCustomMusic()" class="btn">
                        <i class="fas fa-upload"></i>
                        Ø±ÙØ¹ Ø£ØºØ§Ù†ÙŠ
                    </button>
                    <div id="customMusicList" class="custom-music-list">
                        <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                    </div>
                </div>
            </div>
        </div>
    </div>
            <!-- Ù…ÙˆØ¯Ø§Ù„ Ø¥Ù†Ø´Ø§Ø¡ ØºØ±ÙØ© -->
            <div id="createRoomModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>Ø¥Ù†Ø´Ø§Ø¡ ØºØ±ÙØ© Ø¬Ø¯ÙŠØ¯Ø©</h2>
                        <button class="close-btn" onclick="closeCreateRoomModal()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="room-form">
                        <div class="form-group">
                            <label>Ø§Ø³Ù… Ø§Ù„ØºØ±ÙØ©:</label>
                            <input type="text" id="roomName" placeholder="Ø§Ø³Ù… Ø§Ù„ØºØ±ÙØ©" required>
                        </div>
                        <div class="form-group">
                            <label>ÙˆØµÙ Ø§Ù„ØºØ±ÙØ©:</label>
                            <textarea id="roomDescription" placeholder="ÙˆØµÙ Ø§Ù„ØºØ±ÙØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Ø®Ù„ÙÙŠØ© Ø§Ù„ØºØ±ÙØ©:</label>
                            <input type="file" id="roomBackgroundInput" accept="image/*">
                        </div>
                        <button onclick="createRoom()" class="btn btn-primary">
                            <i class="fas fa-plus"></i>
                            Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØºØ±ÙØ©
                        </button>
                    </div>
                </div>
            </div>
    <!-- Ù…ÙˆØ¯Ø§Ù„ Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
    <div id="banUserModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</h2>
                <button class="close-btn" onclick="closeModal('banUserModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="ban-form">
                <div class="form-group">
                    <label>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø­Ø¯Ø¯:</label>
                    <span id="banTargetUser" data-user-id=""></span>
                </div>
                <div class="form-group">
                    <label>Ø³Ø¨Ø¨ Ø§Ù„Ø­Ø¸Ø±:</label>
                    <textarea id="banReason" placeholder="Ø§ÙƒØªØ¨ Ø³Ø¨Ø¨ Ø§Ù„Ø­Ø¸Ø±..." required></textarea>
                </div>
                <div class="form-group">
                    <label>Ù…Ø¯Ø© Ø§Ù„Ø­Ø¸Ø±:</label>
                    <select id="banDuration">
                        <option value="1">Ø³Ø§Ø¹Ø© ÙˆØ§Ø­Ø¯Ø©</option>
                        <option value="24">24 Ø³Ø§Ø¹Ø©</option>
                        <option value="168">Ø£Ø³Ø¨ÙˆØ¹ ÙˆØ§Ø­Ø¯</option>
                        <option value="720">Ø´Ù‡Ø± ÙˆØ§Ø­Ø¯</option>
                        <option value="permanent">Ø¯Ø§Ø¦Ù…</option>
                    </select>
                </div>
                <button onclick="banUser()" class="btn btn-danger">
                    <i class="fas fa-ban"></i>
                    Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                </button>
            </div>
        </div>
    </div>
    <!-- Ù…ÙˆØ¯Ø§Ù„ Ø¥Ù‡Ø¯Ø§Ø¡ Ø§Ù„Ù†Ù‚Ø§Ø· -->
    <div id="giveCoinsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Ø¥Ù‡Ø¯Ø§Ø¡ Ù†Ù‚Ø§Ø·</h2>
                <button class="close-btn" onclick="closeModal('giveCoinsModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="coins-form">
                <div class="form-group">
                    <label>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø­Ø¯Ø¯:</label>
                    <span id="coinsTargetUser" data-user-id=""></span>
                </div>
                <div class="form-group">
                    <label>Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø·:</label>
                    <input type="number" id="coinsAmount" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø·" min="1" max="10000" required>
                </div>
                <div class="form-group">
                    <label>Ø³Ø¨Ø¨ Ø§Ù„Ø¥Ù‡Ø¯Ø§Ø¡:</label>
                    <textarea id="coinsReason" placeholder="Ø³Ø¨Ø¨ Ø¥Ù‡Ø¯Ø§Ø¡ Ø§Ù„Ù†Ù‚Ø§Ø· (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"></textarea>
                </div>
                <button onclick="giveCoins()" class="btn btn-primary">
                    <i class="fas fa-coins"></i>
                    Ø¥Ù‡Ø¯Ø§Ø¡ Ø§Ù„Ù†Ù‚Ø§Ø·
                </button>
            </div>
        </div>
    </div>
    <!-- Ù…ÙˆØ¯Ø§Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± -->
    <div id="sendNotificationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ”” Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø±</h2>
                <button class="close-btn" onclick="closeSendNotificationModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="notification-form">
                    <div class="form-group">
                        <label>Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:</label>
                        <select id="notificationRecipient">
                            <option value="">Ø§Ø®ØªØ± Ù…Ø³ØªØ®Ø¯Ù…...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±:</label>
                        <textarea id="notificationMessage" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±:</label>
                        <select id="notificationType">
                            <option value="info">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</option>
                            <option value="success">Ù†Ø¬Ø§Ø­</option>
                            <option value="warning">ØªØ­Ø°ÙŠØ±</option>
                            <option value="error">Ø®Ø·Ø£</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button onclick="sendNotificationToUser()" class="btn btn-primary">
                            <i class="fas fa-paper-plane"></i> Ø¥Ø±Ø³Ø§Ù„
                        </button>
                        <button onclick="closeSendNotificationModal()" class="btn btn-secondary">Ø¥Ù„ØºØ§Ø¡</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Ù…ÙˆØ¯Ø§Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± -->
    <div id="sendNotificationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ“¢ Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø±</h2>
                <button class="close-btn" onclick="closeSendNotificationModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="notification-form">
                    <div class="form-group">
                        <label for="notificationRecipient">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:</label>
                        <select id="notificationRecipient" class="form-control">
                            <option value="">Ø§Ø®ØªØ± Ù…Ø³ØªØ®Ø¯Ù…...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="notificationType">Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±:</label>
                        <select id="notificationType" class="form-control">
                            <option value="info">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</option>
                            <option value="success">Ù†Ø¬Ø§Ø­</option>
                            <option value="warning">ØªØ­Ø°ÙŠØ±</option>
                            <option value="error">Ø®Ø·Ø£</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="notificationMessage">Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±:</label>
                        <textarea id="notificationMessage" class="form-control" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ù‡Ù†Ø§..." rows="4"></textarea>
                    </div>
                    <div class="modal-actions">
                        <button onclick="sendNotificationToUser()" class="btn btn-primary">
                            <i class="fas fa-paper-plane"></i>
                            Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
                        </button>
                        <button onclick="closeSendNotificationModal()" class="btn btn-secondary">
                            Ø¥Ù„ØºØ§Ø¡
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† Ø­Ø§Ù„ÙŠØ§Ù‹ -->
    <div id="onlineUsersModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ‘¥ Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† Ø­Ø§Ù„ÙŠØ§Ù‹</h2>
                <button class="close-btn" onclick="closeOnlineUsersModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div id="onlineUsersList" class="online-users-list">
                    <p style="text-align: center; color: var(--text-secondary);">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†...</p>
                </div>
            </div>
        </div>
    </div>
    <!-- ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø®Ø§ØµØ© -->
    <div id="privateChatBox" class="private-chat-box" style="display: none;">
        <div class="chat-box-header">
            <h3 class="chat-box-title">ğŸ’¬ Ø¯Ø±Ø¯Ø´Ø© Ø®Ø§ØµØ©</h3>
            <div class="chat-box-controls">
                <button class="chat-box-btn" onclick="minimizePrivateChatBox()" title="ØªØµØºÙŠØ±">
                    <i class="fas fa-minus"></i>
                </button>
                <button class="chat-box-btn" onclick="closePrivateChatBox()" title="Ø¥ØºÙ„Ø§Ù‚">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        <div class="chat-box-body">
            <div class="private-chat-users">
                <select id="privateChatUserSelect" onchange="selectPrivateChatUser()">
                    <option value="">Ø§Ø®ØªØ± Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù„Ø¯Ø±Ø¯Ø´Ø©...</option>
                </select>
            </div>
            <div id="privateChatMessages" class="private-chat-messages">
                <p style="text-align: center; color: var(--text-secondary); padding: 20px;">
                    Ø§Ø®ØªØ± Ù…Ø³ØªØ®Ø¯Ù… Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
                </p>
            </div>
            <div class="private-chat-input">
                <input type="text" id="privateChatInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø©..." onkeypress="if(event.key==='Enter') sendPrivateChatMessage()">
                <button class="private-chat-send" onclick="sendPrivateChatMessage()">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>
    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="loading-spinner" style="display: none;">
        <div class="spinner"></div>
        <p>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
    </div>
    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>
    <!-- Audio Elements -->
    <audio id="notificationSound" preload="auto">
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LNeSsFJHfH8N2QQAoUXrTp6...... (Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø£ØµÙ„ÙŠ Ù„Ù… ÙŠØªØºÙŠØ± Ù‡Ù†Ø§) ......"></audio>
    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
    <!-- Ù…ÙˆØ¯Ø§Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
<div id="loginModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeLoginModal()">&times;</span>
        <h2>ğŸ” ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
        <input type="email" id="loginEmail" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" style="width: 100%; padding: 10px; margin: 10px 0;">
        <input type="password" id="loginPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" style="width: 100%; padding: 10px; margin: 10px 0;">
        <button onclick="login()" style="width: 100%; padding: 10px; background: #007bff; color: white; border: none;">Ø¯Ø®ÙˆÙ„</button>
    </div>
</div>
<!-- Ù…ÙˆØ¯Ø§Ù„ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø§Ù„Ùƒ -->
<div id="ownerModal" class="modal">
    <div class="modal-content" style="width: 90%;">
        <span class="close" onclick="closeOwnerModal()">&times;</span>
        <h2 style="color: #ff1493;">ğŸ† Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø§Ù„Ùƒ</h2>
        <div id="ownerContent">
            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù‡Ù†Ø§ -->
        </div>
    </div>
</div>
<script>
// ===== Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¨Ø³ÙŠØ· Ù„Ù„Ø±ØªØ¨ =====
let currentUser = null;
// ÙØªØ­ Ù…ÙˆØ¯Ø§Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
function showLoginModal() {
    document.getElementById('loginModal').style.display = 'block';
}
// Ø¥ØºÙ„Ø§Ù‚ Ù…ÙˆØ¯Ø§Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
function closeLoginModal() {
    document.getElementById('loginModal').style.display = 'none';
}
    /**
     * Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ ÙŠØ¯Ù…Ø¬ Ù…Ù†Ø·Ù‚ Ù…Ø¹Ø§Ù„Ø¬Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… (APIØŒ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ø¸Ø±ØŒ Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„)
     * Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„Ù…Ø§Ù„Ùƒ Ø§Ù„Ù…Ø®ØµØµØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙˆØ§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©.
     * ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ù…Ø«Ù„ showError, showLoading, showMainScreen, Ø¥Ù„Ø®. Ù…Ø¹Ø±ÙØ© ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¹Ø§Ù… Ù„ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ø³Ù„ÙŠÙ….
     */
    async function handleLogin(e) {
        // Ù…Ù†Ø¹ Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙÙˆØ±Ù… Ø¥Ø°Ø§ ØªÙ… Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø¯Ø§Ù„Ø© Ø¨ÙˆØ§Ø³Ø·Ø© Ø­Ø¯Ø« ÙÙˆØ±
        if (e && e.preventDefault) {
            e.preventDefault();
        }

        // ØªØ¹Ø±ÙŠÙ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ù…Ø§Ù„Ùƒ ÙƒÙ…Ø§ Ù‡Ùˆ Ù…Ø·Ù„ÙˆØ¨
        const OWNER_EMAIL_NEW = 'njdj9985@gmail.com';
        const OWNER_PASSWORD_NEW = 'Zxcvbnm.8'; // ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ù‡Ø°Ù‡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø³Ø±ÙŠØ© ÙˆÙ„Ø§ ØªÙØ¹Ø±Ø¶ ÙÙŠ ÙƒÙˆØ¯ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ© (Frontend) ÙÙŠ Ø¨ÙŠØ¦Ø© Ø¥Ù†ØªØ§Ø¬ÙŠØ©

        const email = document.getElementById('loginEmail').value.trim();
        const password = document.getElementById('loginPassword').value;

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ù…Ù…Ù„ÙˆØ¡Ø©
        if (!email || !password) {
            // ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø¯Ø§Ù„Ø© showError Ù…ÙˆØ¬ÙˆØ¯Ø©
            showError('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„');
            return;
        }

        try {
            // ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø¯Ø§Ù„Ø© showLoading Ù…ÙˆØ¬ÙˆØ¯Ø©
            showLoading(true);

            // ===================================
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø§Ù„Ùƒ (Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©)
            // ===================================
            if (email === OWNER_EMAIL_NEW && password === OWNER_PASSWORD_NEW) {

                // ØªØ¹Ø±ÙŠÙ ÙƒØ§Ø¦Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù„Ù…Ø§Ù„Ùƒ Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
                const ownerUser = {
                    id: 1,
                    username: 'Ù…Ø§Ù„Ùƒ Ø§Ù„Ù…ÙˆÙ‚Ø¹',
                    email: njdj9985@gmail.com,
                    isOwner: true,
                    role: 'owner',
                    rank: 'Ù…Ø§Ù„Ùƒ Ø§Ù„Ù…ÙˆÙ‚Ø¹ğŸ†', // ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„Ø­Ù‚Ù„ Ù„Ù„ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø£ØµÙ„ÙŠ
                    rankInfo: { name: 'ğŸ† Ù…Ø§Ù„Ùƒ Ø§Ù„Ù†Ø¸Ø§Ù…', emoji: 'ğŸ†', color: '#ff1493' },
                    coins: 999999999, // ØªÙ… Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ù‡Ø§ Ù„Ù„ØªÙˆØ§ÙÙ‚
                    level: 10, // ØªÙ… Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ù‡Ø§ Ù„Ù„ØªÙˆØ§ÙÙ‚
                    profile_image1: null,
                    created_at: new Date().toISOString()
                };

                // Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø§Ù„Ùƒ ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
                localStorage.setItem('chatToken', 'owner-token-' + Date.now()); // Ø§Ø³ØªØ®Ø¯Ø§Ù… ØªÙˆÙƒÙŠÙ† ÙˆÙ‡Ù…ÙŠ Ù„Ù„Ù…Ø§Ù„Ùƒ
                localStorage.setItem('isOwner', 'true');
                localStorage.setItem('userData', JSON.stringify(ownerUser)); // Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø§Ù„Ùƒ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©

                // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
                currentUser = ownerUser; // ÙŠØ¬Ø¨ ØªØ¹Ø±ÙŠÙ currentUser ÙƒÙ…ØªØºÙŠØ± Ø¹Ø§Ù…
                isOwner = true; // ÙŠØ¬Ø¨ ØªØ¹Ø±ÙŠÙ isOwner ÙƒÙ…ØªØºÙŠØ± Ø¹Ø§Ù…

                // ØªÙ†ÙÙŠØ° Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ø¹Ù†Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø§Ù„Ùƒ
                closeLoginModal(); // ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„Ø¯Ø§Ù„Ø© Ù…ÙˆØ¬ÙˆØ¯Ø©
                showOwnerModal();  // ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„Ø¯Ø§Ù„Ø© Ù…ÙˆØ¬ÙˆØ¯Ø©
                updateNavbar();    // ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„Ø¯Ø§Ù„Ø© Ù…ÙˆØ¬ÙˆØ¯Ø©

                showMainScreen();      // ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„Ø¯Ø§Ù„Ø© Ù…ÙˆØ¬ÙˆØ¯Ø©
                initializeSocket();    // ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„Ø¯Ø§Ù„Ø© Ù…ÙˆØ¬ÙˆØ¯Ø©

                // Ø¥Ø¸Ù‡Ø§Ø± ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ù…Ø§Ù„Ùƒ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ (ØªÙ… Ø¯Ù…Ø¬Ù‡Ø§ Ù…Ø¹ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ø£ØµÙ„ÙŠ Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª)
                alert('ğŸ‰ Ù…Ø±Ø­Ø¨Ø§Ù‹ ÙŠØ§ Ù…Ø§Ù„Ùƒ! ğŸ†'); 
                showNotification('Ù…Ø±Ø­Ø¨Ø§Ù‹ Ù…Ø§Ù„Ùƒ Ø§Ù„Ù…ÙˆÙ‚Ø¹! Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ§Øª ÙƒØ§Ù…Ù„Ø©', 'success'); // ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„Ø¯Ø§Ù„Ø© Ù…ÙˆØ¬ÙˆØ¯Ø©
                return;
            }

            // ===================================
            // ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø¹Ø§Ø¯ÙŠ (Ø¹Ø¨Ø± Ø§Ù„Ù€ API)
            // ===================================
            const response = await fetch('/api/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ email, password })
            });

            const data = await response.json();

            if (response.ok) {
                localStorage.setItem('chatToken', data.token);
                currentUser = data.user;

                // Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¹Ø§Ø¯ÙŠ Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ù…Ù†Ø·Ù‚ Ø§Ù„Ù…Ø§Ù„Ùƒ
                localStorage.setItem('userData', JSON.stringify(data.user)); 

                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© (Ø§ÙØªØ±Ø§Ø¶Ø§Ù‹)
                userCoins = data.user.coins || 2000;
                userLevel = data.user.level || 1;

                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ø¸Ø±
                if (currentUser.isBanned) {
                    // ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø¯Ø§Ù„Ø© showBanScreen Ù…ÙˆØ¬ÙˆØ¯Ø©
                    showBanScreen(currentUser.banReason || 'ØªÙ… Ø­Ø¸Ø±Ùƒ Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹');
                    return;
                }

                // Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù†Ø§Ø¬Ø­
                closeLoginModal(); // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
                showMainScreen();
                initializeSocket();
                loadUserPrivacySettings(); // ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„Ø¯Ø§Ù„Ø© Ù…ÙˆØ¬ÙˆØ¯Ø©
                showNotification('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­', 'success');
            } else {
                // Ø¥Ø¸Ù‡Ø§Ø± Ø®Ø·Ø£ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¹Ø¨Ø± API
                showError(data.error || 'Ø¨ÙŠØ§Ù†Ø§Øª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ØºÙŠØ± ØµØ­ÙŠØ­Ø©');
                alert('âŒ Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ø§Ø·Ø¦Ø©'); // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ù‡Ù†Ø§ Ø£ÙŠØ¶Ø§Ù‹
            }
        } catch (error) {
            console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„:', error);
            showError('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…');
        } finally {
            // Ø¥Ø®ÙØ§Ø¡ Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¯Ø§Ø¦Ù…Ø§Ù‹
            showLoading(false);
        }
    }
// ÙØªØ­ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø§Ù„Ùƒ
function showOwnerModal() {
    if (!currentUser || !currentUser.isOwner) {
        alert('ğŸš« Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ©');
        return;
    }
    document.getElementById('ownerModal').style.display = 'block';
    loadOwnerPanel();
}
// Ø¥ØºÙ„Ø§Ù‚ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø§Ù„Ùƒ
function closeOwnerModal() {
    document.getElementById('ownerModal').style.display = 'none';
}
// ØªØ­Ù…ÙŠÙ„ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø§Ù„Ùƒ
function loadOwnerPanel() {
    document.getElementById('ownerContent').innerHTML = `
        <h3>ğŸ‘‘ Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ Ù…Ø§Ù„Ùƒ!</h3>
        <p>Ù„Ø¯ÙŠÙƒ Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„ÙƒØ§Ù…Ù„ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…</p>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0;">
            <button onclick="manageUsers()" style="padding: 15px; background: #ff1493; color: white; border: none; border-radius: 10px; cursor: pointer; font-size: 16px;">
                ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
            </button>
            <button onclick="manageRanks()" style="padding: 15px; background: #007bff; color: white; border: none; border-radius: 10px; cursor: pointer; font-size: 16px;">
                ğŸ·ï¸ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø±ØªØ¨
            </button>
            <button onclick="systemSettings()" style="padding: 15px; background: #28a745; color: white; border: none; border-radius: 10px; cursor: pointer; font-size: 16px;">
                âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
            </button>
        </div>
        <h4>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†:</h4>
        <div id="usersList"></div>
    `;
    showUsersList();
}
// Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
function showUsersList() {
    const usersList = document.getElementById('usersList');
    const demoUsers = [
        { id: 2, username: 'Ø£Ø­Ù…Ø¯', rank: 'vip', email: 'ahmed@test.com' },
        { id: 3, username: 'ÙØ§Ø·Ù…Ø©', rank: 'gold', email: 'fatima@test.com' },
        { id: 4, username: 'Ø²Ø§Ø¦Ø±', rank: 'visitor', email: 'visitor@test.com' }
    ];
    usersList.innerHTML = demoUsers.map(user => `
        <div style="border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 10px; background: #f9f9f9;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <strong>${user.username}</strong> 
                    <span class="rank-badge" style="background: ${user.rank === 'vip' ? '#ffc107' : user.rank === 'gold' ? '#ffd700' : '#6c757d'}; color: white; padding: 2px 6px; border-radius: 10px;">
                        ${user.rank}
                    </span>
                    <br><small>${user.email}</small>
                </div>
                <div>
                    <button onclick="changeRank(${user.id}, '${user.username}')" style="padding: 5px 10px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 2px;">
                        ØªØºÙŠÙŠØ± Ø±ØªØ¨Ø©
                    </button>
                    <button onclick="removeRank(${user.id}, '${user.username}')" style="padding: 5px 10px; background: #dc3545; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 2px;">
                        Ø¥Ø²Ø§Ù„Ø© Ø±ØªØ¨Ø©
                    </button>
                </div>
            </div>
        </div>
    `).join('');
}
    // ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù…Ø§Ù„Ùƒ
    const OWNER_EMAIL = "njdj9985@mail.com"; // ØºÙŠÙ‘Ø±Ù‡Ø§ Ù„Ø¥ÙŠÙ…ÙŠÙ„Ùƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ

    // ØªØºÙŠÙŠØ± Ø±ØªØ¨Ø©
    function changeRank(userId, username) {
        const currentUserEmail = localStorage.getItem('userEmail');

        // ÙÙ‚Ø· Ø§Ù„Ù…Ø§Ù„Ùƒ ÙŠØ³ØªØ·ÙŠØ¹ ØªØºÙŠÙŠØ± Ø§Ù„Ø±ØªØ¨
        if (currentUserEmail !== OWNER_EMAIL) {
            alert('âŒ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ ØªØºÙŠÙŠØ± Ø§Ù„Ø±ØªØ¨ â€” ÙÙ‚Ø· Ø§Ù„Ù…Ø§Ù„Ùƒ ÙŠØ³ØªØ·ÙŠØ¹ Ø°Ù„Ùƒ');
            return;
        }

        const newRank = prompt(`Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø±ØªØ¨Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù€ ${username}ØŸ (vip, gold, silver, bronze, member, visitor)`);
        if (newRank && ['vip', 'gold', 'silver', 'bronze', 'member', 'visitor'].includes(newRank)) {
            alert(`âœ… ØªÙ… ØªØºÙŠÙŠØ± Ø±ØªØ¨Ø© ${username} Ø¥Ù„Ù‰ ${newRank}`);
            // Ù‡Ù†Ø§ ØªØ¶ÙŠÙ Ø§Ù„ÙƒÙˆØ¯ Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ø±ØªØ¨Ø© ÙÙŠ Ø§Ù„Ù€ Backend
            showUsersList(); // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
        } else {
            alert('âŒ Ø±ØªØ¨Ø© ØºÙŠØ± ØµØ§Ù„Ø­Ø©');
        }
    }

    // Ø¥Ø²Ø§Ù„Ø© Ø±ØªØ¨Ø©
    function removeRank(userId, username) {
        const currentUserEmail = localStorage.getItem('userEmail');

        // ÙÙ‚Ø· Ø§Ù„Ù…Ø§Ù„Ùƒ ÙŠØ³ØªØ·ÙŠØ¹ Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø±ØªØ¨
        if (currentUserEmail !== OWNER_EMAIL) {
            alert('âŒ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø±ØªØ¨ â€” ÙÙ‚Ø· Ø§Ù„Ù…Ø§Ù„Ùƒ ÙŠØ³ØªØ·ÙŠØ¹ Ø°Ù„Ùƒ');
            return;
        }

        if (confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø²Ø§Ù„Ø© Ø±ØªØ¨Ø© ${username}ØŸ`)) {
            alert(`âœ… ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø±ØªØ¨Ø© ${username}`);
            // Ù‡Ù†Ø§ ØªØ¶ÙŠÙ Ø§Ù„ÙƒÙˆØ¯ Ù„Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø±ØªØ¨Ø© ÙÙŠ Ø§Ù„Ù€ Backend
            showUsersList(); // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
        }
    }

// ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„
function updateNavbar() {
    const navbar = document.querySelector('nav, .header, .navbar');
    if (navbar && currentUser) {
        const userInfo = navbar.querySelector('.user-info, .profile');
        if (userInfo) {
            userInfo.innerHTML = `
                <span style="color: ${currentUser.rankInfo.color}; font-weight: bold;">
                    ${currentUser.rankInfo.emoji} ${currentUser.username}
                </span>
                ${currentUser.isOwner ? '<button onclick="showOwnerModal()" style="margin-right: 10px; padding: 5px 10px; background: #ff1493; color: white; border: none; border-radius: 15px; cursor: pointer;">ğŸ‘‘ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</button>' : ''}
            `;
        }
    }
}
// Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
function systemSettings() {
    document.getElementById('ownerContent').innerHTML = `
        <h3>âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
        <p>Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ø§Øª</p>
        <div style="display: flex; flex-direction: column; gap: 10px;">
            <label><input type="checkbox" checked> Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</label>
            <label><input type="checkbox" checked> Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª</label>
            <label><input type="checkbox" checked> Ø±Ø¯ÙˆØ¯ Ø§Ù„ÙØ¹Ù„</label>
            <button onclick="saveSettings()" style="padding: 10px; background: #28a745; color: white; border: none; border-radius: 10px;">Ø­ÙØ¸</button>
        </div>
    `;
}
function saveSettings() {
    alert('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª');
}
// Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
function manageUsers() {
    document.getElementById('ownerContent').innerHTML = `
        <h3>ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h3>
        <p>Ù‚Ø§Ø¦Ù…Ø© ÙƒØ§Ù…Ù„Ø© Ø¨Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</p>
        <div id="usersList"></div>
    `;
    showUsersList();
}
// Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø±ØªØ¨
function manageRanks() {
    document.getElementById('ownerContent').innerHTML = `
        <h3>ğŸ·ï¸ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø±ØªØ¨</h3>
        <p>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±ØªØ¨ Ø§Ù„Ù…ØªØ§Ø­Ø©:</p>
        <ul>
            <li>VIP â­</li>
            <li>Gold ğŸ¥‡</li>
            <li>Silver ğŸ¥ˆ</li>
            <li>Bronze ğŸ¥‰</li>
            <li>Member ğŸ‘¤</li>
            <li>Visitor ğŸ‘‹</li>
        </ul>
    `;
}
// Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
function saveSettings() {
    alert('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!');
}
// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¬Ù„Ø³Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
if (localStorage.getItem('userData')) {
    try {
        currentUser = JSON.parse(localStorage.getItem('userData'));
        if (currentUser.isOwner) {
            updateNavbar();
        }
    } catch (e) {
        console.log('Ø¬Ù„Ø³Ø© Ù…Ù†ØªÙ‡ÙŠØ©');
    }
}
// Ø¥Ø¶Ø§ÙØ© Ø²Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
document.addEventListener('DOMContentLoaded', function() {
    const menu = document.querySelector('.main-menu, nav, .navbar');
    if (menu && !menu.querySelector('#loginBtn')) {
        const loginBtn = document.createElement('button');
        loginBtn.id = 'loginBtn';
        loginBtn.innerHTML = 'ğŸ” Ø¯Ø®ÙˆÙ„';
        loginBtn.style.cssText = 'padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 10px; cursor: pointer;';
        loginBtn.onclick = showLoginModal;
        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø²Ø± ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
        const firstBtn = menu.querySelector('button');
        if (firstBtn) {
            firstBtn.parentNode.insertBefore(loginBtn, firstBtn);
        } else {
            menu.appendChild(loginBtn);
        }
    }
});

// â¬‡â¬‡â¬‡ Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø§Ù„ØªÙŠ Ø·Ù„Ø¨ØªÙ‡Ø§ â¬‡â¬‡â¬‡
function openAppStore() {
    alert('Ø¬Ø§Ø±Ù ÙØªØ­ Ù…ØªØ¬Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚...');
    // Ø³ÙŠØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ù‡Ø°Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹ Ø¨ÙƒÙˆØ¯ Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
}
// â¬†â¬†â¬† Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© â¬†â¬†â¬†
<!-- Footer - ÙŠØ¸Ù‡Ø± Ù„Ù„Ø¬Ù…ÙŠØ¹ -->
<footer class="site-footer">
    <div class="footer-content">
        <p> Ø´Ø§Øª Ø±Ø¹ÙˆÙˆØ¯ Ø§Ù„Ø¶Ù„Ø§Ù… &copy; 2026 | Ù…Ù†ØµØ© Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ Ø§Ù„Ø£ÙˆÙ„Ù‰</p>
        <!-- ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø±ÙˆØ§Ø¨Ø· Ø£Ùˆ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£Ø®Ø±Ù‰ Ù‡Ù†Ø§ -->

    /* Enhanced style.css Ù…Ø¹ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø·Ø§Ø±Ø§Øª Ø§Ù„Ù…ÙØµØ­Ø­ */

/* ===== Ù…ØªØ¬Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ===== */
.app-store-modal {
    max-width: 1200px;
    width: 95%;
    max-height: 90vh;
    overflow-y: auto;
}

.store-content {
    padding: 20px;
}

.store-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
    padding: 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 15px;
    color: white;
}

.user-coins {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 1.2em;
    font-weight: bold;
}

.user-coins i {
    color: #ffd700;
    font-size: 1.4em;
}

.store-tabs {
    display: flex;
    gap: 10px;
}

.store-tab {
    padding: 12px 20px;
    background: rgba(255, 255, 255, 0.2);
    border: none;
    border-radius: 10px;
    color: white;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 8px;
}

.store-tab:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: translateY(-2px);
}

.store-tab.active {
    background: rgba(255, 255, 255, 0.9);
    color: #333;
}

.store-tab-content {
    min-height: 400px;
}

/* ===== Ø§Ù„Ø¥Ø·Ø§Ø±Ø§Øª ===== */
.frames-container {
    margin-top: 20px;
}

.frame-category {
    margin-bottom: 40px;
}

.category-title {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 20px;
    padding: 15px 20px;
    border-radius: 12px;
    font-size: 1.3em;
    font-weight: bold;
}

.owner-title {
    background: linear-gradient(135deg, #ff1493, #ff69b4);
    color: white;
}

.admin-title {
    background: linear-gradient(135deg, #ffd700, #ffed4e);
    color: #333;
}

.prince-title {
    background: linear-gradient(135deg, #9370db, #ba55d3);
    color: white;
}

.frames-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 20px;
    padding: 10px;
}

/* ===== Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¥Ø·Ø§Ø±Ø§Øª ===== */
.frame-card {
    background: white;
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
    overflow: hidden;
    position: relative;
}

.frame-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
}

.frame-card.owner {
    border: 2px solid #ff1493;
    background: linear-gradient(135deg, #fff 0%, #ffe4f1 100%);
}

.frame-card.admin {
    border: 2px solid #ffd700;
    background: linear-gradient(135deg, #fff 0%, #fffacd 100%);
}

.frame-card.prince {
    border: 2px solid #9370db;
    background: linear-gradient(135deg, #fff 0%, #f0e6ff 100%);
}

.frame-preview {
    position: relative;
    text-align: center;
    margin-bottom: 15px;
}

.frame-image {
    position: relative;
    display: inline-block;
    border-radius: 50%;
    padding: 5px;
    background: linear-gradient(45deg, #f0f0f0, #e0e0e0);
}

.owner-frame {
    background: linear-gradient(45deg, #ff1493, #ff69b4, #ff1493);
}

.admin-frame {
    background: linear-gradient(45deg, #ffd700, #ffed4e, #ffd700);
}

.prince-frame {
    background: linear-gradient(45deg, #9370db, #ba55d3, #9370db);
}

.sample-avatar {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    overflow: hidden;
    position: relative;
    z-index: 2;
}

.sample-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.frame-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border-radius: 50%;
    pointer-events: none;
}

.frame-overlay.owner {
    background: radial-gradient(circle, transparent 70%, rgba(255, 20, 147, 0.3) 100%);
}

.frame-overlay.admin {
    background: radial-gradient(circle, transparent 70%, rgba(255, 215, 0, 0.3) 100%);
}

.frame-overlay.prince {
    background: radial-gradient(circle, transparent 70%, rgba(147, 112, 219, 0.3) 100%);
}

.frame-info {
    text-align: center;
}

.frame-name {
    font-size: 1.1em;
    font-weight: bold;
    margin: 10px 0;
    color: #333;
}

.frame-rarity {
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 0.9em;
    font-weight: bold;
    margin: 10px 0;
    display: inline-block;
}

.frame-rarity.owner {
    background: linear-gradient(135deg, #ff1493, #ff69b4);
    color: white;
}

.frame-rarity.admin {
    background: linear-gradient(135deg, #ffd700, #ffed4e);
    color: #333;
}

.frame-rarity.prince {
    background: linear-gradient(135deg, #9370db, #ba55d3);
    color: white;
}

.frame-price {
    font-size: 1.1em;
    font-weight: bold;
    color: #2c3e50;
    margin: 10px 0;
}

.frame-price i {
    color: #ffd700;
    margin-right: 5px;
}

.exclusive-tag {
    background: linear-gradient(135deg, #e74c3c, #c0392b);
    color: white;
    padding: 4px 12px;
    border-radius: 15px;
    font-size: 0.9em;
}

.frame-actions {
    margin-top: 15px;
}

/* ===== Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª ===== */
.btn {
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    width: 100%;
    justify-content: center;
}

.btn-success {
    background: linear-gradient(135deg, #27ae60, #2ecc71);
    color: white;
}

.btn-success:hover {
    background: linear-gradient(135deg, #229954, #27ae60);
    transform: translateY(-2px);
}

.btn-primary {
    background: linear-gradient(135deg, #3498db, #2980b9);
    color: white;
}

.btn-primary:hover {
    background: linear-gradient(135deg, #2980b9, #21618c);
    transform: translateY(-2px);
}

.btn-active {
    background: linear-gradient(135deg, #f39c12, #e67e22);
    color: white;
}

.btn-disabled {
    background: #bdc3c7;
    color: #7f8c8d;
    cursor: not-allowed;
}

.btn-disabled:hover {
    transform: none;
}

/* ===== Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© Ù„Ù„Ø¥Ø·Ø§Ø±Ø§Øª ===== */
@keyframes owner-glow {
    0% {
        box-shadow: 0 0 10px rgba(255, 20, 147, 0.5);
        filter: brightness(1);
    }
    100% {
        box-shadow: 0 0 25px rgba(255, 20, 147, 0.8), 0 0 35px rgba(255, 20, 147, 0.4);
        filter: brightness(1.2);
    }
}

@keyframes admin-shine {
    0% {
        box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        transform: rotate(0deg);
    }
    100% {
        box-shadow: 0 0 25px rgba(255, 215, 0, 0.8), 0 0 35px rgba(255, 215, 0, 0.4);
        transform: rotate(5deg);
    }
}

@keyframes prince-sparkle {
    0% {
        box-shadow: 0 0 10px rgba(147, 112, 219, 0.5);
        filter: saturate(1);
    }
    100% {
        box-shadow: 0 0 25px rgba(147, 112, 219, 0.8), 0 0 35px rgba(147, 112, 219, 0.4);
        filter: saturate(1.3);
    }
}

@keyframes golden-glow {
    0% { 
        box-shadow: 0 0 5px #ffd700; 
        transform: scale(1);
    }
    100% { 
        box-shadow: 0 0 20px #ffd700, 0 0 30px #ffd700; 
        transform: scale(1.02);
    }
}

@keyframes royal-pulse {
    0% { 
        transform: scale(1);
        opacity: 1;
    }
    50% { 
        transform: scale(1.05);
        opacity: 0.8;
    }
    100% { 
        transform: scale(1);
        opacity: 1;
    }
}

@keyframes dragon-fire {
    0% { 
        filter: hue-rotate(0deg) saturate(1);
        transform: rotate(0deg);
    }
    25% { 
        filter: hue-rotate(90deg) saturate(1.2);
    }
    50% { 
        filter: hue-rotate(180deg) saturate(1.4);
        transform: rotate(2deg);
    }
    75% { 
        filter: hue-rotate(270deg) saturate(1.2);
    }
    100% { 
        filter: hue-rotate(360deg) saturate(1);
        transform: rotate(0deg);
    }
}

/* ===== Ù…Ø¤Ø´Ø± Ø§Ù„ØªÙØ¹ÙŠÙ„ ===== */
.active-indicator {
    position: absolute;
    top: -5px;
    right: -5px;
    background: linear-gradient(135deg, #27ae60, #2ecc71);
    color: white;
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 0.8em;
    font-weight: bold;
    z-index: 10;
    animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

/* ===== Ù‚Ø³Ù… Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª ===== */
.my-items-empty {
    text-align: center;
    padding: 60px 20px;
    color: #7f8c8d;
}

.my-items-empty i {
    font-size: 4em;
    margin-bottom: 20px;
    opacity: 0.5;
}

.my-items-container h3 {
    margin-bottom: 30px;
    color: #2c3e50;
    text-align: center;
}

.frame-card.owned {
    position: relative;
}

.frame-card.owned::before {
    content: "Ù…Ù…Ù„ÙˆÙƒ";
    position: absolute;
    top: 10px;
    left: 10px;
    background: rgba(39, 174, 96, 0.9);
    color: white;
    padding: 4px 8px;
    border-radius: 8px;
    font-size: 0.8em;
    font-weight: bold;
    z-index: 5;
}

/* ===== Ù‚Ø³Ù… Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ± ===== */
.coming-soon {
    text-align: center;
    padding: 60px 20px;
    color: #7f8c8d;
}

.coming-soon i {
    font-size: 3em;
    margin-bottom: 20px;
    color: #bdc3c7;
}

.decorations-container {
    text-align: center;
    padding: 40px 20px;
}

/* ===== Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ ===== */
.toast-container {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 10000;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.toast {
    padding: 15px 20px;
    border-radius: 8px;
    color: white;
    font-weight: bold;
    min-width: 300px;
    animation: slideIn 0.3s ease-out, fadeOut 0.3s ease-out 2.7s;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.toast-success {
    background: linear-gradient(135deg, #27ae60, #2ecc71);
}

.toast-error {
    background: linear-gradient(135deg, #e74c3c, #c0392b);
}

.toast-info {
    background: linear-gradient(135deg, #3498db, #2980b9);
}

@keyframes slideIn {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes fadeOut {
    from {
        opacity: 1;
    }
    to {
        opacity: 0;
        transform: translateX(100%);
    }
}

/* ===== Ø¥Ø·Ø§Ø±Ø§Øª Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ÙÙŠ Ø§Ù„Ø´Ø§Øª ===== */
.frame-owner img,
.frame-owner .user-avatar-mini {
    border: 3px solid #ff1493 !important;
    animation: owner-glow 2s ease-in-out infinite alternate;
}

.frame-admin img,
.frame-admin .user-avatar-mini {
    border: 3px solid #ffd700 !important;
    animation: admin-shine 1.5s ease-in-out infinite alternate;
}

.frame-prince img,
.frame-prince .user-avatar-mini {
    border: 3px solid #9370db !important;
    animation: prince-sparkle 2s ease-in-out infinite alternate;
}

/* ===== ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© ===== */
.animated-frame[data-animation="golden-glow"] {
    animation: golden-glow 2s ease-in-out infinite alternate;
}

.animated-frame[data-animation="royal-pulse"] {
    animation: royal-pulse 1.5s ease-in-out infinite;
}

.animated-frame[data-animation="dragon-fire"] {
    animation: dragon-fire 3s linear infinite;
}

.animated-frame[data-animation="silver-shine"] {
    animation: admin-shine 1.5s ease-in-out infinite alternate;
}

.animated-frame[data-animation="power-glow"] {
    animation: power-glow 1.8s ease-in-out infinite;
}

.animated-frame[data-animation="prince-gold"] {
    animation: prince-sparkle 2s ease-in-out infinite alternate;
}

@keyframes power-glow {
    0% {
        box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
    }
    50% {
        box-shadow: 0 0 20px rgba(0, 123, 255, 0.8), 0 0 30px rgba(0, 123, 255, 0.3);
    }
    100% {
        box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
    }
}
    <!-- Ù…ÙˆØ¯Ø§Ù„ Ù…ØªØ¬Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ø¹ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø·Ø§Ø±Ø§Øª -->
    <div id="appStoreModal" class="modal">
        <div class="modal-content app-store-modal">
            <div class="modal-header">
                <h2>ğŸª Ù…ØªØ¬Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</h2>
                <button class="close-btn" onclick="closeAppStore()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="store-header">
                <div class="user-coins">
                    <i class="fas fa-coins"></i>
                    <span id="userCoinsDisplay">2000</span>
                    <span>Ù†Ù‚Ø·Ø©</span>
                </div>

                <div class="store-tabs">
                    <button class="store-tab active" onclick="switchStoreTab('frames')">
                        <i class="fas fa-crown"></i> Ø§Ù„Ø¥Ø·Ø§Ø±Ø§Øª
                    </button>
                    <button class="store-tab" onclick="switchStoreTab('gifts')">
                        <i class="fas fa-gift"></i> Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§
                    </button>
                    <button class="store-tab" onclick="switchStoreTab('decorations')">
                        <i class="fas fa-palette"></i> Ø§Ù„Ø²Ø®Ø§Ø±Ù
                    </button>
                    <button class="store-tab" onclick="switchStoreTab('myItems')">
                        <i class="fas fa-shopping-bag"></i> Ù…Ø´ØªØ±ÙŠØ§ØªÙŠ
                    </button>
                </div>
            </div>

            <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø¥Ø·Ø§Ø±Ø§Øª -->
            <div id="storeFramesTab" class="store-tab-content active">
                <!-- Ø¥Ø·Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø§Ù„Ùƒ -->
                <div class="frame-category">
                    <h3 class="category-title owner-title">
                        <i class="fas fa-dragon"></i> Ø¥Ø·Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø§Ù„Ùƒ
                    </h3>
                    <div class="frames-grid" id="ownerFramesGrid">
                        <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                    </div>
                </div>
        <!-- Ø¥Ø·Ø§Ø±Ø§Øª Ø£Ø³Ø·ÙˆØ±ÙŠØ© - NEW -->
        <div class="frame-category">
            <h3 class="category-title legendary-title">
                <i class="fas fa-star"></i> Ø¥Ø·Ø§Ø±Ø§Øª Ø£Ø³Ø·ÙˆØ±ÙŠØ©
            </h3>
            <div class="frames-grid" id="legendaryFramesGrid">
                <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
            </div>
        </div>
                <!-- Ø¥Ø·Ø§Ø±Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© -->
                <div class="frame-category">
                    <h3 class="category-title admin-title">
                        <i class="fas fa-shield-alt"></i> Ø¥Ø·Ø§Ø±Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
                    </h3>
                    <div class="frames-grid" id="adminFramesGrid">
                        <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                    </div>
                </div>

                <!-- Ø¥Ø·Ø§Ø±Ø§Øª Ø§Ù„Ø¨Ø±Ù†Ø³ -->
                <div class="frame-category">
                    <h3 class="category-title prince-title">
                        <i class="fas fa-gem"></i> Ø¥Ø·Ø§Ø±Ø§Øª Ø§Ù„Ø¨Ø±Ù†Ø³
                    </h3>
                    <div class="frames-grid" id="princeFramesGrid">
                        <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                    </div>
                </div>
            </div>

            <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§ -->
            <div id="storeGiftsTab" class="store-tab-content">
                <div class="coming-soon">
                    <i class="fas fa-gift"></i>
                    <h3>Ù‚Ø±ÙŠØ¨Ø§Ù‹...</h3>
                    <p>Ù†Ø¸Ø§Ù… Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§ Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±</p>
                </div>
            </div>

            <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø²Ø®Ø§Ø±Ù -->
            <div id="storeDecorationsTab" class="store-tab-content">
                <div class="coming-soon">
                    <i class="fas fa-palette"></i>
                    <h3>Ù‚Ø±ÙŠØ¨Ø§Ù‹...</h3>
                    <p>Ø²Ø®Ø§Ø±Ù Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±</p>
                </div>
            </div>

            <!-- ØªØ¨ÙˆÙŠØ¨ Ù…Ø´ØªØ±ÙŠØ§ØªÙŠ -->
            <div id="storeMyItemsTab" class="store-tab-content">
                <div class="my-items-container">
                    <h3>Ø¥Ø·Ø§Ø±Ø§ØªÙŠ Ø§Ù„Ù…Ù…Ù„ÙˆÙƒØ©</h3>
                    <div class="frames-grid" id="myFramesGrid">
                        <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                    </div>
                </div>
            </div>
        </div>
    </div>

/* ===== Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ù„Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ø­Ù…ÙˆÙ„Ø© ===== */
@media (max-width: 768px) {
    .frames-grid {
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 15px;
    }
    
    .store-header {
        flex-direction: column;
        gap: 20px;
        text-align: center;
    }
    
    .store-tabs {
        flex-wrap: wrap;
        justify-content: center;
    }
    
    .app-store-modal {
        width: 98%;
        max-height: 95vh;
    }
    
    .toast {
        min-width: 250px;
    }
    
    .toast-container {
        right: 10px;
        left: 10px;
    }
}

@media (max-width: 480px) {
    .frames-grid {
        grid-template-columns: 1fr;
    }
    
    .store-tab {
        padding: 8px 16px;
        font-size: 0.9em;
    }
    
    .frame-card {
        padding: 15px;
    }
}
    </div>
<!-- Footer - ÙŠØ¸Ù‡Ø± Ù„Ù„Ø¬Ù…ÙŠØ¹ -->
<footer class="site-footer">
    <div class="footer-content">
        <p> Ø´Ø§Øª Ø±Ø¹ÙˆÙˆØ¯ Ø§Ù„Ø¶Ù„Ø§Ù…&copy; 2026 | Ù…Ù†ØµØ© Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ Ø§Ù„Ø£ÙˆÙ„Ù‰</p>
    </div>
</footer>

<script src="/socket.io/socket.io.js"></script>
<script src="script.js"></script>
    <!-- Ù…ÙˆØ¯Ø§Ù„ Ù…ØªØ¬Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ø¹ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø·Ø§Ø±Ø§Øª -->

            <!-- Ù…ÙˆØ¯Ø§Ù„ Ù…ØªØ¬Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ø¹ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø·Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© Ø§Ù„ÙØ®Ù…Ø© -->
            <div id="appStoreModal" class="modal">
                <div class="modal-content app-store-modal">
                    <div class="modal-header">
                        <h2>ğŸª Ù…ØªØ¬Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</h2>
                        <button class="close-btn" onclick="closeAppStore()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>

                    <div class="store-header">
                        <div class="user-coins">
                            <i class="fas fa-coins"></i>
                            <span id="userCoinsDisplay">2000</span>
                            <span>Ù†Ù‚Ø·Ø©</span>
                        </div>

                        <div class="store-tabs">
                            <button class="store-tab active" onclick="switchStoreTab('frames')">
                                <i class="fas fa-crown"></i> Ø§Ù„Ø¥Ø·Ø§Ø±Ø§Øª
                            </button>
                            <button class="store-tab" onclick="switchStoreTab('gifts')">
                                <i class="fas fa-gift"></i> Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§
                            </button>
                            <button class="store-tab" onclick="switchStoreTab('decorations')">
                                <i class="fas fa-palette"></i> Ø§Ù„Ø²Ø®Ø§Ø±Ù
                            </button>
                            <button class="store-tab" onclick="switchStoreTab('myItems')">
                                <i class="fas fa-shopping-bag"></i> Ù…Ø´ØªØ±ÙŠØ§ØªÙŠ
                            </button>
                        </div>
                    </div>

                    <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø¥Ø·Ø§Ø±Ø§Øª -->
                    <div id="storeFramesTab" class="store-tab-content active">
                        <!-- Ø¥Ø·Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø§Ù„Ùƒ -->
                        <div class="frame-category">
                            <h3 class="category-title owner-title">
                                <i class="fas fa-dragon"></i> Ø¥Ø·Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø§Ù„Ùƒ Ø§Ù„Ø­ØµØ±ÙŠØ©
                            </h3>
                            <div class="frames-grid" id="ownerFramesGrid">
                                <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                            </div>
                        </div>

                        <!-- Ø¥Ø·Ø§Ø±Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© -->
                        <div class="frame-category">
                            <h3 class="category-title admin-title">
                                <i class="fas fa-shield-alt"></i> Ø¥Ø·Ø§Ø±Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
                            </h3>
                            <div class="frames-grid" id="adminFramesGrid">
                                <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                            </div>
                        </div>

                        <!-- Ø¥Ø·Ø§Ø±Ø§Øª Ø§Ù„Ø¨Ø±Ù†Ø³ -->
                        <div class="frame-category">
                            <h3 class="category-title prince-title">
                                <i class="fas fa-gem"></i> Ø¥Ø·Ø§Ø±Ø§Øª Ø§Ù„Ø¨Ø±Ù†Ø³
                            </h3>
                            <div class="frames-grid" id="princeFramesGrid">
                                <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                            </div>
                        </div>

                        <!-- Ø¥Ø·Ø§Ø±Ø§Øª Ø£Ø³Ø·ÙˆØ±ÙŠØ© -->
                        <div class="frame-category">
                            <h3 class="category-title owner-title">
                                <i class="fas fa-trophy"></i> Ø¥Ø·Ø§Ø±Ø§Øª Ø£Ø³Ø·ÙˆØ±ÙŠØ©
                            </h3>
                            <div class="frames-grid" id="legendaryFramesGrid">
                                <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                            </div>
                        </div>
                    </div>

                    <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§ -->
                    <div id="storeGiftsTab" class="store-tab-content">
                        <div class="coming-soon">
                            <i class="fas fa-gift"></i>
                            <h3>Ù‚Ø±ÙŠØ¨Ø§Ù‹...</h3>
                            <p>Ù†Ø¸Ø§Ù… Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§ Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±</p>
                        </div>
                    </div>

                    <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø²Ø®Ø§Ø±Ù -->
                    <div id="storeDecorationsTab" class="store-tab-content">
                        <div class="coming-soon">
                            <i class="fas fa-palette"></i>
                            <h3>Ù‚Ø±ÙŠØ¨Ø§Ù‹...</h3>
                            <p>Ø²Ø®Ø§Ø±Ù Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±</p>
                        </div>
                    </div>

                    <!-- ØªØ¨ÙˆÙŠØ¨ Ù…Ø´ØªØ±ÙŠØ§ØªÙŠ -->
                    <div id="storeMyItemsTab" class="store-tab-content">
                        <div class="my-items-container">
                            <h3 style="color: white; text-align: center; margin-bottom: 30px; font-size: 24px;">
                                <i class="fas fa-shopping-bag"></i> Ø¥Ø·Ø§Ø±Ø§ØªÙŠ Ø§Ù„Ù…Ù…Ù„ÙˆÙƒØ©
                            </h3>
                            <div class="frames-grid" id="myFramesGrid">
                                <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <script>
            function startDiceGame() {
                // Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø´Ø§Øª
                const chatContainer = document.querySelector('.chat-messages');
                if (!chatContainer) {
                    console.error("Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¹Ù†ØµØ± Ø§Ù„Ø´Ø§Øª (.chat-messages)");
                    return;
                }

                // Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø³Ø§Ù„Ø© "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±Ù…ÙŠ"
                const loadingMsg = document.createElement('div');
                loadingMsg.className = 'message system';
                loadingMsg.innerHTML = '<p style="text-align:center; color:#007bff;">ğŸ² Ø¬Ø§Ø±ÙŠ Ø±Ù…ÙŠ Ø§Ù„Ù†Ø±Ø¯...</p>';
                chatContainer.appendChild(loadingMsg);
                chatContainer.scrollTop = chatContainer.scrollHeight;

                // Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØªÙŠÙ†ØŒ Ù†Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©
                setTimeout(() => {
                    const result = Math.floor(Math.random() * 6) + 1; // Ø±Ù‚Ù… Ù…Ù† 1 Ø¥Ù„Ù‰ 6

                    if (result === 6) {
                        loadingMsg.innerHTML = `
                            <p style="text-align:center; color:#d4af37; font-size:16px;">
                                ğŸ† <strong>Ø§Ù„Ø±Ù‚Ù… 6!</strong><br>
                                ğŸ‰ Ø§Ù†ØªÙ Ø§Ù„ÙØ§Ø¦Ø²! ğŸ‰
                            </p>
                        `;
                    } else {
                        loadingMsg.innerHTML = `
                            <p style="text-align:center; color:#ff0000;">
                                ğŸ² Ø§Ù„Ø±Ù†Ø¯ Ù‚Ø§Ù„: <strong>${result}</strong>
                            </p>
                        `;
                    }

                    chatContainer.scrollTop = chatContainer.scrollHeight;
                }, 2000);
            }
            </script>

            <style>
            /* ØªÙ†Ø³ÙŠÙ‚ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… (Ø§Ù„Ø±Ù†Ø¯) */
            .message.system {
                background: #f8f9fa;
                padding: 10px;
                margin: 5px 0;
                border-radius: 8px;
                font-size: 14px;
                line-height: 1.4;
            }
            </style>
                            <!DOCTYPE html>
                            <html lang="ar" dir="rtl">
                            <head>
                                <meta charset="UTF-8">
                                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                                <title>Ù„Ø¹Ø¨Ø© ÙƒÙ„Ù…Ø§Øª ÙƒØ±Ø§Ø´ ğŸ¯</title>
                                <style>
                                    /* Ù†Ø§ÙØ°Ø© Ù„Ø¹Ø¨Ø© ÙƒÙ„Ù…Ø§Øª ÙƒØ±Ø§Ø´ */
                                    .kelmat-modal {
                                        display: none;
                                        position: fixed;
                                        top: 0;
                                        left: 0;
                                        width: 100%;
                                        height: 100%;
                                        background: rgba(0, 0, 0, 0.9);
                                        z-index: 10000;
                                        justify-content: center;
                                        align-items: center;
                                    }

                                    .kelmat-modal.show {
                                        display: flex;
                                    }

                                    .kelmat-game {
                                        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                                        border-radius: 24px;
                                        padding: 30px;
                                        max-width: 500px;
                                        width: 90%;
                                        box-shadow: 0 25px 80px rgba(0, 0, 0, 0.5);
                                        animation: slideUp 0.4s ease;
                                        max-height: 90vh;
                                        overflow-y: auto;
                                        position: relative;
                                    }

                                    @keyframes slideUp {
                                        from {
                                            transform: translateY(100px);
                                            opacity: 0;
                                        }
                                        to {
                                            transform: translateY(0);
                                            opacity: 1;
                                        }
                                    }

                                    @keyframes shake {
                                        0%, 100% { transform: translateX(0); }
                                        25% { transform: translateX(-15px); }
                                        50% { transform: translateX(15px); }
                                        75% { transform: translateX(-15px); }
                                    }

                                    .shake-animation {
                                        animation: shake 0.5s ease;
                                    }

                                    .kelmat-header {
                                        text-align: center;
                                        margin-bottom: 25px;
                                    }

                                    .kelmat-title {
                                        font-size: 36px;
                                        font-weight: bold;
                                        color: #fff;
                                        text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.3);
                                        margin-bottom: 5px;
                                    }

                                    .kelmat-close {
                                        position: absolute;
                                        top: 15px;
                                        right: 15px;
                                        background: rgba(255, 255, 255, 0.2);
                                        border: none;
                                        color: white;
                                        font-size: 28px;
                                        width: 45px;
                                        height: 45px;
                                        border-radius: 50%;
                                        cursor: pointer;
                                        transition: all 0.3s;
                                        display: flex;
                                        align-items: center;
                                        justify-content: center;
                                        font-weight: bold;
                                    }

                                    .kelmat-close:hover {
                                        background: rgba(255, 255, 255, 0.3);
                                        transform: rotate(90deg);
                                    }

                                    .kelmat-stats {
                                        display: grid;
                                        grid-template-columns: repeat(3, 1fr);
                                        gap: 15px;
                                        margin-bottom: 25px;
                                    }

                                    .stat-card {
                                        background: rgba(255, 255, 255, 0.15);
                                        backdrop-filter: blur(10px);
                                        padding: 18px;
                                        border-radius: 15px;
                                        text-align: center;
                                        border: 2px solid rgba(255, 255, 255, 0.2);
                                    }

                                    .stat-label {
                                        color: rgba(255, 255, 255, 0.8);
                                        font-size: 13px;
                                        margin-bottom: 8px;
                                        font-weight: 600;
                                    }

                                    .stat-value {
                                        color: #fff;
                                        font-size: 28px;
                                        font-weight: bold;
                                        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
                                    }

                                    .game-board {
                                        background: rgba(255, 255, 255, 0.98);
                                        border-radius: 20px;
                                        padding: 30px;
                                        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
                                    }

                                    .category-badge {
                                        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
                                        color: white;
                                        padding: 15px;
                                        border-radius: 15px;
                                        text-align: center;
                                        font-size: 20px;
                                        font-weight: bold;
                                        margin-bottom: 25px;
                                        box-shadow: 0 8px 20px rgba(245, 87, 108, 0.4);
                                    }

                                    .word-boxes {
                                        display: flex;
                                        justify-content: center;
                                        gap: 10px;
                                        margin-bottom: 30px;
                                        flex-wrap: wrap;
                                    }

                                    .letter-box {
                                        width: 50px;
                                        height: 50px;
                                        background: #f0f0f0;
                                        border: 3px solid #ddd;
                                        border-radius: 12px;
                                        display: flex;
                                        align-items: center;
                                        justify-content: center;
                                        font-size: 24px;
                                        font-weight: bold;
                                        color: #666;
                                        transition: all 0.3s;
                                    }

                                    .letter-box.filled {
                                        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                                        border-color: #667eea;
                                        color: #fff;
                                        transform: scale(1.15);
                                        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
                                    }

                                    .letter-box.correct {
                                        background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
                                        border-color: #11998e;
                                        color: #fff;
                                        animation: popSuccess 0.5s ease;
                                    }

                                    .letter-box.wrong {
                                        background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);
                                        border-color: #eb3349;
                                        color: #fff;
                                    }

                                    @keyframes popSuccess {
                                        0% { transform: scale(1); }
                                        50% { transform: scale(1.3); }
                                        100% { transform: scale(1.15); }
                                    }

                                    .available-letters {
                                        display: flex;
                                        flex-wrap: wrap;
                                        justify-content: center;
                                        gap: 12px;
                                        margin-bottom: 25px;
                                    }

                                    .letter-btn {
                                        width: 55px;
                                        height: 55px;
                                        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                                        border: none;
                                        border-radius: 12px;
                                        color: white;
                                        font-size: 24px;
                                        font-weight: bold;
                                        cursor: pointer;
                                        transition: all 0.3s;
                                        box-shadow: 0 6px 15px rgba(102, 126, 234, 0.3);
                                    }

                                    .letter-btn:hover:not(:disabled) {
                                        transform: translateY(-5px) scale(1.1);
                                        box-shadow: 0 10px 25px rgba(102, 126, 234, 0.5);
                                    }

                                    .letter-btn:active:not(:disabled) {
                                        transform: translateY(-2px) scale(1.05);
                                    }

                                    .letter-btn:disabled {
                                        background: #ccc;
                                        cursor: not-allowed;
                                        opacity: 0.4;
                                        transform: scale(0.9);
                                    }

                                    .game-buttons {
                                        display: grid;
                                        grid-template-columns: repeat(3, 1fr);
                                        gap: 12px;
                                        margin-bottom: 20px;
                                    }

                                    .game-btn {
                                        padding: 15px;
                                        border: none;
                                        border-radius: 12px;
                                        font-size: 16px;
                                        font-weight: bold;
                                        cursor: pointer;
                                        transition: all 0.3s;
                                        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
                                        display: flex;
                                        align-items: center;
                                        justify-content: center;
                                        gap: 8px;
                                    }

                                    .hint-btn {
                                        background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
                                        color: #333;
                                    }

                                    .clear-btn {
                                        background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
                                        color: #333;
                                    }

                                    .check-btn {
                                        background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
                                        color: #333;
                                    }

                                    .game-btn:hover {
                                        transform: translateY(-3px);
                                        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
                                    }

                                    .game-btn:active {
                                        transform: translateY(-1px);
                                    }

                                    .game-message {
                                        padding: 15px;
                                        border-radius: 12px;
                                        text-align: center;
                                        font-weight: bold;
                                        font-size: 16px;
                                        display: none;
                                        animation: fadeInUp 0.3s ease;
                                    }

                                    .game-message.show {
                                        display: block;
                                    }

                                    .game-message.success {
                                        background: linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%);
                                        color: #155724;
                                        border: 3px solid #28a745;
                                    }

                                    .game-message.error {
                                        background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
                                        color: #721c24;
                                        border: 3px solid #dc3545;
                                    }

                                    @keyframes fadeInUp {
                                        from {
                                            opacity: 0;
                                            transform: translateY(20px);
                                        }
                                        to {
                                            opacity: 1;
                                            transform: translateY(0);
                                        }
                                    }

                                    /* Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
                                    @media (max-width: 600px) {
                                        .kelmat-game {
                                            padding: 20px;
                                        }

                                        .letter-box {
                                            width: 40px;
                                            height: 40px;
                                            font-size: 20px;
                                        }

                                        .letter-btn {
                                            width: 45px;
                                            height: 45px;
                                            font-size: 20px;
                                        }
                                    }
                                </style>
                            </head>
                            <body>

                            <!-- Ù†Ø§ÙØ°Ø© Ù„Ø¹Ø¨Ø© ÙƒÙ„Ù…Ø§Øª ÙƒØ±Ø§Ø´ -->
                            <div class="kelmat-modal" id="kelmatModal">
                                <div class="kelmat-game">
                                    <button class="kelmat-close" onclick="closeKelmatGame()">Ã—</button>

                                    <div class="kelmat-header">
                                        <div class="kelmat-title">ğŸ¯ ÙƒÙ„Ù…Ø§Øª ÙƒØ±Ø§Ø´</div>
                                    </div>

                                    <div class="kelmat-stats">
                                        <div class="stat-card">
                                            <div class="stat-label">Ø§Ù„Ù…Ø±Ø­Ù„Ø©</div>
                                            <div class="stat-value" id="kelmatLevel">1</div>
                                        </div>
                                        <div class="stat-card">
                                            <div class="stat-label">Ø§Ù„Ù†Ù‚Ø§Ø·</div>
                                            <div class="stat-value" id="kelmatScore">0</div>
                                        </div>
                                        <div class="stat-card">
                                            <div class="stat-label">ØªÙ„Ù…ÙŠØ­Ø§Øª</div>
                                            <div class="stat-value" id="kelmatHints">3</div>
                                        </div>
                                    </div>

                                    <div class="game-board">
                                        <div class="category-badge" id="kelmatCategory">ÙÙˆØ§ÙƒÙ‡ ğŸ</div>

                                        <div class="word-boxes" id="wordBoxes"></div>

                                        <div class="available-letters" id="availableLetters"></div>

                                        <div class="game-buttons">
                                            <button class="game-btn hint-btn" onclick="useKelmatHint()">
                                                ğŸ’¡ ØªÙ„Ù…ÙŠØ­
                                            </button>
                                            <button class="game-btn clear-btn" onclick="clearKelmatAnswer()">
                                                ğŸ”„ Ù…Ø³Ø­
                                            </button>
                                            <button class="game-btn check-btn" onclick="checkKelmatAnswer()">
                                                âœ“ ØªØ­Ù‚Ù‚
                                            </button>
                                        </div>

                                        <div class="game-message" id="kelmatMessage"></div>
                                    </div>
                                </div>
                            </div>

                            <script>
                            // Ù„Ø¹Ø¨Ø© ÙƒÙ„Ù…Ø§Øª ÙƒØ±Ø§Ø´
                            const kelmatGame = {
                                currentLevel: 0,
                                score: 0,
                                hints: 3,
                                userAnswer: [],
                                usedLetters: [],
                                levels: [
                                    { category: 'ÙÙˆØ§ÙƒÙ‡ ğŸ', word: 'ØªÙØ§Ø­', letters: ['Øª', 'Ù', 'Ø§', 'Ø­', 'Ø¨', 'Ø±', 'Ù†', 'Ù…'] },
                                    { category: 'Ø­ÙŠÙˆØ§Ù†Ø§Øª ğŸ¦', word: 'Ø£Ø³Ø¯', letters: ['Ø£', 'Ø³', 'Ø¯', 'Ù', 'ÙŠ', 'Ù„', 'Ù‚', 'Ø·'] },
                                    { category: 'Ù…Ø¯Ù† ğŸ™ï¸', word: 'Ø¯Ø¨ÙŠ', letters: ['Ø¯', 'Ø¨', 'ÙŠ', 'Ù‚', 'Ø·', 'Ø±', 'Ùƒ', 'Ø²'] },
                                    { category: 'Ø£Ù„ÙˆØ§Ù† ğŸ¨', word: 'Ø£Ø­Ù…Ø±', letters: ['Ø£', 'Ø­', 'Ù…', 'Ø±', 'Ø²', 'Ù', 'Ø®', 'Ø¶'] },
                                    { category: 'Ù…Ù‡Ù† ğŸ‘¨â€âš•ï¸', word: 'Ø·Ø¨ÙŠØ¨', letters: ['Ø·', 'Ø¨', 'ÙŠ', 'Ø¨', 'Ù†', 'Ø¬', 'Ù…', 'Ù‡'] },
                                    { category: 'Ø±ÙŠØ§Ø¶Ø© âš½', word: 'ÙƒØ±Ø©', letters: ['Ùƒ', 'Ø±', 'Ø©', 'Ù‚', 'Ø¯', 'Ù…', 'Ø³', 'Ù„'] },
                                    { category: 'Ø·Ø¹Ø§Ù… ğŸ•', word: 'Ø¨ÙŠØªØ²Ø§', letters: ['Ø¨', 'ÙŠ', 'Øª', 'Ø²', 'Ø§', 'Ø®', 'Ø±', 'Ø¬'] },
                                    { category: 'Ø£Ø¬Ù‡Ø²Ø© ğŸ“±', word: 'Ù‡Ø§ØªÙ', letters: ['Ù‡', 'Ø§', 'Øª', 'Ù', 'Ùƒ', 'Ù…', 'Ø¨', 'ÙŠ'] },
                                    { category: 'Ø·Ø¨ÙŠØ¹Ø© â˜€ï¸', word: 'Ø´Ù…Ø³', letters: ['Ø´', 'Ù…', 'Ø³', 'Ù‚', 'Ù†', 'Ø±', 'Ø²', 'Ù„'] },
                                    { category: 'Ø¹Ø§Ø¦Ù„Ø© ğŸ‘¨â€ğŸ‘©â€ğŸ‘§', word: 'Ø£Ø¨', letters: ['Ø£', 'Ø¨', 'Ù…', 'Ø®', 'Øª', 'Ø¹', 'Ùˆ', 'Ù†'] }
                                ]
                            };

                            function openKelmatKarash() {
                                document.getElementById('kelmatModal').classList.add('show');
                                loadKelmatLevel();
                            }

                            function loadKelmatLevel() {
                                const level = kelmatGame.levels[kelmatGame.currentLevel];
                                if (!level) {
                                    showKelmatMessage('ğŸ† Ù…Ø¨Ø±ÙˆÙƒ! Ø£Ù†Ù‡ÙŠØª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø±Ø§Ø­Ù„!', 'success');
                                    setTimeout(() => {
                                        kelmatGame.currentLevel = 0;
                                        kelmatGame.score = 0;
                                        kelmatGame.hints = 3;
                                        loadKelmatLevel();
                                    }, 3000);
                                    return;
                                }

                                kelmatGame.userAnswer = [];
                                kelmatGame.usedLetters = [];

                                document.getElementById('kelmatLevel').textContent = kelmatGame.currentLevel + 1;
                                document.getElementById('kelmatScore').textContent = kelmatGame.score;
                                document.getElementById('kelmatHints').textContent = kelmatGame.hints;
                                document.getElementById('kelmatCategory').textContent = level.category;

                                // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª
                                const boxesDiv = document.getElementById('wordBoxes');
                                boxesDiv.innerHTML = '';
                                for (let i = 0; i < level.word.length; i++) {
                                    const box = document.createElement('div');
                                    box.className = 'letter-box';
                                    box.id = `kelmat-box-${i}`;
                                    boxesDiv.appendChild(box);
                                }

                                // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø±ÙˆÙ
                                const lettersDiv = document.getElementById('availableLetters');
                                lettersDiv.innerHTML = '';
                                level.letters.forEach((letter, index) => {
                                    const btn = document.createElement('button');
                                    btn.className = 'letter-btn';
                                    btn.textContent = letter;
                                    btn.id = `kelmat-letter-${index}`;
                                    btn.onclick = () => selectKelmatLetter(letter, index);
                                    lettersDiv.appendChild(btn);
                                });

                                hideKelmatMessage();
                            }

                            function selectKelmatLetter(letter, index) {
                                const level = kelmatGame.levels[kelmatGame.currentLevel];

                                if (kelmatGame.usedLetters.includes(index) || 
                                    kelmatGame.userAnswer.length >= level.word.length) {
                                    return;
                                }

                                kelmatGame.userAnswer.push(letter);
                                kelmatGame.usedLetters.push(index);

                                const btn = document.getElementById(`kelmat-letter-${index}`);
                                btn.disabled = true;

                                const boxIndex = kelmatGame.userAnswer.length - 1;
                                const box = document.getElementById(`kelmat-box-${boxIndex}`);
                                box.textContent = letter;
                                box.classList.add('filled');

                                hideKelmatMessage();
                            }

                            function clearKelmatAnswer() {
                                kelmatGame.usedLetters.forEach(index => {
                                    const btn = document.getElementById(`kelmat-letter-${index}`);
                                    if (btn) btn.disabled = false;
                                });

                                kelmatGame.userAnswer = [];
                                kelmatGame.usedLetters = [];

                                const boxes = document.querySelectorAll('.letter-box');
                                boxes.forEach(box => {
                                    box.textContent = '';
                                    box.classList.remove('filled', 'correct', 'wrong');
                                });

                                hideKelmatMessage();
                            }

                            function checkKelmatAnswer() {
                                const level = kelmatGame.levels[kelmatGame.currentLevel];
                                const answer = kelmatGame.userAnswer.join('');
                                const boxes = document.querySelectorAll('.letter-box');

                                if (answer === level.word) {
                                    boxes.forEach(box => {
                                        box.classList.remove('filled');
                                        box.classList.add('correct');
                                    });

                                    kelmatGame.score += 10;
                                    showKelmatMessage('ğŸ‰ Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! Ø±Ø§Ø¦Ø¹!', 'success');

                                    setTimeout(() => {
                                        kelmatGame.currentLevel++;
                                        loadKelmatLevel();
                                    }, 1500);
                                } else {
                                    boxes.forEach(box => {
                                        if (box.classList.contains('filled')) {
                                            box.classList.add('wrong');
                                        }
                                    });

                                    const boxesDiv = document.getElementById('wordBoxes');
                                    boxesDiv.classList.add('shake-animation');

                                    showKelmatMessage('âŒ Ø®Ø·Ø£! Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰', 'error');

                                    setTimeout(() => {
                                        boxesDiv.classList.remove('shake-animation');
                                        boxes.forEach(box => box.classList.remove('wrong'));
                                    }, 500);

                                    setTimeout(() => hideKelmatMessage(), 2000);
                                }
                            }

                            function useKelmatHint() {
                                if (kelmatGame.hints <= 0) {
                                    showKelmatMessage('âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ„Ù…ÙŠØ­Ø§Øª Ù…ØªØ¨Ù‚ÙŠØ©!', 'error');
                                    setTimeout(() => hideKelmatMessage(), 2000);
                                    return;
                                }

                                const level = kelmatGame.levels[kelmatGame.currentLevel];
                                const nextIndex = kelmatGame.userAnswer.length;

                                if (nextIndex >= level.word.length) {
                                    showKelmatMessage('âœ“ Ø§Ù„ÙƒÙ„Ù…Ø© Ù…ÙƒØªÙ…Ù„Ø©!', 'success');
                                    return;
                                }

                                const correctLetter = level.word[nextIndex];
                                const letterIndex = level.letters.findIndex((l, i) => 
                                    l === correctLetter && !kelmatGame.usedLetters.includes(i)
                                );

                                if (letterIndex !== -1) {
                                    selectKelmatLetter(correctLetter, letterIndex);
                                    kelmatGame.hints--;
                                    document.getElementById('kelmatHints').textContent = kelmatGame.hints;
                                }
                            }

                            function showKelmatMessage(text, type) {
                                const messageDiv = document.getElementById('kelmatMessage');
                                messageDiv.textContent = text;
                                messageDiv.className = `game-message ${type} show`;
                            }

                            function hideKelmatMessage() {
                                const messageDiv = document.getElementById('kelmatMessage');
                                messageDiv.classList.remove('show');
                            }

                            function closeKelmatGame() {
                                const modal = document.getElementById('kelmatModal');
                                modal.classList.remove('show');
                            }

                            // Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± - Ø§ÙØªØ­ Ø§Ù„Ù„Ø¹Ø¨Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
                            // ÙŠÙ…ÙƒÙ†Ùƒ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø³Ø·Ø± Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
                            openKelmatKarash();
                            </script>
                                <!-- ========================================
                                     ğŸ® Ù„Ø¹Ø¨Ø© XO - Ø£Ø¶Ù Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ ÙÙŠ Ø¢Ø®Ø± Ù…Ù„Ù HTML Ø­Ù‚Ùƒ
                                     (Ù‚Ø¨Ù„ </body> Ù…Ø¨Ø§Ø´Ø±Ø©)
                                     ======================================== -->

                                <!-- Ø¯Ø§Ù„Ø© ÙØªØ­ Ù„Ø¹Ø¨Ø© XO -->
                                <script>
                                function openXOGame() {
                                    document.getElementById('xoGameModal').style.display = 'flex';
                                    resetXOGame();
                                }

                                function closeXOGame() {
                                    document.getElementById('xoGameModal').style.display = 'none';
                                }
                                </script>

                                <!-- Modal Ù„Ø¹Ø¨Ø© XO -->
                                <div id="xoGameModal" style="
                                    display: none;
                                    position: fixed;
                                    top: 0;
                                    left: 0;
                                    width: 100%;
                                    height: 100%;
                                    background: rgba(0, 0, 0, 0.9);
                                    z-index: 999999;
                                    align-items: center;
                                    justify-content: center;
                                    overflow-y: auto;
                                    padding: 20px;
                                ">
                                    <div style="
                                        max-width: 600px;
                                        width: 100%;
                                        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                                        border-radius: 20px;
                                        padding: 30px;
                                        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
                                        position: relative;
                                        max-height: 95vh;
                                        overflow-y: auto;
                                    ">
                                        <!-- Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ -->
                                        <button onclick="closeXOGame()" style="
                                            position: absolute;
                                            top: 15px;
                                            right: 15px;
                                            width: 40px;
                                            height: 40px;
                                            background: #f44336;
                                            color: white;
                                            border: none;
                                            border-radius: 50%;
                                            font-size: 20px;
                                            cursor: pointer;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            z-index: 10;
                                            transition: all 0.3s;
                                        " onmouseover="this.style.background='#da190b'" onmouseout="this.style.background='#f44336'">
                                            âœ•
                                        </button>

                                        <!-- Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù„Ø¹Ø¨Ø© -->
                                        <h1 style="
                                            text-align: center;
                                            color: white;
                                            font-size: 2.5em;
                                            margin-bottom: 30px;
                                            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
                                        ">ğŸ® Ù„Ø¹Ø¨Ø© XO</h1>

                                        <!-- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙˆØ¶Ø¹ -->
                                        <div id="xo_modeSelection" style="
                                            display: grid;
                                            grid-template-columns: 1fr 1fr;
                                            gap: 20px;
                                            margin-bottom: 30px;
                                        ">
                                            <div onclick="selectXOMode('ai')" style="
                                                padding: 40px 20px;
                                                background: rgba(255, 255, 255, 0.2);
                                                border: 3px solid rgba(255, 255, 255, 0.3);
                                                border-radius: 15px;
                                                cursor: pointer;
                                                transition: all 0.3s;
                                                text-align: center;
                                                color: white;
                                            " onmouseover="this.style.background='rgba(255,255,255,0.3)'; this.style.transform='translateY(-5px)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'; this.style.transform='translateY(0)'">
                                                <div style="font-size: 3em; margin-bottom: 10px;">ğŸ¤–</div>
                                                <h2 style="font-size: 1.3em; margin-bottom: 10px;">Ù„Ø¹Ø¨ Ù…Ø¹ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±</h2>
                                                <p style="font-size: 0.9em; opacity: 0.9;">ØªØ­Ø¯Ù‰ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</p>
                                            </div>
                                            <div onclick="selectXOMode('friend')" style="
                                                padding: 40px 20px;
                                                background: rgba(255, 255, 255, 0.2);
                                                border: 3px solid rgba(255, 255, 255, 0.3);
                                                border-radius: 15px;
                                                cursor: pointer;
                                                transition: all 0.3s;
                                                text-align: center;
                                                color: white;
                                            " onmouseover="this.style.background='rgba(255,255,255,0.3)'; this.style.transform='translateY(-5px)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'; this.style.transform='translateY(0)'">
                                                <div style="font-size: 3em; margin-bottom: 10px;">ğŸ‘¥</div>
                                                <h2 style="font-size: 1.3em; margin-bottom: 10px;">Ù„Ø¹Ø¨ Ù…Ø¹ ØµØ¯ÙŠÙ‚</h2>
                                                <p style="font-size: 0.9em; opacity: 0.9;">Ø§Ù„Ø¹Ø¨ Ù…Ø¹ ØµØ¯ÙŠÙ‚Ùƒ</p>
                                            </div>
                                        </div>

                                        <!-- Ø§Ø®ØªÙŠØ§Ø± ØµØ¹ÙˆØ¨Ø© Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± -->
                                        <div id="xo_difficultySelection" style="display: none; margin-bottom: 20px;">
                                            <h3 style="text-align: center; color: white; margin-bottom: 10px;">Ø§Ø®ØªØ± Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ¹ÙˆØ¨Ø©:</h3>
                                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
                                                <button onclick="selectXODifficulty('easy')" class="xo-difficulty-btn" data-level="easy" style="
                                                    padding: 15px;
                                                    background: rgba(255, 255, 255, 0.2);
                                                    border: 2px solid rgba(255, 255, 255, 0.3);
                                                    border-radius: 10px;
                                                    cursor: pointer;
                                                    color: white;
                                                    font-size: 1em;
                                                    transition: all 0.3s;
                                                ">ğŸ˜Š<br>Ø³Ù‡Ù„</button>
                                                <button onclick="selectXODifficulty('medium')" class="xo-difficulty-btn xo-difficulty-selected" data-level="medium" style="
                                                    padding: 15px;
                                                    background: rgba(76, 175, 80, 0.5);
                                                    border: 2px solid #4CAF50;
                                                    border-radius: 10px;
                                                    cursor: pointer;
                                                    color: white;
                                                    font-size: 1em;
                                                    transition: all 0.3s;
                                                ">ğŸ˜<br>Ù…ØªÙˆØ³Ø·</button>
                                                <button onclick="selectXODifficulty('hard')" class="xo-difficulty-btn" data-level="hard" style="
                                                    padding: 15px;
                                                    background: rgba(255, 255, 255, 0.2);
                                                    border: 2px solid rgba(255, 255, 255, 0.3);
                                                    border-radius: 10px;
                                                    cursor: pointer;
                                                    color: white;
                                                    font-size: 1em;
                                                    transition: all 0.3s;
                                                ">ğŸ˜¤<br>ØµØ¹Ø¨</button>
                                            </div>
                                        </div>

                                        <!-- Ø¥Ø¯Ø®Ø§Ù„ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† -->
                                        <div id="xo_playerSetup" style="display: none; margin-bottom: 20px;">
                                            <div style="margin: 15px 0;">
                                                <label style="display: block; margin-bottom: 8px; color: white; font-size: 1.1em;">ğŸ® Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø£ÙˆÙ„ (âŒ):</label>
                                                <input type="text" id="xo_player1Name" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ" value="Ø§Ù„Ù„Ø§Ø¹Ø¨ 1" style="
                                                    width: 100%;
                                                    padding: 12px;
                                                    border: none;
                                                    border-radius: 8px;
                                                    font-size: 1em;
                                                ">
                                            </div>
                                            <div id="xo_player2Input" style="margin: 15px 0;">
                                                <label style="display: block; margin-bottom: 8px; color: white; font-size: 1.1em;">ğŸ® Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø«Ø§Ù†ÙŠ (â­•):</label>
                                                <input type="text" id="xo_player2Name" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… ØµØ¯ÙŠÙ‚Ùƒ" value="Ø§Ù„Ù„Ø§Ø¹Ø¨ 2" style="
                                                    width: 100%;
                                                    padding: 12px;
                                                    border: none;
                                                    border-radius: 8px;
                                                    font-size: 1em;
                                                ">
                                            </div>
                                            <button onclick="startXOGame()" style="
                                                width: 100%;
                                                padding: 15px;
                                                background: #4CAF50;
                                                border: none;
                                                border-radius: 10px;
                                                color: white;
                                                font-size: 1.2em;
                                                font-weight: bold;
                                                cursor: pointer;
                                                transition: all 0.3s;
                                                margin-top: 15px;
                                            " onmouseover="this.style.background='#45a049'" onmouseout="this.style.background='#4CAF50'">
                                                ğŸš€ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©
                                            </button>
                                        </div>

                                        <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† -->
                                        <div id="xo_playersInfo" style="
                                            display: none;
                                            grid-template-columns: 1fr 1fr;
                                            gap: 15px;
                                            margin-bottom: 20px;
                                        ">
                                            <div id="xo_player1Card" style="
                                                background: rgba(255, 255, 255, 0.2);
                                                padding: 20px;
                                                border-radius: 15px;
                                                text-align: center;
                                                border: 3px solid transparent;
                                                transition: all 0.3s;
                                                color: white;
                                            ">
                                                <h3 id="xo_player1Display" style="font-size: 1.2em; margin-bottom: 10px;">Ø§Ù„Ù„Ø§Ø¹Ø¨ 1</h3>
                                                <div style="font-size: 3em; font-weight: bold;">âŒ</div>
                                                <div style="font-size: 1.5em; margin-top: 10px; color: #FFD700;">ğŸ† <span id="xo_player1Score">0</span></div>
                                            </div>
                                            <div id="xo_player2Card" style="
                                                background: rgba(255, 255, 255, 0.2);
                                                padding: 20px;
                                                border-radius: 15px;
                                                text-align: center;
                                                border: 3px solid transparent;
                                                transition: all 0.3s;
                                                color: white;
                                            ">
                                                <h3 id="xo_player2Display" style="font-size: 1.2em; margin-bottom: 10px;">Ø§Ù„Ù„Ø§Ø¹Ø¨ 2</h3>
                                                <div style="font-size: 3em; font-weight: bold;">â­•</div>
                                                <div style="font-size: 1.5em; margin-top: 10px; color: #FFD700;">ğŸ† <span id="xo_player2Score">0</span></div>
                                            </div>
                                        </div>

                                        <!-- Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„Ø© -->
                                        <div id="xo_statusMessage" style="
                                            text-align: center;
                                            font-size: 1.5em;
                                            margin: 20px 0;
                                            min-height: 40px;
                                            color: white;
                                            font-weight: bold;
                                            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
                                        "></div>

                                        <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© -->
                                        <div id="xo_gameBoard" style="
                                            display: none;
                                            grid-template-columns: repeat(3, 1fr);
                                            gap: 15px;
                                            margin: 30px 0;
                                            padding: 20px;
                                            background: rgba(0, 0, 0, 0.2);
                                            border-radius: 15px;
                                        ">
                                            <button onclick="makeXOMove(0)" class="xo-cell" data-index="0"></button>
                                            <button onclick="makeXOMove(1)" class="xo-cell" data-index="1"></button>
                                            <button onclick="makeXOMove(2)" class="xo-cell" data-index="2"></button>
                                            <button onclick="makeXOMove(3)" class="xo-cell" data-index="3"></button>
                                            <button onclick="makeXOMove(4)" class="xo-cell" data-index="4"></button>
                                            <button onclick="makeXOMove(5)" class="xo-cell" data-index="5"></button>
                                            <button onclick="makeXOMove(6)" class="xo-cell" data-index="6"></button>
                                            <button onclick="makeXOMove(7)" class="xo-cell" data-index="7"></button>
                                            <button onclick="makeXOMove(8)" class="xo-cell" data-index="8"></button>
                                        </div>

                                        <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© -->
                                        <div id="xo_resultScreen" style="
                                            display: none;
                                            text-align: center;
                                            padding: 40px;
                                            background: rgba(255, 255, 255, 0.2);
                                            border-radius: 20px;
                                            margin: 20px 0;
                                            color: white;
                                        ">
                                            <div id="xo_resultIcon" style="font-size: 5em; margin-bottom: 20px;">ğŸ‰</div>
                                            <h2 id="xo_resultTitle" style="font-size: 2.5em; margin-bottom: 15px;">Ø§Ù„ÙØ§Ø¦Ø²</h2>
                                            <p id="xo_winnerName" style="font-size: 1.8em; color: #FFD700; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);"></p>
                                        </div>

                                        <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… -->
                                        <div id="xo_controls" style="
                                            display: none;
                                            gap: 15px;
                                            justify-content: center;
                                            flex-wrap: wrap;
                                        ">
                                            <button onclick="restartXOGame()" style="
                                                padding: 15px 30px;
                                                background: #4CAF50;
                                                border: none;
                                                border-radius: 10px;
                                                color: white;
                                                font-size: 1.1em;
                                                font-weight: bold;
                                                cursor: pointer;
                                                transition: all 0.3s;
                                            " onmouseover="this.style.background='#45a049'" onmouseout="this.style.background='#4CAF50'">
                                                ğŸ”„ Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
                                            </button>
                                            <button onclick="backToXOMenu()" style="
                                                padding: 15px 30px;
                                                background: #f44336;
                                                border: none;
                                                border-radius: 10px;
                                                color: white;
                                                font-size: 1.1em;
                                                font-weight: bold;
                                                cursor: pointer;
                                                transition: all 0.3s;
                                            " onmouseover="this.style.background='#da190b'" onmouseout="this.style.background='#f44336'">
                                                ğŸ  Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- CSS Ù„Ù„Ø¹Ø¨Ø© XO -->
                                <style>
                                .xo-cell {
                                    aspect-ratio: 1;
                                    background: rgba(255, 255, 255, 0.2);
                                    border: none;
                                    border-radius: 15px;
                                    font-size: 3em;
                                    font-weight: bold;
                                    color: white;
                                    cursor: pointer;
                                    transition: all 0.3s;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                }

                                .xo-cell:hover:not(.xo-filled) {
                                    background: rgba(255, 255, 255, 0.3);
                                    transform: scale(1.05);
                                }

                                .xo-cell.xo-filled {
                                    cursor: not-allowed;
                                }

                                .xo-cell.xo-x {
                                    color: #ff6b6b;
                                    text-shadow: 0 0 20px rgba(255, 107, 107, 0.5);
                                }

                                .xo-cell.xo-o {
                                    color: #4ecdc4;
                                    text-shadow: 0 0 20px rgba(78, 205, 196, 0.5);
                                }

                                .xo-cell.xo-winning {
                                    animation: xoWinning 0.6s ease-in-out infinite;
                                }

                                @keyframes xoWinning {
                                    0%, 100% { 
                                        background: rgba(255, 215, 0, 0.3);
                                        transform: scale(1);
                                    }
                                    50% { 
                                        background: rgba(255, 215, 0, 0.5);
                                        transform: scale(1.1);
                                    }
                                }

                                .xo-player-active {
                                    background: rgba(76, 175, 80, 0.3) !important;
                                    border-color: #4CAF50 !important;
                                    box-shadow: 0 0 20px rgba(76, 175, 80, 0.5) !important;
                                }
                                </style>

                                <!-- JavaScript Ù„Ù„Ø¹Ø¨Ø© XO -->
                                <script>
                                // Ù…ØªØºÙŠØ±Ø§Øª Ù„Ø¹Ø¨Ø© XO
                                let xo_gameMode = null;
                                let xo_difficulty = 'medium';
                                let xo_currentPlayer = 'X';
                                let xo_board = Array(9).fill(null);
                                let xo_gameActive = false;
                                let xo_player1Name = 'Ø§Ù„Ù„Ø§Ø¹Ø¨ 1';
                                let xo_player2Name = 'Ø§Ù„Ù„Ø§Ø¹Ø¨ 2';
                                let xo_scores = { player1: 0, player2: 0 };

                                const xo_winningLines = [
                                    [0, 1, 2], [3, 4, 5], [6, 7, 8],
                                    [0, 3, 6], [1, 4, 7], [2, 5, 8],
                                    [0, 4, 8], [2, 4, 6]
                                ];

                                // Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙˆØ¶Ø¹
                                function selectXOMode(mode) {
                                    xo_gameMode = mode;
                                    document.getElementById('xo_modeSelection').style.display = 'none';

                                    if (mode === 'ai') {
                                        document.getElementById('xo_difficultySelection').style.display = 'block';
                                        document.getElementById('xo_player2Input').style.display = 'none';
                                        document.getElementById('xo_player2Name').value = 'ğŸ¤– Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±';
                                    } else {
                                        document.getElementById('xo_player2Input').style.display = 'block';
                                    }

                                    document.getElementById('xo_playerSetup').style.display = 'block';
                                }

                                // Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØµØ¹ÙˆØ¨Ø©
                                function selectXODifficulty(level) {
                                    xo_difficulty = level;
                                    document.querySelectorAll('.xo-difficulty-btn').forEach(btn => {
                                        if (btn.getAttribute('data-level') === level) {
                                            btn.classList.add('xo-difficulty-selected');
                                            btn.style.background = 'rgba(76, 175, 80, 0.5)';
                                            btn.style.borderColor = '#4CAF50';
                                        } else {
                                            btn.classList.remove('xo-difficulty-selected');
                                            btn.style.background = 'rgba(255, 255, 255, 0.2)';
                                            btn.style.borderColor = 'rgba(255, 255, 255, 0.3)';
                                        }
                                    });
                                }

                                // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
                                function startXOGame() {
                                    xo_player1Name = document.getElementById('xo_player1Name').value.trim() || 'Ø§Ù„Ù„Ø§Ø¹Ø¨ 1';
                                    xo_player2Name = document.getElementById('xo_player2Name').value.trim() || (xo_gameMode === 'ai' ? 'ğŸ¤– Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±' : 'Ø§Ù„Ù„Ø§Ø¹Ø¨ 2');

                                    document.getElementById('xo_player1Display').textContent = xo_player1Name;
                                    document.getElementById('xo_player2Display').textContent = xo_player2Name;

                                    document.getElementById('xo_difficultySelection').style.display = 'none';
                                    document.getElementById('xo_playerSetup').style.display = 'none';
                                    document.getElementById('xo_playersInfo').style.display = 'grid';
                                    document.getElementById('xo_gameBoard').style.display = 'grid';
                                    document.getElementById('xo_controls').style.display = 'flex';

                                    updateXOScoreDisplay();
                                    resetXOBoard();
                                    xo_gameActive = true;
                                    updateXOStatus();
                                }

                                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ù‚Ø§Ø·
                                function updateXOScoreDisplay() {
                                    document.getElementById('xo_player1Score').textContent = xo_scores.player1;
                                    document.getElementById('xo_player2Score').textContent = xo_scores.player2;
                                }

                                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©
                                function updateXOStatus() {
                                    const player1Card = document.getElementById('xo_player1Card');
                                    const player2Card = document.getElementById('xo_player2Card');

                                    if (xo_currentPlayer === 'X') {
                                        player1Card.classList.add('xo-player-active');
                                        player2Card.classList.remove('xo-player-active');
                                        document.getElementById('xo_statusMessage').textContent = `âœ¨ Ø¯ÙˆØ± ${xo_player1Name}`;
                                    } else {
                                        player2Card.classList.add('xo-player-active');
                                        player1Card.classList.remove('xo-player-active');
                                        document.getElementById('xo_statusMessage').textContent = `âœ¨ Ø¯ÙˆØ± ${xo_player2Name}`;
                                    }
                                }

                                // ØªÙ†ÙÙŠØ° Ø­Ø±ÙƒØ©
                                function makeXOMove(index) {
                                    if (!xo_gameActive || xo_board[index] !== null) return;

                                    xo_board[index] = xo_currentPlayer;
                                    updateXOCell(index);

                                    const result = checkXOWinner();
                                    if (result) {
                                        endXOGame(result);
                                    } else {
                                        xo_currentPlayer = xo_currentPlayer === 'X' ? 'O' : 'X';
                                        updateXOStatus();

                                        if (xo_gameMode === 'ai' && xo_currentPlayer === 'O' && xo_gameActive) {
                                            setTimeout(() => {
                                                makeXOAIMove();
                                            }, 500);
                                        }
                                    }
                                }

                                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®Ù„ÙŠØ©
                                function updateXOCell(index) {
                                    const cells = document.querySelectorAll('.xo-cell');
                                    const cell = cells[index];
                                    cell.textContent = xo_board[index] === 'X' ? 'âŒ' : 'â­•';
                                    cell.classList.add('xo-filled', xo_board[index] === 'X' ? 'xo-x' : 'xo-o');
                                }

                                // Ø­Ø±ÙƒØ© Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±
                                function makeXOAIMove() {
                                    if (!xo_gameActive) return;

                                    let move;
                                    if (xo_difficulty === 'easy') {
                                        move = getXORandomMove();
                                    } else if (xo_difficulty === 'medium') {
                                        move = Math.random() < 0.5 ? getXOBestMove() : getXORandomMove();
                                    } else {
                                        move = getXOBestMove();
                                    }

                                    if (move !== -1) {
                                        makeXOMove(move);
                                    }
                                }

                                // Ø­Ø±ÙƒØ© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
                                function getXORandomMove() {
                                    const emptyIndices = xo_board
                                        .map((val, idx) => val === null ? idx : null)
                                        .filter(val => val !== null);

                                    if (emptyIndices.length === 0) return -1;
                                    return emptyIndices[Math.floor(Math.random() * emptyIndices.length)];
                                }

                                // Ø£ÙØ¶Ù„ Ø­Ø±ÙƒØ©
                                function getXOBestMove() {
                                    let bestScore = -Infinity;
                                    let bestMove = -1;

                                    for (let i = 0; i < 9; i++) {
                                        if (xo_board[i] === null) {
                                            xo_board[i] = 'O';
                                            let score = xoMinimax(xo_board, 0, false);
                                            xo_board[i] = null;

                                            if (score > bestScore) {
                                                bestScore = score;
                                                bestMove = i;
                                            }
                                        }
                                    }

                                    return bestMove;
                                }

                                // Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© Minimax
                                function xoMinimax(board, depth, isMaximizing) {
                                    const result = checkXOWinner();

                                    if (result) {
                                        if (result.winner === 'O') return 10 - depth;
                                        if (result.winner === 'X') return depth - 10;
                                        if (result.winner === 'draw') return 0;
                                    }

                                    if (isMaximizing) {
                                        let bestScore = -Infinity;
                                        for (let i = 0; i < 9; i++) {
                                            if (board[i] === null) {
                                                board[i] = 'O';
                                                let score = xoMinimax(board, depth + 1, false);
                                                board[i] = null;
                                                bestScore = Math.max(score, bestScore);
                                            }
                                        }
                                        return bestScore;
                                    } else {
                                        let bestScore = Infinity;
                                        for (let i = 0; i < 9; i++) {
                                            if (board[i] === null) {
                                                board[i] = 'X';
                                                let score = xoMinimax(board, depth + 1, true);
                                                board[i] = null;
                                                bestScore = Math.min(score, bestScore);
                                            }
                                        }
                                        return bestScore;
                                    }
                                }

                                // ÙØ­Øµ Ø§Ù„ÙØ§Ø¦Ø²
                                function checkXOWinner() {
                                    for (let line of xo_winningLines) {
                                        const [a, b, c] = line;
                                        if (xo_board[a] && xo_board[a] === xo_board[b] && xo_board[a] === xo_board[c]) {
                                            return { winner: xo_board[a], line: line };
                                        }
                                    }

                                    if (xo_board.every(cell => cell !== null)) {
                                        return { winner: 'draw', line: null };
                                    }

                                    return null;
                                }

                                // Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
                                function endXOGame(result) {
                                    xo_gameActive = false;
                                    document.getElementById('xo_player1Card').classList.remove('xo-player-active');
                                    document.getElementById('xo_player2Card').classList.remove('xo-player-active');
                                    document.getElementById('xo_statusMessage').textContent = '';

                                    if (result.line) {
                                        const cells = document.querySelectorAll('.xo-cell');
                                        result.line.forEach(index => {
                                            cells[index].classList.add('xo-winning');
                                        });
                                    }

                                    setTimeout(() => {
                                        const resultScreen = document.getElementById('xo_resultScreen');
                                        const resultIcon = document.getElementById('xo_resultIcon');
                                        const resultTitle = document.getElementById('xo_resultTitle');
                                        const winnerName = document.getElementById('xo_winnerName');

                                        if (result.winner === 'draw') {
                                            resultIcon.textContent = 'ğŸ¤';
                                            resultTitle.textContent = 'ØªØ¹Ø§Ø¯Ù„!';
                                            winnerName.textContent = 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙØ§Ø¦Ø²';
                                        } else {
                                            const isPlayer1 = result.winner === 'X';
                                            resultIcon.textContent = 'ğŸ‰';
                                            resultTitle.textContent = 'Ø§Ù„ÙØ§Ø¦Ø²!';
                                            winnerName.textContent = isPlayer1 ? xo_player1Name : xo_player2Name;

                                            if (isPlayer1) {
                                                xo_scores.player1++;
                                            } else {
                                                xo_scores.player2++;
                                            }
                                        }

                                        updateXOScoreDisplay();
                                        resultScreen.style.display = 'block';
                                    }, 800);
                                }

                                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù„ÙˆØ­Ø©
                                function resetXOBoard() {
                                    xo_board = Array(9).fill(null);
                                    xo_currentPlayer = 'X';
                                    xo_gameActive = true;

                                    const cells = document.querySelectorAll('.xo-cell');
                                    cells.forEach(cell => {
                                        cell.textContent = '';
                                        cell.classList.remove('xo-filled', 'xo-x', 'xo-o', 'xo-winning');
                                    });

                                    document.getElementById('xo_resultScreen').style.display = 'none';
                                    updateXOStatus();
                                }

                                // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
                                function restartXOGame() {
                                    resetXOBoard();
                                }

                                // Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©
                                function backToXOMenu() {
                                    document.getElementById('xo_playersInfo').style.display = 'none';
                                    document.getElementById('xo_gameBoard').style.display = 'none';
                                    document.getElementById('xo_controls').style.display = 'none';
                                    document.getElementById('xo_resultScreen').style.display = 'none';
                                    document.getElementById('xo_difficultySelection').style.display = 'none';
                                    document.getElementById('xo_playerSetup').style.display = 'none';

                                    xo_gameMode = null;
                                    xo_difficulty = 'medium';
                                    xo_scores = { player1: 0, player2: 0 };

                                    document.getElementById('xo_modeSelection').style.display = 'grid';
                                    resetXOBoard();
                                }

                                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¹Ù†Ø¯ Ø§Ù„ÙØªØ­
                                function resetXOGame() {
                                    document.getElementById('xo_modeSelection').style.display = 'grid';
                                    document.getElementById('xo_difficultySelection').style.display = 'none';
                                    document.getElementById('xo_playerSetup').style.display = 'none';
                                    document.getElementById('xo_playersInfo').style.display = 'none';
                                    document.getElementById('xo_gameBoard').style.display = 'none';
                                    document.getElementById('xo_controls').style.display = 'none';
                                    document.getElementById('xo_resultScreen').style.display = 'none';
                                    document.getElementById('xo_statusMessage').textContent = '';

                                    xo_gameMode = null;
                                    xo_difficulty = 'medium';
                                    xo_scores = { player1: 0, player2: 0 };
                                    xo_board = Array(9).fill(null);
                                    xo_currentPlayer = 'X';
                                    xo_gameActive = false;

                                    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†
                                    document.getElementById('xo_player1Name').value = 'Ø§Ù„Ù„Ø§Ø¹Ø¨ 1';
                                    document.getElementById('xo_player2Name').value = 'Ø§Ù„Ù„Ø§Ø¹Ø¨ 2';

                                    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø®Ù„Ø§ÙŠØ§
                                    const cells = document.querySelectorAll('.xo-cell');
                                    cells.forEach(cell => {
                                        cell.textContent = '';
                                        cell.classList.remove('xo-filled', 'xo-x', 'xo-o', 'xo-winning');
                                    });
                                }
                                </script>

                                <!-- ======================================== 
                                     Ø§Ù†ØªÙ‡Ù‰ ÙƒÙˆØ¯ Ù„Ø¹Ø¨Ø© XO 
                                     ======================================== -->
                                <!-- Chess Game Modal -->
                                <div id="chessGameModal" class="game-modal">
                                    <div class="game-modal-content" style="max-width: 1000px; max-height: 90vh; overflow-y: auto; padding: 10px;">
                                        <span class="game-close" onclick="closeChessGame()">&times;</span>
                                        <div id="chessGameRoot"></div>
                                    </div>
                                </div>

                                <style>
                                /* Chess Game Styles */
                                #chessGameRoot {
                                    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                                    min-height: 500px;
                                }

                                .chess-container {
                                    padding: 15px;
                                    background: linear-gradient(135deg, #fef3c7 0%, #fcd34d 100%);
                                    border-radius: 10px;
                                }

                                .chess-menu {
                                    display: flex;
                                    flex-direction: column;
                                    align-items: center;
                                    justify-content: center;
                                    min-height: 400px;
                                }

                                .chess-menu-card {
                                    background: white;
                                    border-radius: 20px;
                                    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
                                    padding: 30px;
                                    max-width: 400px;
                                    width: 100%;
                                }

                                .chess-title {
                                    font-size: 2rem;
                                    font-weight: bold;
                                    text-align: center;
                                    margin-bottom: 25px;
                                    color: #78350f;
                                }

                                .chess-btn {
                                    width: 100%;
                                    padding: 14px;
                                    margin: 8px 0;
                                    font-size: 1.1rem;
                                    font-weight: bold;
                                    border: none;
                                    border-radius: 12px;
                                    cursor: pointer;
                                    transition: all 0.3s ease;
                                    color: white;
                                }

                                .chess-btn-computer {
                                    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
                                }

                                .chess-btn-computer:hover {
                                    transform: scale(1.05);
                                    box-shadow: 0 10px 30px rgba(59, 130, 246, 0.4);
                                }

                                .chess-btn-friend {
                                    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
                                }

                                .chess-btn-friend:hover {
                                    transform: scale(1.05);
                                    box-shadow: 0 10px 30px rgba(16, 185, 129, 0.4);
                                }

                                .chess-difficulty-title {
                                    font-size: 1.8rem;
                                    margin-bottom: 20px;
                                    color: #1e3a8a;
                                    text-align: center;
                                }

                                .chess-diff-btn {
                                    width: 100%;
                                    padding: 12px;
                                    margin: 6px 0;
                                    font-size: 1rem;
                                    font-weight: bold;
                                    border: none;
                                    border-radius: 12px;
                                    cursor: pointer;
                                    transition: all 0.3s ease;
                                    color: white;
                                }

                                .chess-diff-easy { background: #10b981; }
                                .chess-diff-easy:hover { background: #059669; }
                                .chess-diff-normal { background: #eab308; }
                                .chess-diff-normal:hover { background: #ca8a04; }
                                .chess-diff-medium { background: #f97316; }
                                .chess-diff-medium:hover { background: #ea580c; }
                                .chess-diff-hard { background: #ef4444; }
                                .chess-diff-hard:hover { background: #dc2626; }
                                .chess-diff-back { background: #9ca3af; }
                                .chess-diff-back:hover { background: #6b7280; }

                                .chess-game-header {
                                    display: flex;
                                    justify-content: space-between;
                                    align-items: center;
                                    margin-bottom: 15px;
                                }

                                .chess-game-title {
                                    font-size: 1.3rem;
                                    font-weight: bold;
                                    color: #78350f;
                                }

                                .chess-exit-btn {
                                    background: #ef4444;
                                    color: white;
                                    border: none;
                                    padding: 8px 16px;
                                    border-radius: 8px;
                                    cursor: pointer;
                                    font-weight: bold;
                                    font-size: 0.9rem;
                                }

                                .chess-exit-btn:hover {
                                    background: #dc2626;
                                }

                                .chess-turn {
                                    text-align: center;
                                    font-size: 1.1rem;
                                    font-weight: bold;
                                    margin-bottom: 15px;
                                    padding: 8px 15px;
                                    background: white;
                                    border-radius: 10px;
                                }

                                .chess-board {
                                    display: grid;
                                    grid-template-columns: repeat(8, 70px);
                                    grid-template-rows: repeat(8, 70px);
                                    border: 5px solid #78350f;
                                    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
                                    margin: 0 auto 15px;
                                    width: fit-content;
                                    border-radius: 5px;
                                    overflow: hidden;
                                }

                                .chess-square {
                                    width: 70px;
                                    height: 70px;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    font-size: 3.5rem;
                                    cursor: pointer;
                                    user-select: none;
                                    transition: all 0.2s ease;
                                }

                                .chess-square-light { background: #fef3c7; }
                                .chess-square-dark { background: #92400e; }
                                .chess-square-selected {
                                    box-shadow: inset 0 0 0 5px #fbbf24;
                                    background: #fef08a !important;
                                }

                                .chess-square:hover { 
                                    opacity: 0.85;
                                    transform: scale(0.98);
                                }

                                .chess-gameover {
                                    background: linear-gradient(135deg, #fbbf24 0%, #f97316 100%);
                                    color: white;
                                    padding: 25px;
                                    border-radius: 15px;
                                    text-align: center;
                                    margin-top: 15px;
                                }

                                .chess-gameover-title {
                                    font-size: 1.8rem;
                                    font-weight: bold;
                                    margin-bottom: 15px;
                                }

                                .chess-replay-btn {
                                    background: white;
                                    color: #f97316;
                                    border: none;
                                    padding: 10px 25px;
                                    border-radius: 10px;
                                    font-size: 1rem;
                                    font-weight: bold;
                                    cursor: pointer;
                                }

                                .chess-replay-btn:hover {
                                    background: #f3f4f6;
                                }

                                .chess-share-modal {
                                    position: fixed;
                                    top: 0;
                                    left: 0;
                                    right: 0;
                                    bottom: 0;
                                    background: rgba(0, 0, 0, 0.6);
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    z-index: 100000;
                                }

                                .chess-share-content {
                                    background: white;
                                    border-radius: 20px;
                                    padding: 25px;
                                    max-width: 450px;
                                    width: 90%;
                                }

                                .chess-share-title {
                                    font-size: 1.4rem;
                                    font-weight: bold;
                                    margin-bottom: 12px;
                                    text-align: center;
                                    color: #059669;
                                }

                                .chess-share-input {
                                    width: 100%;
                                    padding: 10px;
                                    border: 2px solid #d1d5db;
                                    border-radius: 8px;
                                    margin: 12px 0;
                                    font-size: 0.95rem;
                                    box-sizing: border-box;
                                }

                                .chess-copy-btn {
                                    background: #10b981;
                                    color: white;
                                    border: none;
                                    padding: 10px 15px;
                                    border-radius: 8px;
                                    cursor: pointer;
                                    width: 100%;
                                    font-weight: bold;
                                    margin-bottom: 8px;
                                    font-size: 0.95rem;
                                }

                                .chess-copy-btn:hover {
                                    background: #059669;
                                }

                                .chess-close-share-btn {
                                    background: #3b82f6;
                                    color: white;
                                    border: none;
                                    padding: 10px 15px;
                                    border-radius: 8px;
                                    cursor: pointer;
                                    width: 100%;
                                    font-weight: bold;
                                    font-size: 0.95rem;
                                }

                                .chess-close-share-btn:hover {
                                    background: #2563eb;
                                }

                                /* ØªØ­Ø³ÙŠÙ† Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
                                @media (max-width: 768px) {
                                    .chess-board {
                                        grid-template-columns: repeat(8, 50px);
                                        grid-template-rows: repeat(8, 50px);
                                    }

                                    .chess-square {
                                        width: 50px;
                                        height: 50px;
                                        font-size: 2.5rem;
                                    }
                                }
                                </style>

                                <script>
                                // Chess Game Variables
                                let chessState = {
                                    gameMode: null,
                                    difficulty: null,
                                    board: [],
                                    selectedPiece: null,
                                    currentPlayer: 'white',
                                    gameOver: false,
                                    winner: null,
                                    shareLink: '',
                                    showShareModal: false
                                };

                                const initialChessBoard = [
                                    ['â™œ', 'â™', 'â™', 'â™›', 'â™š', 'â™', 'â™', 'â™œ'],
                                    ['â™Ÿ', 'â™Ÿ', 'â™Ÿ', 'â™Ÿ', 'â™Ÿ', 'â™Ÿ', 'â™Ÿ', 'â™Ÿ'],
                                    ['', '', '', '', '', '', '', ''],
                                    ['', '', '', '', '', '', '', ''],
                                    ['', '', '', '', '', '', '', ''],
                                    ['', '', '', '', '', '', '', ''],
                                    ['â™™', 'â™™', 'â™™', 'â™™', 'â™™', 'â™™', 'â™™', 'â™™'],
                                    ['â™–', 'â™˜', 'â™—', 'â™•', 'â™”', 'â™—', 'â™˜', 'â™–']
                                ];

                                const pieceValues = {
                                    'â™Ÿ': 1, 'â™™': 1,
                                    'â™': 3, 'â™˜': 3,
                                    'â™': 3, 'â™—': 3,
                                    'â™œ': 5, 'â™–': 5,
                                    'â™›': 9, 'â™•': 9,
                                    'â™š': 100, 'â™”': 100
                                };

                                function openChessGame() {
                                    document.getElementById('chessGameModal').style.display = 'block';
                                    resetChessState();
                                    renderChessGame();
                                }

                                function closeChessGame() {
                                    document.getElementById('chessGameModal').style.display = 'none';
                                }

                                function resetChessState() {
                                    chessState = {
                                        gameMode: null,
                                        difficulty: null,
                                        board: [],
                                        selectedPiece: null,
                                        currentPlayer: 'white',
                                        gameOver: false,
                                        winner: null,
                                        shareLink: '',
                                        showShareModal: false
                                    };
                                }

                                function startChessGame(mode, difficulty = null) {
                                    chessState.gameMode = mode;
                                    chessState.difficulty = difficulty;
                                    chessState.board = JSON.parse(JSON.stringify(initialChessBoard));
                                    chessState.currentPlayer = 'white';
                                    chessState.gameOver = false;
                                    chessState.winner = null;
                                    chessState.selectedPiece = null;
                                    chessState.showShareModal = false;

                                    if (mode === 'friend') {
                                        generateChessShareLink();
                                    }

                                    renderChessGame();
                                }

                                function generateChessShareLink() {
                                    const gameId = Math.random().toString(36).substr(2, 9);
                                    chessState.shareLink = window.location.origin + window.location.pathname + '?chess=' + gameId;
                                    chessState.showShareModal = true;
                                }

                                function copyChessLink() {
                                    navigator.clipboard.writeText(chessState.shareLink);
                                    alert('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·! Ø´Ø§Ø±ÙƒÙ‡ Ù…Ø¹ ØµØ¯ÙŠÙ‚Ùƒ ğŸ®');
                                }

                                function getPieceColor(piece) {
                                    if (!piece) return null;
                                    return ['â™”', 'â™•', 'â™–', 'â™—', 'â™˜', 'â™™'].includes(piece) ? 'white' : 'black';
                                }

                                function isValidChessMove(fromRow, fromCol, toRow, toCol, piece) {
                                    if (toRow < 0 || toRow > 7 || toCol < 0 || toCol > 7) return false;

                                    const targetPiece = chessState.board[toRow][toCol];
                                    if (targetPiece && getPieceColor(targetPiece) === getPieceColor(piece)) return false;

                                    const rowDiff = Math.abs(toRow - fromRow);
                                    const colDiff = Math.abs(toCol - fromCol);

                                    if (piece === 'â™™' || piece === 'â™Ÿ') {
                                        const direction = piece === 'â™™' ? -1 : 1;
                                        const startRow = piece === 'â™™' ? 6 : 1;

                                        if (toCol === fromCol && !targetPiece) {
                                            if (toRow === fromRow + direction) return true;
                                            if (fromRow === startRow && toRow === fromRow + 2 * direction && !chessState.board[fromRow + direction][fromCol]) return true;
                                        }
                                        if (Math.abs(toCol - fromCol) === 1 && toRow === fromRow + direction && targetPiece) return true;
                                        return false;
                                    }

                                    if (piece === 'â™–' || piece === 'â™œ') {
                                        if (fromRow !== toRow && fromCol !== toCol) return false;
                                        return isChessPathClear(fromRow, fromCol, toRow, toCol);
                                    }

                                    if (piece === 'â™˜' || piece === 'â™') {
                                        return (rowDiff === 2 && colDiff === 1) || (rowDiff === 1 && colDiff === 2);
                                    }

                                    if (piece === 'â™—' || piece === 'â™') {
                                        if (rowDiff !== colDiff) return false;
                                        return isChessPathClear(fromRow, fromCol, toRow, toCol);
                                    }

                                    if (piece === 'â™•' || piece === 'â™›') {
                                        if (fromRow !== toRow && fromCol !== toCol && rowDiff !== colDiff) return false;
                                        return isChessPathClear(fromRow, fromCol, toRow, toCol);
                                    }

                                    if (piece === 'â™”' || piece === 'â™š') {
                                        return rowDiff <= 1 && colDiff <= 1;
                                    }

                                    return false;
                                }

                                function isChessPathClear(fromRow, fromCol, toRow, toCol) {
                                    const rowStep = toRow > fromRow ? 1 : toRow < fromRow ? -1 : 0;
                                    const colStep = toCol > fromCol ? 1 : toCol < fromCol ? -1 : 0;

                                    let currentRow = fromRow + rowStep;
                                    let currentCol = fromCol + colStep;

                                    while (currentRow !== toRow || currentCol !== toCol) {
                                        if (chessState.board[currentRow][currentCol]) return false;
                                        currentRow += rowStep;
                                        currentCol += colStep;
                                    }
                                    return true;
                                }

                                function handleChessSquareClick(row, col) {
                                    if (chessState.gameOver) return;
                                    if (chessState.gameMode === 'computer' && chessState.currentPlayer === 'black') return;

                                    const piece = chessState.board[row][col];

                                    if (chessState.selectedPiece) {
                                        const [fromRow, fromCol] = chessState.selectedPiece;
                                        const movingPiece = chessState.board[fromRow][fromCol];

                                        if (isValidChessMove(fromRow, fromCol, row, col, movingPiece)) {
                                            makeChessMove(fromRow, fromCol, row, col);
                                        }
                                        chessState.selectedPiece = null;
                                    } else if (piece && getPieceColor(piece) === chessState.currentPlayer) {
                                        chessState.selectedPiece = [row, col];
                                    }

                                    renderChessGame();
                                }

                                function makeChessMove(fromRow, fromCol, toRow, toCol) {
                                    const movingPiece = chessState.board[fromRow][fromCol];
                                    const capturedPiece = chessState.board[toRow][toCol];

                                    chessState.board[toRow][toCol] = movingPiece;
                                    chessState.board[fromRow][fromCol] = '';

                                    if (capturedPiece === 'â™”' || capturedPiece === 'â™š') {
                                        chessState.gameOver = true;
                                        chessState.winner = chessState.currentPlayer === 'white' ? 'Ø§Ù„Ø£Ø¨ÙŠØ¶' : 'Ø§Ù„Ø£Ø³ÙˆØ¯';
                                    }

                                    chessState.currentPlayer = chessState.currentPlayer === 'white' ? 'black' : 'white';

                                    if (chessState.gameMode === 'computer' && chessState.currentPlayer === 'black' && !chessState.gameOver) {
                                        setTimeout(() => {
                                            makeComputerChessMove();
                                            renderChessGame();
                                        }, 500);
                                    }
                                }

                                function makeComputerChessMove() {
                                    const blackPieces = [];
                                    for (let row = 0; row < 8; row++) {
                                        for (let col = 0; col < 8; col++) {
                                            const piece = chessState.board[row][col];
                                            if (piece && getPieceColor(piece) === 'black') {
                                                blackPieces.push({ piece, row, col });
                                            }
                                        }
                                    }

                                    let bestMove = null;
                                    let bestScore = -Infinity;

                                    for (const { piece, row, col } of blackPieces) {
                                        for (let toRow = 0; toRow < 8; toRow++) {
                                            for (let toCol = 0; toCol < 8; toCol++) {
                                                if (isValidChessMove(row, col, toRow, toCol, piece)) {
                                                    const score = evaluateChessMove(row, col, toRow, toCol);
                                                    const randomFactor = chessState.difficulty === 'easy' ? Math.random() * 5 : 
                                                                        chessState.difficulty === 'normal' ? Math.random() * 2 : 
                                                                        chessState.difficulty === 'medium' ? Math.random() : 0;
                                                    const finalScore = score + randomFactor;

                                                    if (finalScore > bestScore) {
                                                        bestScore = finalScore;
                                                        bestMove = { fromRow: row, fromCol: col, toRow, toCol };
                                                    }
                                                }
                                            }
                                        }
                                    }

                                    if (bestMove) {
                                        makeChessMove(bestMove.fromRow, bestMove.fromCol, bestMove.toRow, bestMove.toCol);
                                    }
                                }

                                function evaluateChessMove(fromRow, fromCol, toRow, toCol) {
                                    let score = 0;
                                    const targetPiece = chessState.board[toRow][toCol];

                                    if (targetPiece) {
                                        score += pieceValues[targetPiece] || 0;
                                    }

                                    const centerBonus = (3.5 - Math.abs(toRow - 3.5)) + (3.5 - Math.abs(toCol - 3.5));
                                    score += centerBonus * 0.1;

                                    if (chessState.difficulty === 'hard') {
                                        score *= 2;
                                    } else if (chessState.difficulty === 'medium') {
                                        score *= 1.5;
                                    }

                                    return score;
                                }

                                function renderChessGame() {
                                    const root = document.getElementById('chessGameRoot');

                                    if (!chessState.gameMode) {
                                        root.innerHTML = `
                                            <div class="chess-container">
                                                <div class="chess-menu">
                                                    <div class="chess-menu-card">
                                                        <h1 class="chess-title">â™Ÿï¸ Ù„Ø¹Ø¨Ø© Ø§Ù„Ø´Ø·Ø±Ù†Ø¬ â™Ÿï¸</h1>
                                                        <button onclick="startChessGame('computerSelect')" class="chess-btn chess-btn-computer">
                                                            ğŸ¤– Ø§Ù„Ù„Ø¹Ø¨ Ù…Ø¹ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±
                                                        </button>
                                                        <button onclick="startChessGame('friend')" class="chess-btn chess-btn-friend">
                                                            ğŸ‘¥ Ø§Ù„Ù„Ø¹Ø¨ Ù…Ø¹ ØµØ¯ÙŠÙ‚
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        `;
                                        return;
                                    }

                                    if (chessState.gameMode === 'computerSelect') {
                                        root.innerHTML = `
                                            <div class="chess-container">
                                                <div class="chess-menu">
                                                    <div class="chess-menu-card">
                                                        <h2 class="chess-difficulty-title">Ø§Ø®ØªØ± Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ¹ÙˆØ¨Ø©</h2>
                                                        <button onclick="startChessGame('computer', 'easy')" class="chess-diff-btn chess-diff-easy">ğŸ˜Š Ø³Ù‡Ù„</button>
                                                        <button onclick="startChessGame('computer', 'normal')" class="chess-diff-btn chess-diff-normal">ğŸ˜ Ø¹Ø§Ø¯ÙŠ</button>
                                                        <button onclick="startChessGame('computer', 'medium')" class="chess-diff-btn chess-diff-medium">ğŸ˜¤ Ù…ØªÙˆØ³Ø·</button>
                                                        <button onclick="startChessGame('computer', 'hard')" class="chess-diff-btn chess-diff-hard">ğŸ˜ˆ ØµØ¹Ø¨ Ø¬Ø¯Ø§Ù‹</button>
                                                        <button onclick="resetChessState(); renderChessGame();" class="chess-diff-btn chess-diff-back">ğŸ  Ø±Ø¬ÙˆØ¹</button>
                                                    </div>
                                                </div>
                                            </div>
                                        `;
                                        return;
                                    }

                                    let boardHTML = '';
                                    for (let row = 0; row < 8; row++) {
                                        for (let col = 0; col < 8; col++) {
                                            const isLight = (row + col) % 2 === 0;
                                            const isSelected = chessState.selectedPiece && chessState.selectedPiece[0] === row && chessState.selectedPiece[1] === col;
                                            const piece = chessState.board[row][col];

                                            boardHTML += `
                                                <div onclick="handleChessSquareClick(${row}, ${col})" 
                                                     class="chess-square chess-square-${isLight ? 'light' : 'dark'} ${isSelected ? 'chess-square-selected' : ''}">
                                                    ${piece}
                                                </div>
                                            `;
                                        }
                                    }

                                    const difficultyText = chessState.difficulty === 'easy' ? 'Ø³Ù‡Ù„' : 
                                                          chessState.difficulty === 'normal' ? 'Ø¹Ø§Ø¯ÙŠ' : 
                                                          chessState.difficulty === 'medium' ? 'Ù…ØªÙˆØ³Ø·' : 'ØµØ¹Ø¨ Ø¬Ø¯Ø§Ù‹';

                                    root.innerHTML = `
                                        ${chessState.showShareModal ? `
                                            <div class="chess-share-modal">
                                                <div class="chess-share-content">
                                                    <h3 class="chess-share-title">ğŸ”— Ø´Ø§Ø±Ùƒ Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ø¹ ØµØ¯ÙŠÙ‚Ùƒ</h3>
                                                    <input type="text" value="${chessState.shareLink}" readonly class="chess-share-input" />
                                                    <button onclick="copyChessLink()" class="chess-copy-btn">ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·</button>
                                                    <button onclick="chessState.showShareModal = false; renderChessGame();" class="chess-close-share-btn">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨</button>
                                                </div>
                                            </div>
                                        ` : ''}

                                        <div class="chess-container">
                                            <div class="chess-game-header">
                                                <h2 class="chess-game-title">
                                                    ${chessState.gameMode === 'computer' ? `ğŸ¤– Ø¶Ø¯ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± (${difficultyText})` : 'ğŸ‘¥ Ù…Ø¹ ØµØ¯ÙŠÙ‚'}
                                                </h2>
                                                <button onclick="resetChessState(); renderChessGame();" class="chess-exit-btn">ğŸ  Ø®Ø±ÙˆØ¬</button>
                                            </div>

                                            <div class="chess-turn">
                                                Ø§Ù„Ø¯ÙˆØ±: <span style="color: ${chessState.currentPlayer === 'white' ? '#3b82f6' : '#1f2937'}">
                                                    ${chessState.currentPlayer === 'white' ? 'âšª Ø§Ù„Ø£Ø¨ÙŠØ¶' : 'âš« Ø§Ù„Ø£Ø³ÙˆØ¯'}
                                                </span>
                                            </div>

                                            <div class="chess-board">${boardHTML}</div>

                                            ${chessState.gameOver ? `
                                                <div class="chess-gameover">
                                                    <div class="chess-gameover-title">
                                                        ${chessState.winner ? `ğŸ‰ Ø§Ù„ÙØ§Ø¦Ø²: ${chessState.winner}!` : 'ğŸ¤ ØªØ¹Ø§Ø¯Ù„!'}
                                                    </div>
                                                    <button onclick="startChessGame('${chessState.gameMode}', '${chessState.difficulty}')" class="chess-replay-btn">
                                                        Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
                                                    </button>
                                                </div>
                                            ` : ''}
                                        </div>
                                    `;
                                }
                                </script>
                                <!-- Bubble Shooter Game Modal -->
                                <div id="bubbleShooterModal" class="game-modal">
                                    <div class="game-modal-content" style="max-width: 800px; max-height: 90vh; overflow-y: auto;">
                                        <span class="game-close" onclick="closeBubbleShooter()">&times;</span>
                                        <div id="bubbleGameRoot"></div>
                                    </div>
                                </div>

                                <style>
                                /* Bubble Shooter Styles */
                                #bubbleGameRoot {
                                    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                                }

                                .bubble-container {
                                    background: linear-gradient(180deg, #0a0015 0%, #1a0f35 100%);
                                    padding: 20px;
                                    border-radius: 15px;
                                    text-align: center;
                                }

                                .bubble-header {
                                    display: flex;
                                    justify-content: space-between;
                                    align-items: center;
                                    margin-bottom: 15px;
                                    color: white;
                                }

                                .bubble-title {
                                    font-size: 1.5rem;
                                    font-weight: bold;
                                }

                                .bubble-exit-btn {
                                    background: #ef4444;
                                    color: white;
                                    border: none;
                                    padding: 8px 16px;
                                    border-radius: 8px;
                                    cursor: pointer;
                                    font-weight: bold;
                                }

                                .bubble-info {
                                    display: flex;
                                    justify-content: space-around;
                                    margin-bottom: 15px;
                                    padding: 15px;
                                    background: rgba(255, 255, 255, 0.1);
                                    border-radius: 10px;
                                    color: white;
                                    font-weight: bold;
                                }

                                .bubble-info-item {
                                    display: flex;
                                    flex-direction: column;
                                    align-items: center;
                                }

                                .bubble-info-label {
                                    font-size: 0.9rem;
                                    opacity: 0.8;
                                }

                                .bubble-info-value {
                                    font-size: 1.5rem;
                                    margin-top: 5px;
                                }

                                #bubbleCanvas {
                                    display: block;
                                    margin: 0 auto;
                                    background: linear-gradient(180deg, #0a0015 0%, #1a0f35 100%);
                                    border-radius: 10px;
                                    box-shadow: 0 0 30px rgba(138, 43, 226, 0.6);
                                    cursor: crosshair;
                                }

                                .bubble-gameover {
                                    position: fixed;
                                    top: 0;
                                    left: 0;
                                    right: 0;
                                    bottom: 0;
                                    background: rgba(0, 0, 0, 0.8);
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    z-index: 100000;
                                }

                                .bubble-gameover-content {
                                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                                    padding: 40px;
                                    border-radius: 20px;
                                    text-align: center;
                                    color: white;
                                    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
                                }

                                .bubble-gameover-title {
                                    font-size: 2.5rem;
                                    font-weight: bold;
                                    margin-bottom: 20px;
                                }

                                .bubble-gameover-stats {
                                    font-size: 1.2rem;
                                    margin: 15px 0;
                                }

                                .bubble-replay-btn {
                                    background: white;
                                    color: #667eea;
                                    border: none;
                                    padding: 12px 30px;
                                    border-radius: 10px;
                                    font-size: 1.1rem;
                                    font-weight: bold;
                                    cursor: pointer;
                                    margin: 5px;
                                }

                                .bubble-replay-btn:hover {
                                    transform: scale(1.05);
                                }

                                .bubble-next-level-btn {
                                    background: #10b981;
                                    color: white;
                                }
                                </style>

                                <script>
                                // Bubble Shooter Game
                                let bubbleCanvas, bubbleCtx;
                                let bubbleGame = {
                                    level: 1,
                                    score: 0,
                                    shotsLeft: 30,
                                    rows: 6,
                                    cols: 10,
                                    bubbleRadius: 20,
                                    bubbles: [],
                                    shooter: { x: 0, y: 0, angle: 0 },
                                    currentBubble: null,
                                    nextBubble: null,
                                    shooting: false,
                                    velocity: { x: 0, y: 0 },
                                    // Ø£Ù„ÙˆØ§Ù† ØºØ§Ù…Ù‚Ø© ÙˆÙˆØ§Ø¶Ø­Ø© Ø¬Ø¯Ø§Ù‹
                                    colors: [
                                        '#CC0000',  // Ø£Ø­Ù…Ø± ØºØ§Ù…Ù‚
                                        '#0066CC',  // Ø£Ø²Ø±Ù‚ ØºØ§Ù…Ù‚
                                        '#00AA00',  // Ø£Ø®Ø¶Ø± ØºØ§Ù…Ù‚
                                        '#FF8800',  // Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ ØºØ§Ù…Ù‚
                                        '#9900CC',  // Ø¨Ù†ÙØ³Ø¬ÙŠ ØºØ§Ù…Ù‚
                                        '#CCCC00',  // Ø£ØµÙØ± ØºØ§Ù…Ù‚
                                        '#CC0099'   // ÙˆØ±Ø¯ÙŠ ØºØ§Ù…Ù‚
                                    ],
                                    gameOver: false,
                                    levelComplete: false
                                };

                                const levelConfig = {
                                    1: { rows: 5, shots: 40, colors: 4 },
                                    2: { rows: 6, shots: 35, colors: 5 },
                                    3: { rows: 7, shots: 30, colors: 6 },
                                    4: { rows: 8, shots: 25, colors: 7 },
                                    5: { rows: 9, shots: 20, colors: 7 }
                                };

                                function openBubbleShooter() {
                                    document.getElementById('bubbleShooterModal').style.display = 'block';
                                    initBubbleGame();
                                }

                                function closeBubbleShooter() {
                                    document.getElementById('bubbleShooterModal').style.display = 'none';
                                    if (bubbleCanvas) {
                                        bubbleCanvas.removeEventListener('mousemove', aimBubbleShooter);
                                        bubbleCanvas.removeEventListener('click', shootBubbleClick);
                                    }
                                }

                                function initBubbleGame() {
                                    bubbleGame.level = 1;
                                    bubbleGame.score = 0;
                                    bubbleGame.gameOver = false;
                                    bubbleGame.levelComplete = false;
                                    startBubbleLevel();
                                }

                                function startBubbleLevel() {
                                    const config = levelConfig[bubbleGame.level] || levelConfig[5];

                                    bubbleGame.shotsLeft = config.shots;
                                    bubbleGame.rows = config.rows;
                                    bubbleGame.shooting = false;
                                    bubbleGame.levelComplete = false;

                                    renderBubbleGame();

                                    setTimeout(() => {
                                        bubbleCanvas = document.getElementById('bubbleCanvas');
                                        bubbleCanvas.width = 600;
                                        bubbleCanvas.height = 700;
                                        bubbleCtx = bubbleCanvas.getContext('2d');

                                        createBubbleGrid();
                                        setupBubbleShooter();

                                        bubbleCanvas.removeEventListener('mousemove', aimBubbleShooter);
                                        bubbleCanvas.removeEventListener('click', shootBubbleClick);
                                        bubbleCanvas.addEventListener('mousemove', aimBubbleShooter);
                                        bubbleCanvas.addEventListener('click', shootBubbleClick);

                                        bubbleGameLoop();
                                    }, 100);
                                }

                                function createBubbleGrid() {
                                    bubbleGame.bubbles = [];
                                    const config = levelConfig[bubbleGame.level] || levelConfig[5];
                                    const availableColors = bubbleGame.colors.slice(0, config.colors);

                                    for (let row = 0; row < config.rows; row++) {
                                        for (let col = 0; col < bubbleGame.cols; col++) {
                                            if (row % 2 === 1 && col === bubbleGame.cols - 1) continue;

                                            const x = col * (bubbleGame.bubbleRadius * 2) + bubbleGame.bubbleRadius + 
                                                     (row % 2 === 1 ? bubbleGame.bubbleRadius : 0);
                                            const y = row * (bubbleGame.bubbleRadius * 1.8) + bubbleGame.bubbleRadius + 50;

                                            bubbleGame.bubbles.push({
                                                x: x,
                                                y: y,
                                                color: availableColors[Math.floor(Math.random() * availableColors.length)],
                                                row: row,
                                                col: col
                                            });
                                        }
                                    }
                                }

                                function setupBubbleShooter() {
                                    bubbleGame.shooter.x = bubbleCanvas.width / 2;
                                    bubbleGame.shooter.y = bubbleCanvas.height - 50;

                                    const config = levelConfig[bubbleGame.level] || levelConfig[5];
                                    const availableColors = bubbleGame.colors.slice(0, config.colors);

                                    bubbleGame.currentBubble = {
                                        x: bubbleGame.shooter.x,
                                        y: bubbleGame.shooter.y,
                                        color: availableColors[Math.floor(Math.random() * availableColors.length)]
                                    };

                                    bubbleGame.nextBubble = {
                                        color: availableColors[Math.floor(Math.random() * availableColors.length)]
                                    };
                                }

                                function aimBubbleShooter(e) {
                                    if (bubbleGame.shooting || bubbleGame.gameOver || bubbleGame.levelComplete) return;

                                    const rect = bubbleCanvas.getBoundingClientRect();
                                    const mouseX = e.clientX - rect.left;
                                    const mouseY = e.clientY - rect.top;

                                    bubbleGame.shooter.angle = Math.atan2(mouseY - bubbleGame.shooter.y, mouseX - bubbleGame.shooter.x);

                                    if (bubbleGame.shooter.angle > 0) {
                                        bubbleGame.shooter.angle = Math.max(-Math.PI + 0.1, Math.min(-0.1, bubbleGame.shooter.angle));
                                    }
                                }

                                function shootBubbleClick() {
                                    if (bubbleGame.shooting || bubbleGame.gameOver || bubbleGame.levelComplete || bubbleGame.shotsLeft <= 0) return;

                                    bubbleGame.shooting = true;
                                    bubbleGame.shotsLeft--;

                                    const speed = 10;
                                    bubbleGame.velocity = {
                                        x: Math.cos(bubbleGame.shooter.angle) * speed,
                                        y: Math.sin(bubbleGame.shooter.angle) * speed
                                    };

                                    updateBubbleInfo();
                                }

                                function updateBubblePhysics() {
                                    if (!bubbleGame.shooting) return;

                                    bubbleGame.currentBubble.x += bubbleGame.velocity.x;
                                    bubbleGame.currentBubble.y += bubbleGame.velocity.y;

                                    if (bubbleGame.currentBubble.x <= bubbleGame.bubbleRadius || 
                                        bubbleGame.currentBubble.x >= bubbleCanvas.width - bubbleGame.bubbleRadius) {
                                        bubbleGame.velocity.x *= -1;
                                    }

                                    if (bubbleGame.currentBubble.y <= bubbleGame.bubbleRadius + 50) {
                                        snapBubbleToGrid();
                                        return;
                                    }

                                    for (let bubble of bubbleGame.bubbles) {
                                        const dx = bubbleGame.currentBubble.x - bubble.x;
                                        const dy = bubbleGame.currentBubble.y - bubble.y;
                                        const distance = Math.sqrt(dx * dx + dy * dy);

                                        if (distance < bubbleGame.bubbleRadius * 2) {
                                            snapBubbleToGrid();
                                            return;
                                        }
                                    }
                                }

                                function snapBubbleToGrid() {
                                    const col = Math.round((bubbleGame.currentBubble.x - bubbleGame.bubbleRadius) / (bubbleGame.bubbleRadius * 2));
                                    const row = Math.round((bubbleGame.currentBubble.y - bubbleGame.bubbleRadius - 50) / (bubbleGame.bubbleRadius * 1.8));

                                    const offsetX = row % 2 === 1 ? bubbleGame.bubbleRadius : 0;
                                    const newX = col * (bubbleGame.bubbleRadius * 2) + bubbleGame.bubbleRadius + offsetX;
                                    const newY = row * (bubbleGame.bubbleRadius * 1.8) + bubbleGame.bubbleRadius + 50;

                                    const newBubble = {
                                        x: newX,
                                        y: newY,
                                        color: bubbleGame.currentBubble.color,
                                        row: row,
                                        col: col
                                    };

                                    bubbleGame.bubbles.push(newBubble);

                                    // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„ÙƒØ±Ø§Øª Ø§Ù„Ù…ØªØ·Ø§Ø¨Ù‚Ø© ÙÙŠ Ø§Ù„Ù„ÙˆÙ† (2 Ø£Ùˆ Ø£ÙƒØ«Ø± Ø¨Ø¬Ø§Ù†Ø¨ Ø¨Ø¹Ø¶)
                                    const matchedBubbles = findConnectedBubbles(newBubble);

                                    // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ 3 ÙƒØ±Ø§Øª Ø£Ùˆ Ø£ÙƒØ«Ø± Ø¨Ù†ÙØ³ Ø§Ù„Ù„ÙˆÙ† Ù…ØªØµÙ„Ø© - Ø§Ø­Ø°ÙÙ‡Ù…!
                                    if (matchedBubbles.length >= 3) {
                                        matchedBubbles.forEach(bubble => {
                                            const index = bubbleGame.bubbles.indexOf(bubble);
                                            if (index > -1) {
                                                bubbleGame.bubbles.splice(index, 1);
                                                bubbleGame.score += 10 * bubbleGame.level;
                                            }
                                        });

                                        // Ø¨Ø¹Ø¯ Ø§Ù„Ø­Ø°ÙØŒ Ø§Ø­Ø°Ù Ø§Ù„ÙƒØ±Ø§Øª Ø§Ù„Ø¹Ø§Ø¦Ù…Ø©
                                        removeFloatingBubbles();
                                    }

                                    // ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙÙˆØ² Ø£Ùˆ Ø§Ù„Ø®Ø³Ø§Ø±Ø©
                                    if (bubbleGame.bubbles.length === 0) {
                                        bubbleGame.levelComplete = true;
                                        bubbleGame.score += 1000 * bubbleGame.level;
                                        renderBubbleGame();
                                    } else if (bubbleGame.shotsLeft <= 0 || checkBubblesTouchBottom()) {
                                        bubbleGame.gameOver = true;
                                        renderBubbleGame();
                                    } else {
                                        // ÙƒØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©
                                        bubbleGame.currentBubble = {
                                            x: bubbleGame.shooter.x,
                                            y: bubbleGame.shooter.y,
                                            color: bubbleGame.nextBubble.color
                                        };

                                        const config = levelConfig[bubbleGame.level] || levelConfig[5];
                                        const availableColors = bubbleGame.colors.slice(0, config.colors);
                                        bubbleGame.nextBubble.color = availableColors[Math.floor(Math.random() * availableColors.length)];
                                    }

                                    bubbleGame.shooting = false;
                                    updateBubbleInfo();
                                }

                                // Ø¯Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ø¨Ø­Ø« Ø¹Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒØ±Ø§Øª Ø§Ù„Ù…ØªØµÙ„Ø© Ø¨Ù†ÙØ³ Ø§Ù„Ù„ÙˆÙ†
                                function findConnectedBubbles(startBubble) {
                                    const connected = [];
                                    const checked = new Set();
                                    const targetColor = startBubble.color;

                                    function searchNeighbors(bubble) {
                                        const key = `${bubble.x},${bubble.y}`;
                                        if (checked.has(key)) return;
                                        checked.add(key);
                                        connected.push(bubble);

                                        // Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒØ±Ø§Øª Ø§Ù„Ù…Ø¬Ø§ÙˆØ±Ø© Ø¨Ù†ÙØ³ Ø§Ù„Ù„ÙˆÙ†
                                        for (let other of bubbleGame.bubbles) {
                                            const otherKey = `${other.x},${other.y}`;
                                            if (checked.has(otherKey)) continue;
                                            if (other.color !== targetColor) continue;

                                            const dx = bubble.x - other.x;
                                            const dy = bubble.y - other.y;
                                            const distance = Math.sqrt(dx * dx + dy * dy);

                                            // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù…Ø³Ø§ÙØ© Ø£Ù‚Ù„ Ù…Ù† Ø¶Ø¹Ù Ù†ØµÙ Ø§Ù„Ù‚Ø·Ø±ØŒ ÙÙ‡ÙŠ Ù…ØªØµÙ„Ø©
                                            if (distance < bubbleGame.bubbleRadius * 2.3) {
                                                searchNeighbors(other);
                                            }
                                        }
                                    }

                                    searchNeighbors(startBubble);
                                    return connected;
                                }

                                function removeFloatingBubbles() {
                                    const connected = new Set();

                                    function markConnected(bubble) {
                                        const key = `${bubble.x},${bubble.y}`;
                                        if (connected.has(key)) return;
                                        connected.add(key);

                                        for (let other of bubbleGame.bubbles) {
                                            if (other === bubble) continue;
                                            const dx = bubble.x - other.x;
                                            const dy = bubble.y - other.y;
                                            const distance = Math.sqrt(dx * dx + dy * dy);

                                            if (distance < bubbleGame.bubbleRadius * 2.3) {
                                                markConnected(other);
                                            }
                                        }
                                    }

                                    // Ø§Ø¨Ø¯Ø£ Ù…Ù† Ø§Ù„ÙƒØ±Ø§Øª ÙÙŠ Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„ (Ø§Ù„Ù…ØªØµÙ„Ø© Ø¨Ø§Ù„Ø³Ù‚Ù)
                                    bubbleGame.bubbles.filter(b => b.row === 0).forEach(markConnected);

                                    // Ø§Ø­Ø°Ù Ø§Ù„ÙƒØ±Ø§Øª Ø§Ù„Ø¹Ø§Ø¦Ù…Ø© (ØºÙŠØ± Ø§Ù„Ù…ØªØµÙ„Ø© Ø¨Ø§Ù„Ø³Ù‚Ù)
                                    const floating = bubbleGame.bubbles.filter(b => !connected.has(`${b.x},${b.y}`));
                                    floating.forEach(bubble => {
                                        const index = bubbleGame.bubbles.indexOf(bubble);
                                        if (index > -1) {
                                            bubbleGame.bubbles.splice(index, 1);
                                            bubbleGame.score += 20 * bubbleGame.level;
                                        }
                                    });

                                    if (floating.length > 0) updateBubbleInfo();
                                }

                                function checkBubblesTouchBottom() {
                                    return bubbleGame.bubbles.some(b => b.y >= bubbleCanvas.height - 100);
                                }

                                function drawBubbles() {
                                    if (!bubbleCtx) return;

                                    bubbleCtx.clearRect(0, 0, bubbleCanvas.width, bubbleCanvas.height);

                                    // Ø§Ø±Ø³Ù… Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒØ±Ø§Øª
                                    bubbleGame.bubbles.forEach(bubble => {
                                        drawBubble(bubble.x, bubble.y, bubble.color);
                                    });

                                    // Ø§Ø±Ø³Ù… Ø§Ù„ÙƒØ±Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
                                    if (!bubbleGame.shooting) {
                                        drawBubble(bubbleGame.currentBubble.x, bubbleGame.currentBubble.y, bubbleGame.currentBubble.color);

                                        // Ø®Ø· Ø§Ù„ØªØµÙˆÙŠØ¨
                                        bubbleCtx.strokeStyle = 'rgba(255, 255, 255, 0.5)';
                                        bubbleCtx.lineWidth = 3;
                                        bubbleCtx.setLineDash([10, 10]);
                                        bubbleCtx.beginPath();
                                        bubbleCtx.moveTo(bubbleGame.shooter.x, bubbleGame.shooter.y);
                                        bubbleCtx.lineTo(
                                            bubbleGame.shooter.x + Math.cos(bubbleGame.shooter.angle) * 150,
                                            bubbleGame.shooter.y + Math.sin(bubbleGame.shooter.angle) * 150
                                        );
                                        bubbleCtx.stroke();
                                        bubbleCtx.setLineDash([]);
                                    } else {
                                        drawBubble(bubbleGame.currentBubble.x, bubbleGame.currentBubble.y, bubbleGame.currentBubble.color);
                                    }

                                    // Ø§Ù„ÙƒØ±Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©
                                    bubbleCtx.fillStyle = '#fff';
                                    bubbleCtx.font = 'bold 18px Arial';
                                    bubbleCtx.fillText('Ø§Ù„ØªØ§Ù„ÙŠ:', 20, bubbleCanvas.height - 55);
                                    drawBubble(80, bubbleCanvas.height - 50, bubbleGame.nextBubble.color);
                                }

                                function drawBubble(x, y, color) {
                                    // Ø§Ù„ÙƒØ±Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© - Ù„ÙˆÙ† ØºØ§Ù…Ù‚
                                    bubbleCtx.beginPath();
                                    bubbleCtx.arc(x, y, bubbleGame.bubbleRadius, 0, Math.PI * 2);
                                    bubbleCtx.fillStyle = color;
                                    bubbleCtx.fill();

                                    // ØªØ£Ø«ÙŠØ± Ù„Ø§Ù…Ø¹ Ø®ÙÙŠÙ
                                    const gradient = bubbleCtx.createRadialGradient(
                                        x - bubbleGame.bubbleRadius * 0.4,
                                        y - bubbleGame.bubbleRadius * 0.4,
                                        0,
                                        x,
                                        y,
                                        bubbleGame.bubbleRadius
                                    );
                                    gradient.addColorStop(0, 'rgba(255, 255, 255, 0.6)');
                                    gradient.addColorStop(0.4, 'rgba(255, 255, 255, 0.2)');
                                    gradient.addColorStop(1, 'rgba(0, 0, 0, 0.1)');

                                    bubbleCtx.beginPath();
                                    bubbleCtx.arc(x, y, bubbleGame.bubbleRadius, 0, Math.PI * 2);
                                    bubbleCtx.fillStyle = gradient;
                                    bubbleCtx.fill();

                                    // Ø­Ø¯ÙˆØ¯ Ø¨ÙŠØ¶Ø§Ø¡ ÙˆØ§Ø¶Ø­Ø©
                                    bubbleCtx.strokeStyle = 'rgba(255, 255, 255, 0.6)';
                                    bubbleCtx.lineWidth = 2.5;
                                    bubbleCtx.stroke();
                                }

                                function bubbleGameLoop() {
                                    if (document.getElementById('bubbleShooterModal').style.display === 'none') return;
                                    if (bubbleGame.gameOver || bubbleGame.levelComplete) return;

                                    updateBubblePhysics();
                                    drawBubbles();
                                    requestAnimationFrame(bubbleGameLoop);
                                }

                                function updateBubbleInfo() {
                                    document.getElementById('bubbleLevel').textContent = bubbleGame.level;
                                    document.getElementById('bubbleScore').textContent = bubbleGame.score;
                                    document.getElementById('bubbleShotsLeft').textContent = bubbleGame.shotsLeft;
                                }

                                function nextLevel() {
                                    if (bubbleGame.level < 5) {
                                        bubbleGame.level++;
                                        startBubbleLevel();
                                    } else {
                                        bubbleGame.gameOver = true;
                                        renderBubbleGame();
                                    }
                                }

                                function restartBubbleGame() {
                                    initBubbleGame();
                                }

                                function renderBubbleGame() {
                                    const root = document.getElementById('bubbleGameRoot');

                                    root.innerHTML = `
                                        ${bubbleGame.gameOver ? `
                                            <div class="bubble-gameover">
                                                <div class="bubble-gameover-content">
                                                    <div class="bubble-gameover-title">${bubbleGame.level >= 5 && bubbleGame.bubbles.length === 0 ? 'ğŸ‰ ÙØ²Øª Ø¨Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø±Ø§Ø­Ù„!' : 'ğŸ˜¢ Ø®Ø³Ø±Øª!'}</div>
                                                    <div class="bubble-gameover-stats">Ø§Ù„Ù…Ø±Ø­Ù„Ø©: ${bubbleGame.level}</div>
                                                    <div class="bubble-gameover-stats">Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©: ${bubbleGame.score}</div>
                                                    <button onclick="restartBubbleGame()" class="bubble-replay-btn">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨</button>
                                                </div>
                                            </div>
                                        ` : ''}

                                        ${bubbleGame.levelComplete ? `
                                            <div class="bubble-gameover">
                                                <div class="bubble-gameover-content">
                                                    <div class="bubble-gameover-title">ğŸ‰ Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ù…Ø±Ø­Ù„Ø© ${bubbleGame.level}!</div>
                                                    <div class="bubble-gameover-stats">Ø§Ù„Ù†Ù‚Ø§Ø·: ${bubbleGame.score}</div>
                                                    ${bubbleGame.level < 5 ? `
                                                        <button onclick="nextLevel()" class="bubble-replay-btn bubble-next-level-btn">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ© â†’</button>
                                                    ` : `
                                                        <div class="bubble-gameover-stats">ğŸ† ÙØ²Øª Ø¨Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø±Ø§Ø­Ù„!</div>
                                                        <button onclick="restartBubbleGame()" class="bubble-replay-btn">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨</button>
                                                    `}
                                                </div>
                                            </div>
                                        ` : ''}

                                        <div class="bubble-container">
                                            <div class="bubble-header">
                                                <h2 class="bubble-title">ğŸ¯ Bubble Shooter</h2>
                                                <button onclick="closeBubbleShooter()" class="bubble-exit-btn">âœ• Ø®Ø±ÙˆØ¬</button>
                                            </div>

                                            <div class="bubble-info">
                                                <div class="bubble-info-item">
                                                    <span class="bubble-info-label">Ø§Ù„Ù…Ø±Ø­Ù„Ø©</span>
                                                    <span class="bubble-info-value" id="bubbleLevel">${bubbleGame.level}</span>
                                                </div>
                                                <div class="bubble-info-item">
                                                    <span class="bubble-info-label">Ø§Ù„Ù†Ù‚Ø§Ø·</span>
                                                    <span class="bubble-info-value" id="bubbleScore">${bubbleGame.score}</span>
                                                </div>
                                                <div class="bubble-info-item">
                                                    <span class="bubble-info-label">Ø§Ù„ÙƒØ±Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©</span>
                                                    <span class="bubble-info-value" id="bubbleShotsLeft">${bubbleGame.shotsLeft}</span>
                                                </div>
                                            </div>

                                            <canvas id="bubbleCanvas"></canvas>
                                        </div>
                                    `;
                                }
                                </script>
                                <script>
                                // === Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ±Ø¬Ù…Ø© ===
                                const translations = {
                                  ar: {
                                    // Ø´Ø§Ø´Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„
                                    login: "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",
                                    register: "Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨",
                                    guest: "Ø¯Ø®ÙˆÙ„ ÙƒØ²Ø§Ø¦Ø±",
                                    email: "Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",
                                    password: "ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",
                                    displayName: "Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶",
                                    age: "Ø§Ù„Ø¹Ù…Ø±",
                                    gender: "Ø§Ù„Ø¬Ù†Ø³",
                                    male: "Ø°ÙƒØ±",
                                    female: "Ø£Ù†Ø«Ù‰",
                                    other: "Ø¢Ø®Ø±",
                                    enter: "Ø¯Ø®ÙˆÙ„",
                                    createAccount: "Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨",
                                    guestName: "Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",
                                    // Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
                                    profile: "Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ",
                                    settings: "Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",
                                    info: "Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª",
                                    music: "Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰",
                                    decorations: "Ø§Ù„Ø²Ø®Ø§Ø±Ù",
                                    save: "Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª",
                                    changePassword: "ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",
                                    changeEmail: "ØªØºÙŠÙŠØ± Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",
                                    nameColor: "Ù„ÙˆÙ† Ø§Ù„Ø§Ø³Ù…",
                                    applyColor: "ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù„ÙˆÙ†",
                                    // Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
                                    notifications: "Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª",
                                    chatHistory: "Ø­ÙØ¸ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©",
                                    logout: "Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©",
                                    exitRoom: "Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† Ø§Ù„ØºØ±ÙØ©",
                                    help: "Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©",
                                    ranks: "Ø¹Ø±Ø¶ Ø§Ù„Ø±ØªØ¨",
                                    // ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù„ØºØ©
                                    language: "Ø§Ù„Ù„ØºØ©",
                                    arabic: "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
                                    english: "Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©",
                                    // Ø²Ø± Ø§Ù„Ù„ØºØ© ÙÙŠ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„
                                    selectLanguage: "Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ©"
                                  },
                                  en: {
                                    // Login Screen
                                    login: "Login",
                                    register: "Register",
                                    guest: "Guest Login",
                                    email: "Email",
                                    password: "Password",
                                    displayName: "Display Name",
                                    age: "Age",
                                    gender: "Gender",
                                    male: "Male",
                                    female: "Female",
                                    other: "Other",
                                    enter: "Login",
                                    createAccount: "Create Account",
                                    guestName: "Username",
                                    // Profile
                                    profile: "Profile",
                                    settings: "Settings",
                                    info: "Info",
                                    music: "Music",
                                    decorations: "Decorations",
                                    save: "Save Changes",
                                    changePassword: "Change Password",
                                    changeEmail: "Change Email",
                                    nameColor: "Name Color",
                                    applyColor: "Apply Color",
                                    // General
                                    notifications: "Notifications",
                                    chatHistory: "Save Chat History",
                                    logout: "Logout",
                                    exitRoom: "Leave Room",
                                    help: "Help",
                                    ranks: "View Ranks",
                                    // Language
                                    language: "Language",
                                    arabic: "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
                                    english: "English",
                                    selectLanguage: "Select Language"
                                  }
                                };

                                let currentLang = localStorage.getItem('language') || 'ar';

                                function setLanguage(lang) {
                                  currentLang = lang;
                                  localStorage.setItem('language', lang);
                                  document.documentElement.lang = lang;
                                  document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
                                  updateAllTexts();
                                }

                                function t(key) {
                                  return translations[currentLang][key] || key;
                                }

                                function updateAllTexts() {
                                  // Ø´Ø§Ø´Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„
                                  document.querySelectorAll('[data-i18n]').forEach(el => {
                                    const key = el.getAttribute('data-i18n');
                                    if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                                      el.placeholder = t(key);
                                    } else if (el.tagName === 'BUTTON' || el.tagName === 'OPTION' || el.tagName === 'LABEL' || el.tagName === 'SPAN' || el.tagName === 'H1' || el.tagName === 'H2' || el.tagName === 'P') {
                                      el.textContent = t(key);
                                    }
                                  });

                                  // Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ: ØªØ¨ÙˆÙŠØ¨Ø§Øª
                                  const tabButtons = document.querySelectorAll('.profile-tab-btn');
                                  if (tabButtons.length > 0) {
                                    tabButtons[0].innerHTML = `<i class="fas fa-info-circle"></i> ${t('info')}`;
                                    tabButtons[1].innerHTML = `<i class="fas fa-cog"></i> ${t('settings')}`;
                                    tabButtons[2].innerHTML = `<i class="fas fa-music"></i> ${t('music')}`;
                                    tabButtons[3].innerHTML = `<i class="fas fa-palette"></i> ${t('decorations')}`;
                                  }

                                  // Ø²Ø± ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ© ÙÙŠ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
                                  const langSelect = document.getElementById('profileLanguageSelect');
                                  if (langSelect) {
                                    langSelect.value = currentLang;
                                  }
                                }
                                </script>
</body>
</html>
